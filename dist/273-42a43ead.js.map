{"version":3,"file":"273-42a43ead.js","mappings":"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","sources":["webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/missing-data-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/not-initialized-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/standard-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/set-prototype-of.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/invalid-argument-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-argument-invalid-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/order-finalization-not-completed-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/request-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/afterpay-integration/src/afterpay-script-loader.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/afterpay-integration/src/afterpay-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/utility/src/is-experiment-enabled/is-experiment-enabled.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/is-request-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-method-client-unavailable-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/afterpay-integration/src/is-afterpay-window.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/afterpay-integration/src/create-afterpay-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/to-resolvable-module.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/hosted-form/hosted-field-type.ts","webpack://checkout/@bigcommerce/checkout-sdk/webpack/bootstrap","webpack://checkout/@bigcommerce/checkout-sdk/webpack/runtime/define property getters","webpack://checkout/@bigcommerce/checkout-sdk/webpack/runtime/hasOwnProperty shorthand","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-method-failed-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/util-types/guard.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-credit-card/bluesnap-direct-3ds.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/payment/is-hosted-intrument-like.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/payment/is-vaulted-instrument.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/order-finalization-not-required-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/utils/is-hosted-card-field-options-map.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/utils/is-hosted-stored-card-field-options-map.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/types.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-credit-card/bluesnap-direct-credit-card-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-invalid-form-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-constants.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-credit-card/bluesnap-direct-hosted-form.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/utils/is-bluesnap-direct-input-validation-error-description.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-credit-card/bluesnap-direct-hosted-input-validator.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-credit-card/bluesnap-direct-name-on-card-input.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/utils/is-array-of-allowed-props.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-credit-card/bluesnap-direct-script-loader.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-credit-card/create-bluesnap-direct-credit-card-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-apm/bluesnap-direct-apm-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/utils/is-bluesnap-direct-provider-data.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/utils/is-bluesnap-direct-instrument.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnap-direct-apm/create-bluesnap-direct-apm-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/common/cancellable-promise/cancellable-promise.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-method-cancelled-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/payment/payment-status-types.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnapv2/bluesnapv2-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/bluesnap-direct-integration/src/bluesnapv2/create-bluesnapv2-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/credit-card-integration/src/credit-card-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/cba-mpgs-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/is-cba-mpgs-payment-method-like.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/cba-mpgs.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/cba-mpgs-script-loader.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/create-cba-mpgs-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-custom-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-sepa/checkoutcom-fawry-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-sepa/create-checkoutcom-fawry-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/isThreeDSecureRequiredError.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-credit-card-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/create-checkoutcom-credit-card-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-sepa/checkoutcom-sepa-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-sepa/create-checkoutcom-sepa-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-ideal/checkoutcom-ideal-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-ideal/create-checkoutcom-ideal-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-apm/checkoutcom-apm-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/checkoutcom-custom-integration/src/checkoutcom-apm/create-checkoutcom-apm-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/clearpay-integration/src/clearpay-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/clearpay-integration/src/clearpay-script-loader.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/clearpay-integration/src/create-clearpay-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/offsite-integration/src/offsite-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/offsite-integration/src/create-offsite-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/paypal-express-integration/src/paypal-express-types.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/paypal-express-integration/src/paypal-express-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/paypal-express-integration/src/paypal-express-script-loader.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/paypal-express-integration/src/create-paypal-express-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/common/http-request/internal-api-headers.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/common/http-request/sdk-version-headers.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/paypal-express-integration/src/paypal-express-button-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/paypal-express-integration/src/create-paypal-express-button-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/common/browser-info/get-browser-info.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/sagepay-integration/src/sage-pay-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/sagepay-integration/src/create-sage-pay-payment-strategy.ts"],"sourcesContent":["import StandardError from './standard-error';\n\nexport enum MissingDataErrorType {\n    MissingBillingAddress,\n    MissingCart,\n    MissingCheckout,\n    MissingConsignments,\n    MissingCustomer,\n    MissingCheckoutConfig,\n    MissingOrder,\n    MissingOrderConfig,\n    MissingOrderId,\n    MissingPayment,\n    MissingPaymentId,\n    MissingPaymentInstrument,\n    MissingPaymentMethod,\n    MissingPaymentRedirectUrl,\n    MissingPaymentStatus,\n    MissingPaymentToken,\n    MissingShippingAddress,\n}\n\n/**\n * Throw this error when data that is expected to exist is missing. Usually it\n * is due to the fact that certain data has not been retrieved from or saved to\n * the server yet. And such data is required to perform certain actions.\n */\nexport default class MissingDataError extends StandardError {\n    constructor(public subtype: MissingDataErrorType) {\n        super(getErrorMessage(subtype));\n\n        this.name = 'MissingDataError';\n        this.type = 'missing_data';\n    }\n}\n\nfunction getErrorMessage(type: MissingDataErrorType): string {\n    switch (type) {\n        case MissingDataErrorType.MissingBillingAddress:\n            return 'Unable to proceed because billing address data is unavailable.';\n\n        case MissingDataErrorType.MissingCart:\n            return 'Unable to proceed because cart data is unavailable.';\n\n        case MissingDataErrorType.MissingConsignments:\n            return 'Unable to proceed because consignments data is unavailable.';\n\n        case MissingDataErrorType.MissingCheckout:\n            return 'Unable to proceed because checkout data is unavailable.';\n\n        case MissingDataErrorType.MissingCustomer:\n            return 'Unable to proceed because customer data is unavailable.';\n\n        case MissingDataErrorType.MissingCheckoutConfig:\n        case MissingDataErrorType.MissingOrderConfig:\n            return 'Unable to proceed because configuration data is unavailable.';\n\n        case MissingDataErrorType.MissingOrder:\n            return 'Unable to proceed because order data is unavailable.';\n\n        case MissingDataErrorType.MissingOrderId:\n            return 'Unable to proceed because order ID is unavailable or not generated yet.';\n\n        case MissingDataErrorType.MissingPayment:\n            return 'Unable to proceed because payment data is unavailable.';\n\n        case MissingDataErrorType.MissingPaymentToken:\n            return 'Unable to proceed because the token required to submit a payment is missing.';\n\n        case MissingDataErrorType.MissingPaymentMethod:\n            return 'Unable to proceed because payment method data is unavailable or not properly configured.';\n\n        case MissingDataErrorType.MissingShippingAddress:\n            return 'Unable to proceed because shipping address data is unavailable.';\n\n        default:\n            return 'Unable to proceed because the required data is unavailable.';\n    }\n}\n","import StandardError from './standard-error';\n\nexport enum NotInitializedErrorType {\n    CheckoutButtonNotInitialized,\n    CustomerNotInitialized,\n    PaymentNotInitialized,\n    ShippingNotInitialized,\n    SpamProtectionNotInitialized,\n}\n\n/**\n * Throw this error if a method requires a certain initialization call to be\n * made first. Some objects can be constructed but they cannot be used until a\n * separate initialization call is made.\n */\nexport default class NotInitializedError extends StandardError {\n    constructor(public subtype: NotInitializedErrorType) {\n        super(getErrorMessage(subtype));\n\n        this.name = 'NotInitializedError';\n        this.type = 'not_initialized';\n    }\n}\n\nfunction getErrorMessage(type: NotInitializedErrorType): string {\n    switch (type) {\n        case NotInitializedErrorType.CustomerNotInitialized:\n            return 'Unable to proceed because the customer step of checkout has not been initialized.';\n\n        case NotInitializedErrorType.PaymentNotInitialized:\n            return 'Unable to proceed because the payment step of checkout has not been initialized.';\n\n        case NotInitializedErrorType.ShippingNotInitialized:\n            return 'Unable to proceed because the shipping step of checkout has not been initialized.';\n\n        case NotInitializedErrorType.SpamProtectionNotInitialized:\n            return 'Unable to proceed because the checkout spam protection has not been initialized.';\n\n        default:\n            return 'Unable to proceed because the required component has not been initialized.';\n    }\n}\n","import CustomError from './custom-error';\nimport setPrototypeOf from './set-prototype-of';\n\n/**\n * This error type should not be constructed directly. It is a base class for\n * all custom errors thrown in this library.\n */\nexport default abstract class StandardError extends Error implements CustomError {\n    name = 'StandardError';\n    type = 'standard';\n\n    constructor(message?: string) {\n        super(message || 'An unexpected error has occurred.');\n\n        setPrototypeOf(this, new.target.prototype);\n\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, new.target);\n        } else {\n            this.stack = new Error(this.message).stack;\n        }\n    }\n}\n","export default function setPrototypeOf(object: any, prototype: object) {\n    if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(object, prototype);\n    } else {\n        object.__proto__ = prototype;\n    }\n\n    return object;\n}\n","import StandardError from './standard-error';\n\n/**\n * This error should be thrown when a method is unable to proceed because the\n * caller has not provided all the arguments according to their requirements,\n * i.e.: if an argument is missing or it is not the expected data type.\n */\nexport default class InvalidArgumentError extends StandardError {\n    constructor(message?: string) {\n        super(message || 'Invalid arguments have been provided.');\n\n        this.name = 'InvalidArgumentError';\n        this.type = 'invalid_argument';\n    }\n}\n","import InvalidArgumentError from './invalid-argument-error';\n\n/**\n * This error should be thrown when we are unable to submit a payment because\n * the caller has not provided all the required fields, i.e.: if an argument is\n * missing or it is not the expected data type.\n */\nexport default class PaymentArgumentInvalidError extends InvalidArgumentError {\n    constructor(invalidFields?: string[]) {\n        let message = 'Unable to submit payment for the order because the payload is invalid.';\n\n        if (invalidFields) {\n            message = `${message} Make sure the following fields are provided correctly: ${invalidFields.join(\n                ', ',\n            )}.`;\n        }\n\n        super(message);\n\n        this.name = 'PaymentArgumentInvalidError';\n    }\n}\n","import StandardError from './standard-error';\n\n/**\n * Throw this error if the order finalization request\n * was not completed successfully.\n */\nexport default class OrderFinalizationNotCompletedError extends StandardError {\n    constructor(message?: string) {\n        super(message || 'The current order could not be finalized successfully');\n\n        this.name = 'OrderFinalizationNotCompletedError';\n        this.type = 'order_finalization_not_completed';\n    }\n}\n","import { Response } from '@bigcommerce/request-sender';\n\nimport StandardError from './standard-error';\n\nconst DEFAULT_RESPONSE = {\n    body: {},\n    headers: {},\n    status: 0,\n};\n\n/**\n * Throw this error if we are unable to make a request to the server. It wraps\n * any server response into a JS error object.\n */\nexport default class RequestError<TBody = any> extends StandardError {\n    body: TBody | {};\n    headers: { [key: string]: any };\n    errors: Array<{ code: string; message?: string }>;\n    status: number;\n\n    constructor(\n        response?: Response<TBody | {}>,\n        {\n            message,\n            errors,\n        }: {\n            message?: string;\n            errors?: Array<{ code: string; message?: string }>;\n        } = {},\n    ) {\n        const { body, headers, status } = response || DEFAULT_RESPONSE;\n\n        super(message || 'An unexpected error has occurred.');\n\n        this.name = 'RequestError';\n        this.type = 'request';\n        this.body = body;\n        this.headers = headers;\n        this.status = status;\n        this.errors = errors || [];\n    }\n}\n","import { ScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    PaymentMethod,\n    PaymentMethodClientUnavailableError,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport AfterpaySdk from './afterpay-sdk';\nimport isAfterpayWindow from './is-afterpay-window';\n\nenum SCRIPTS_DEFAULT {\n    PROD = '//portal.afterpay.com/afterpay-async.js',\n    SANDBOX = '//portal.sandbox.afterpay.com/afterpay.js',\n    HTTPS_PROD = 'https://portal.afterpay.com/afterpay-async.js',\n    HTTPS_SANDBOX = 'https://portal.sandbox.afterpay.com/afterpay.js',\n}\n\nenum SCRIPTS_US {\n    PROD = '//portal.afterpay.com/afterpay-async.js',\n    SANDBOX = '//portal.sandbox.afterpay.com/afterpay.js',\n    HTTPS_PROD = 'https://portal.afterpay.com/afterpay-async.js',\n    HTTPS_SANDBOX = 'https://portal.sandbox.afterpay.com/afterpay.js',\n}\n\n/** Class responsible for loading the Afterpay SDK */\nexport default class AfterpayScriptLoader {\n    constructor(private _scriptLoader: ScriptLoader) {}\n\n    /**\n     * Loads the appropriate Afterpay SDK depending on the payment method data.\n     *\n     * @param {PaymentMethod} method the payment method data\n     */\n    async load(\n        method: PaymentMethod,\n        countryCode: string,\n        withHttps = false,\n    ): Promise<AfterpaySdk> {\n        const testMode = method.config.testMode || false;\n        const scriptURI = this._getScriptURI(countryCode, testMode, withHttps);\n\n        return this._scriptLoader.loadScript(scriptURI).then(() => {\n            if (!isAfterpayWindow(window)) {\n                throw new PaymentMethodClientUnavailableError();\n            }\n\n            return window.AfterPay;\n        });\n    }\n\n    private _getScriptURI(countryCode: string, testMode: boolean, withHttps = false): string {\n        if (countryCode === 'US') {\n            if (withHttps) {\n                return testMode ? SCRIPTS_US.HTTPS_SANDBOX : SCRIPTS_US.HTTPS_PROD;\n            }\n\n            return testMode ? SCRIPTS_US.SANDBOX : SCRIPTS_US.PROD;\n        }\n\n        if (withHttps) {\n            return testMode ? SCRIPTS_DEFAULT.HTTPS_SANDBOX : SCRIPTS_DEFAULT.HTTPS_PROD;\n        }\n\n        return testMode ? SCRIPTS_DEFAULT.SANDBOX : SCRIPTS_DEFAULT.PROD;\n    }\n}\n","import {\n    InvalidArgumentError,\n    isRequestError,\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotCompletedError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInitializeOptions,\n    PaymentIntegrationSelectors,\n    PaymentIntegrationService,\n    PaymentMethod,\n    PaymentRequestOptions,\n    PaymentStrategy,\n    RequestError,\n    RequestOptions,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\nimport { isExperimentEnabled } from '@bigcommerce/checkout-sdk/utility';\n\nimport AfterpayScriptLoader from './afterpay-script-loader';\nimport AfterpaySdk from './afterpay-sdk';\n\nexport default class AfterpayPaymentStrategy implements PaymentStrategy {\n    private _afterpaySdk?: AfterpaySdk;\n\n    constructor(\n        private _paymentIntegrationService: PaymentIntegrationService,\n        private _afterpayScriptLoader: AfterpayScriptLoader,\n    ) {}\n\n    async initialize(options: PaymentInitializeOptions): Promise<void> {\n        const state = this._paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethod(options.methodId, options.gatewayId);\n        const currencyCode = state.getCart()?.currency.code || '';\n        const countryCode = this._mapCurrencyToISO2(currencyCode);\n        const features = state.getStoreConfigOrThrow().checkoutSettings.features;\n        const withHttpsExperimentName = 'PI-4789.afterpay_script_use_https';\n        const withHttps = isExperimentEnabled(features, withHttpsExperimentName, false);\n\n        if (!paymentMethod) {\n            throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n        }\n\n        this._afterpaySdk = await this._afterpayScriptLoader.load(\n            paymentMethod,\n            countryCode,\n            withHttps,\n        );\n    }\n\n    deinitialize(): Promise<void> {\n        if (this._afterpaySdk) {\n            this._afterpaySdk = undefined;\n        }\n\n        return Promise.resolve();\n    }\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        if (!payload.payment) {\n            throw new PaymentArgumentInvalidError(['payment.gatewayId', 'payment.methodId']);\n        }\n\n        const { gatewayId, methodId } = payload.payment;\n\n        if (!gatewayId || !methodId) {\n            throw new PaymentArgumentInvalidError(['payment.gatewayId', 'payment.methodId']);\n        }\n\n        const { useStoreCredit } = payload;\n\n        if (useStoreCredit !== undefined) {\n            await this._paymentIntegrationService.applyStoreCredit(useStoreCredit);\n        }\n\n        await this._loadPaymentMethod(gatewayId, methodId, options);\n\n        const state = this._paymentIntegrationService.getState();\n\n        await this._paymentIntegrationService.validateCheckout(state.getCheckout(), options);\n\n        const currencyCode = state.getCart()?.currency.code || '';\n        const countryCode = this._mapCurrencyToISO2(currencyCode);\n\n        this._redirectToAfterpay(countryCode, state.getPaymentMethod(methodId, gatewayId));\n\n        // Afterpay will handle the rest of the flow so return a promise that doesn't really resolve\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        return new Promise<never>(() => {});\n    }\n\n    async finalize(options: PaymentRequestOptions): Promise<void> {\n        const state = this._paymentIntegrationService.getState();\n        const payment = state.getPaymentId();\n        const config = state.getContextConfig();\n\n        if (!payment) {\n            throw new MissingDataError(MissingDataErrorType.MissingCheckout);\n        }\n\n        if (!config?.payment.token) {\n            throw new MissingDataError(MissingDataErrorType.MissingCheckoutConfig);\n        }\n\n        const paymentPayload = {\n            methodId: payment.providerId,\n            paymentData: { nonce: config.payment.token },\n        };\n\n        await this._paymentIntegrationService.submitOrder({}, options);\n\n        try {\n            await this._paymentIntegrationService.submitPayment(paymentPayload);\n        } catch (error) {\n            await this._paymentIntegrationService.forgetCheckout(payment.providerId);\n            await this._paymentIntegrationService.loadPaymentMethods();\n\n            if (isRequestError(error)) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument,@typescript-eslint/no-unsafe-member-access\n                throw new OrderFinalizationNotCompletedError(error.body?.errors?.[0]?.message);\n            }\n        }\n    }\n\n    private _redirectToAfterpay(countryCode: string, paymentMethod?: PaymentMethod): void {\n        if (!this._afterpaySdk || !paymentMethod?.clientToken) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        this._afterpaySdk.initialize({ countryCode });\n        this._afterpaySdk.redirect({ token: paymentMethod.clientToken });\n    }\n\n    private _mapCurrencyToISO2(currencyCode: string): string {\n        const countryByCurrency: { [key: string]: string } = {\n            AUD: 'AU',\n            NZD: 'NZ',\n            CAD: 'CA',\n            USD: 'US',\n        };\n\n        return countryByCurrency[currencyCode] || 'AU';\n    }\n\n    private async _loadPaymentMethod(\n        gatewayId: string,\n        methodId: string,\n        options?: RequestOptions,\n    ): Promise<PaymentIntegrationSelectors> {\n        try {\n            return await this._paymentIntegrationService.loadPaymentMethod(gatewayId, {\n                ...options,\n                params: { ...options?.params, method: methodId },\n            });\n        } catch (error) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            if (error instanceof RequestError && error.body?.status === 422) {\n                throw new InvalidArgumentError(\n                    \"Afterpay can't process your payment for this order, please try another payment method\",\n                );\n            }\n\n            throw error;\n        }\n    }\n}\n","export interface Features {\n    [featureName: string]: boolean | undefined;\n}\n\nexport default function isExperimentEnabled(\n    features: Features,\n    experimentName: string,\n    fallbackValue = true,\n): boolean {\n    return features[experimentName] ?? fallbackValue;\n}\n","import RequestError from './request-error';\n\n// Have to use `as` https://stackoverflow.com/questions/73987044/typeguarding-an-unknown-nested-object should be fixed in 4.8+\nconst isRequestError = (error: unknown): error is RequestError => {\n    return typeof error === 'object' && error !== null && 'body' in error;\n};\n\nexport default isRequestError;\n","import StandardError from './standard-error';\n\n/**\n * This error should be thrown when the client library of a payment method fails\n * to load, or for some reason, it is inaccessible.\n */\nexport default class PaymentMethodClientUnavailableError extends StandardError {\n    constructor(message?: string) {\n        super(\n            message ||\n                'Unable to proceed because the client library of a payment method is not loaded or ready to be used.',\n        );\n\n        this.name = 'PaymentMethodClientUnavailableError';\n        this.type = 'payment_method_client_unavailable';\n    }\n}\n","import AfterpayWindow from './afterpay-window';\n\nexport default function isAfterpayWindow(window: Window): window is AfterpayWindow {\n    return 'AfterPay' in window;\n}\n","import { createScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport AfterpayPaymentStrategy from './afterpay-payment-strategy';\nimport AfterpayScriptLoader from './afterpay-script-loader';\n\nconst createAfterpayPaymentStrategy: PaymentStrategyFactory<AfterpayPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new AfterpayPaymentStrategy(\n        paymentIntegrationService,\n        new AfterpayScriptLoader(createScriptLoader()),\n    );\n};\n\nexport default toResolvableModule(createAfterpayPaymentStrategy, [\n    { gateway: 'afterpay' },\n    { id: 'afterpay' },\n]);\n","import ResolvableModule from './resolvable-module';\n\nexport default function toResolvableModule<TModule, TIdentifier>(\n    module: TModule,\n    resolveIds: TIdentifier[],\n): ResolvableModule<TModule, TIdentifier> {\n    return Object.assign(module, { resolveIds });\n}\n","// copied from packages/core/src/hosted-form/hosted-field-type.ts\n\nenum HostedFieldType {\n    CardCode = 'cardCode',\n    CardCodeVerification = 'cardCodeVerification',\n    CardExpiry = 'cardExpiry',\n    CardName = 'cardName',\n    CardNumber = 'cardNumber',\n    CardNumberVerification = 'cardNumberVerification',\n    CardExpiryVerification = 'cardExpiryVerification',\n}\n\nexport default HostedFieldType;\n","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import StandardError from './standard-error';\n\n/**\n * This error should be thrown when a payment method experiences some kind of\n * failure (i.e.: its client library returns a rejected promise). And there is\n * no other error type that is more specific than this one.\n */\nexport default class PaymentMethodFailedError extends StandardError {\n    constructor(message?: string) {\n        super(\n            message ||\n                'Unable to proceed because the client library of a payment method has thrown an unexpected error.',\n        );\n\n        this.name = 'PaymentMethodFailedError';\n        this.type = 'payment_method_client_invalid';\n    }\n}\n","export default function guard<T>(value: T, errorFactory?: () => Error): NonNullable<T> {\n    if (value === undefined || value === null) {\n        throw errorFactory ? errorFactory() : new Error('An unexpected error has occurred.');\n    }\n\n    return value as NonNullable<T>;\n}\n","import {\n    guard,\n    NotInitializedError,\n    NotInitializedErrorType,\n    PaymentMethodFailedError,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { BlueSnapDirectPreviouslyUsedCard, BlueSnapDirectSdk } from '../types';\n\nexport default class BlueSnapDirect3ds {\n    private _blueSnapSdk?: BlueSnapDirectSdk;\n\n    initialize(blueSnapSdk: BlueSnapDirectSdk) {\n        this._blueSnapSdk = blueSnapSdk;\n    }\n\n    async initialize3ds(\n        token: string,\n        cardData: BlueSnapDirectPreviouslyUsedCard,\n    ): Promise<string> {\n        const blueSnapSdk = this._getBlueSnapSdk();\n\n        return new Promise((resolve, reject) => {\n            blueSnapSdk.threeDsPaymentsSetup(token, (sdkResponse) => {\n                const code = sdkResponse.code;\n\n                if (code === '1') {\n                    return resolve(sdkResponse.threeDSecure.threeDSecureReferenceId);\n                }\n\n                return reject(new PaymentMethodFailedError());\n            });\n\n            blueSnapSdk.threeDsPaymentsSubmitData(cardData);\n        });\n    }\n\n    private _getBlueSnapSdk(): BlueSnapDirectSdk {\n        return guard(\n            this._blueSnapSdk,\n            () => new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized),\n        );\n    }\n}\n","import { HostedInstrument } from './payment';\n\nexport default function isHostedInstrumentLike(\n    instrument: unknown,\n): instrument is HostedInstrument {\n    return (\n        typeof instrument === 'object' &&\n        instrument !== null &&\n        (typeof (instrument as HostedInstrument).shouldSaveInstrument === 'undefined' ||\n            typeof (instrument as HostedInstrument).shouldSaveInstrument === 'boolean') &&\n        (typeof (instrument as HostedInstrument).shouldSetAsDefaultInstrument === 'undefined' ||\n            typeof (instrument as HostedInstrument).shouldSetAsDefaultInstrument === 'boolean')\n    );\n}\n","import {\n    FormattedPayload,\n    FormattedVaultedInstrument,\n    HostedVaultedInstrument,\n    PaymentInstrumentPayload,\n    VaultedInstrument,\n} from './payment';\n\nexport default function isVaultedInstrument(\n    instrument: PaymentInstrumentPayload,\n): instrument is VaultedInstrument {\n    return Boolean((instrument as VaultedInstrument).instrumentId);\n}\n\nexport function isHostedVaultedInstrument(\n    instrument: PaymentInstrumentPayload,\n): instrument is HostedVaultedInstrument {\n    return (\n        Boolean((instrument as HostedVaultedInstrument).instrumentId) &&\n        !Object.prototype.hasOwnProperty.call(instrument, 'ccNumber') &&\n        !Object.prototype.hasOwnProperty.call(instrument, 'ccCvv')\n    );\n}\n\nexport function isFormattedVaultedInstrument(\n    instrument: PaymentInstrumentPayload,\n): instrument is FormattedPayload<FormattedVaultedInstrument> {\n    const formattedInstrument = (instrument as FormattedPayload<FormattedVaultedInstrument>)\n        .formattedPayload;\n\n    if (!formattedInstrument) {\n        return false;\n    }\n\n    return (\n        typeof formattedInstrument.bigpay_token === 'string' ||\n        Boolean(formattedInstrument.bigpay_token && formattedInstrument.bigpay_token.token)\n    );\n}\n","import StandardError from './standard-error';\n\n/**\n * Throw this error if we are trying to make an order finalization request for a\n * payment method that does not require such procedure.\n */\nexport default class OrderFinalizationNotRequiredError extends StandardError {\n    constructor() {\n        super('The current order does not need to be finalized at this stage.');\n\n        this.name = 'OrderFinalizationNotRequiredError';\n        this.type = 'order_finalization_not_required';\n    }\n}\n","import {\n    HostedCardFieldOptionsMap,\n    HostedFieldOptionsMap,\n    HostedFieldType,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default function isHostedCardFieldOptionsMap(\n    fields: HostedFieldOptionsMap,\n): fields is HostedCardFieldOptionsMap {\n    return HostedFieldType.CardNumber in fields;\n}\n","import {\n    HostedFieldOptionsMap,\n    HostedFieldType,\n    HostedStoredCardFieldOptionsMap,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default function isHostedStoredCardFieldOptionsMap(\n    fields: HostedFieldOptionsMap,\n): fields is HostedStoredCardFieldOptionsMap {\n    return (\n        HostedFieldType.CardCodeVerification in fields ||\n        HostedFieldType.CardNumberVerification in fields\n    );\n}\n","export type BluesnapDirectNocInputAllowedStyle = Pick<\n    CSSStyleDeclaration,\n    'color' | 'fontFamily' | 'fontSize' | 'fontWeight'\n>;\n\nexport interface BlueSnapDirectStyleDeclaration {\n    [k: string]: string;\n}\n\nexport interface BlueSnapDirectStyle {\n    '.invalid'?: BlueSnapDirectStyleDeclaration;\n    ':focus'?: BlueSnapDirectStyleDeclaration;\n    input?: BlueSnapDirectStyleDeclaration;\n}\n\nexport enum BlueSnapDirectCardType {\n    AMEX = 'american-express',\n    CHINA_UNION_PAY = 'unionpay',\n    DINERS = 'diners-club',\n    DISCOVER = 'discover',\n    JCB = 'jcb',\n    MASTERCARD = 'mastercard',\n    UNKNOWN = 'unknown',\n    VISA = 'visa',\n}\n\nexport type BlueSnapDirectCardTypeValues = keyof typeof BlueSnapDirectCardType;\n\nexport enum BlueSnapDirectEventOrigin {\n    ON_BLUR = 'onBlur',\n    ON_SUBMIT = 'onSubmit',\n}\n\nexport enum BlueSnapDirectErrorDescription {\n    EMPTY = 'empty',\n    INVALID = 'invalid',\n    THREE_DS_NOT_ENABLED = '3D Secure is not enabled',\n}\n\nexport type BlueSnapDirectInputValidationErrorDescription = Extract<\n    BlueSnapDirectErrorDescription,\n    BlueSnapDirectErrorDescription.EMPTY | BlueSnapDirectErrorDescription.INVALID\n>;\n\nexport enum BlueSnapDirectErrorCode {\n    CC_NOT_SUPORTED = '22013',\n    ERROR_403 = '403',\n    ERROR_404 = '404',\n    ERROR_500 = '500',\n    INVALID_OR_EMPTY = '10',\n    SESSION_EXPIRED = '400',\n    THREE_DS_AUTH_FAILED = '14101',\n    THREE_DS_CLIENT_ERROR = '14103',\n    THREE_DS_MISSING_FIELDS = '14102',\n    THREE_DS_NOT_ENABLED = '14100',\n    TOKEN_EXPIRED = '14040',\n    TOKEN_NOT_ASSOCIATED = '14042',\n    TOKEN_NOT_FOUND = '14041',\n}\n\nexport enum BlueSnapDirectHostedFieldTagId {\n    CardCode = 'cvv',\n    CardExpiry = 'exp',\n    CardName = 'noc',\n    CardNumber = 'ccn',\n}\n\nexport interface BlueSnapDirectHostedPaymentFieldsOptions {\n    token: string;\n    onFieldEventHandler?: {\n        setupComplete?: () => void;\n        threeDsChallengeExecuted?: () => void;\n        onFocus?: (tagId: BlueSnapDirectHostedFieldTagId) => void;\n        onBlur?: (tagId: BlueSnapDirectHostedFieldTagId) => void;\n        onError?: (\n            tagId: BlueSnapDirectHostedFieldTagId | undefined,\n            errorCode: BlueSnapDirectErrorCode,\n            errorDescription: BlueSnapDirectErrorDescription | undefined,\n            eventOrigin: BlueSnapDirectEventOrigin | undefined,\n        ) => void;\n        onType?: (\n            tagId: BlueSnapDirectHostedFieldTagId,\n            cardType: BlueSnapDirectCardTypeValues,\n            cardData: BlueSnapDirectCardData | undefined,\n        ) => void;\n        onEnter?: (tagId: BlueSnapDirectHostedFieldTagId) => void;\n        onValid?: (tagId: BlueSnapDirectHostedFieldTagId) => void;\n    };\n    ccnPlaceHolder?: string;\n    cvvPlaceHolder?: string;\n    expPlaceHolder?: string;\n    style?: BlueSnapDirectStyle;\n    '3DS'?: boolean;\n}\n\ninterface BlueSnapDirectCallback {\n    statusCode: string;\n    transactionFraudInfo: {\n        fraudSessionId: string;\n    };\n}\n\ninterface BlueSnapDirectCardData {\n    binCategory: string;\n    cardSubType: string;\n    ccBin: string;\n    ccType: string;\n    isRegulatedCard: string;\n    issuingCountry: string;\n    last4Digits: string;\n}\n\nexport interface BlueSnapDirectCallbackCardData extends BlueSnapDirectCardData {\n    cardCategory: string;\n    exp: string;\n}\n\ninterface BlueSnapDirectCallbackData extends BlueSnapDirectCallback {\n    cardData: BlueSnapDirectCallbackCardData;\n}\n\nexport interface WithBlueSnapDirectCardHolderName {\n    cardHolderName?: string;\n}\n\ninterface BlueSnapDirectSubmitError {\n    errorCode: string;\n    errorDescription: string;\n    eventType: string;\n    tagId: string;\n}\n\nexport interface BlueSnapDirectCallbackError extends BlueSnapDirectCallback {\n    error: BlueSnapDirectSubmitError[];\n}\n\nexport type BlueSnapDirectCallbackResults =\n    | BlueSnapDirectCallbackData\n    | BlueSnapDirectCallbackError;\n\nexport interface BlueSnapDirectThreeDSecureData {\n    amount: number;\n    currency: string;\n    billingFirstName?: string;\n    billingLastName?: string;\n    billingCountry?: string;\n    billingState?: string;\n    billingCity?: string;\n    billingAddress?: string;\n    billingZip?: string;\n    shippingFirstName?: string;\n    shippingLastName?: string;\n    shippingCountry?: string;\n    shippingState?: string;\n    shippingCity?: string;\n    shippingAddress?: string;\n    shippingZip?: string;\n    email?: string;\n    phone?: string;\n}\n\nexport interface BlueSnapDirectSdk {\n    hostedPaymentFieldsCreate(options: BlueSnapDirectHostedPaymentFieldsOptions): void;\n    hostedPaymentFieldsSubmitData(\n        callback: (results: BlueSnapDirectCallbackResults) => void,\n        threeDSecureData?: BlueSnapDirectThreeDSecureData,\n    ): void;\n    threeDsPaymentsSetup(\n        token: string,\n        callback: (reponse: BlueSnapDirect3dsCallbackResponse) => void,\n    ): void;\n    threeDsPaymentsSubmitData(cardData: BlueSnapDirectPreviouslyUsedCard): void;\n}\n\nexport interface BlueSnapDirectPreviouslyUsedCard {\n    last4Digits?: string;\n    ccType?: string;\n    amount: number;\n    currency: string;\n    billingFirstName?: string;\n    billingLastName?: string;\n    billingCountry?: string;\n    billingState?: string;\n    billingCity?: string;\n    billingAddress?: string;\n    billingZip?: string;\n    shippingFirstName?: string;\n    shippingLastName?: string;\n    shippingCountry?: string;\n    shippingState?: string;\n    shippingCity?: string;\n    shippingAddress?: string;\n    shippingZip?: string;\n    email?: string;\n    phone?: string;\n}\n\nexport interface BlueSnapDirect3dsCallbackResponse {\n    code: string;\n    cardData: BlueSnapDirectCallbackCardData;\n    threeDSecure: {\n        authResult: string;\n        threeDSecureReferenceId: string;\n    };\n}\n\nexport interface BlueSnapDirectHostWindow extends Window {\n    bluesnap?: BlueSnapDirectSdk;\n}\n\nexport interface BlueSnapDirectStyleProps {\n    border?: string;\n    height?: string;\n    width?: string;\n}\n\nexport interface BlueSnapDirectRedirectResponseProviderData {\n    [key: string]: string;\n    merchantid: string;\n}\n\nexport interface BlueSnapDirectRedirectResponse {\n    body: {\n        additional_action_required: {\n            type: 'offsite_redirect';\n            data: {\n                redirect_url: string;\n            };\n        };\n        status: string;\n        provider_data?: string;\n    };\n}\n\n/**\n * A set of options that are required to initialize the BlueSnap V2 payment\n * method.\n *\n * The payment step is done through a web page via an iframe provided by the\n * strategy.\n *\n * ```html\n * <!-- This is where the BlueSnap iframe will be inserted. It can be an in-page container or a modal -->\n * <div id=\"container\"></div>\n *\n * <!-- This is a cancellation button -->\n * <button type=\"button\" id=\"cancel-button\"></button>\n * ```\n *\n * ```js\n * service.initializePayment({\n *     methodId: 'bluesnapDirect',\n *     bluesnapDirect: {\n *         onLoad: (iframe) => {\n *             document.getElementById('container')\n *                 .appendChild(iframe);\n *\n *             document.getElementById('cancel-button')\n *                 .addEventListener('click', () => {\n *                     document.getElementById('container').innerHTML = '';\n *                 });\n *         },\n *     },\n * });\n * ```\n */\nexport interface BlueSnapDirectAPMInitializeOptions {\n    /**\n     * A set of CSS properties to apply to the iframe.\n     */\n    style?: BlueSnapDirectStyleProps;\n\n    /**\n     * A callback that gets called when the iframe is ready to be added to the\n     * current page. It is responsible for determining where the iframe should\n     * be inserted in the DOM.\n     *\n     * @param iframe - The iframe element containing the payment web page\n     * provided by the strategy.\n     * @param cancel - A function, when called, will cancel the payment\n     * process and remove the iframe.\n     */\n    onLoad(iframe: HTMLIFrameElement, cancel: () => void): void;\n}\n\nexport interface WithBlueSnapDirectAPMPaymentInitializeOptions {\n    /**\n     * The options that are required to initialize the Apple Pay payment\n     * method. They can be omitted unless you need to support Apple Pay.\n     */\n    bluesnapdirect?: BlueSnapDirectAPMInitializeOptions;\n}\n","import { WithCreditCardPaymentInitializeOptions } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    guard,\n    InvalidArgumentError,\n    isHostedInstrumentLike,\n    isVaultedInstrument,\n    MissingDataError,\n    MissingDataErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInitializeOptions,\n    PaymentIntegrationService,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { BlueSnapDirectSdk, BlueSnapDirectThreeDSecureData } from '../types';\nimport isHostedCardFieldOptionsMap from '../utils/is-hosted-card-field-options-map';\nimport isHostedStoredCardFieldOptionsMap from '../utils/is-hosted-stored-card-field-options-map';\n\nimport BlueSnapDirect3ds from './bluesnap-direct-3ds';\nimport BlueSnapDirectHostedForm from './bluesnap-direct-hosted-form';\nimport BlueSnapDirectScriptLoader from './bluesnap-direct-script-loader';\n\nexport default class BlueSnapDirectCreditCardPaymentStrategy implements PaymentStrategy {\n    private _paymentFieldsToken?: string;\n    private _shouldUseHostedFields?: boolean;\n    private _blueSnapSdk?: BlueSnapDirectSdk;\n\n    constructor(\n        private _scriptLoader: BlueSnapDirectScriptLoader,\n        private _paymentIntegrationService: PaymentIntegrationService,\n        private _blueSnapDirectHostedForm: BlueSnapDirectHostedForm,\n        private _blueSnapDirect3ds: BlueSnapDirect3ds,\n    ) {}\n\n    async initialize(\n        options: PaymentInitializeOptions & WithCreditCardPaymentInitializeOptions,\n    ): Promise<void> {\n        const { methodId, gatewayId, creditCard } = options;\n\n        if (!gatewayId || !creditCard) {\n            throw new InvalidArgumentError();\n        }\n\n        const state = await this._paymentIntegrationService.loadPaymentMethod(gatewayId, {\n            params: { method: methodId, bigpayToken: creditCard.bigpayToken },\n        });\n\n        const {\n            config: { testMode, is3dsEnabled },\n            clientToken,\n        } = state.getPaymentMethodOrThrow(methodId, gatewayId);\n\n        this._blueSnapSdk = await this._scriptLoader.load(testMode);\n\n        this._paymentFieldsToken = clientToken;\n        this._shouldUseHostedFields =\n            isHostedCardFieldOptionsMap(creditCard.form.fields) ||\n            (isHostedStoredCardFieldOptionsMap(creditCard.form.fields) &&\n                !!creditCard.form.fields.cardNumberVerification);\n\n        if (this._shouldUseHostedFields) {\n            this._blueSnapDirectHostedForm.initialize(this._blueSnapSdk, creditCard.form.fields);\n            await this._blueSnapDirectHostedForm.attach(\n                this._getPaymentFieldsToken(),\n                creditCard,\n                is3dsEnabled,\n            );\n        }\n    }\n\n    async execute(payload: OrderRequestBody): Promise<void> {\n        if (!payload.payment) {\n            throw new PaymentArgumentInvalidError(['payment']);\n        }\n\n        if (!this._blueSnapSdk) {\n            throw new PaymentArgumentInvalidError(['payment']);\n        }\n\n        const { paymentData } = payload.payment;\n\n        const { shouldSaveInstrument, shouldSetAsDefaultInstrument } = isHostedInstrumentLike(\n            paymentData,\n        )\n            ? paymentData\n            : { shouldSaveInstrument: false, shouldSetAsDefaultInstrument: false };\n\n        const pfToken = this._getPaymentFieldsToken();\n        let threeDSecureReferenceId;\n\n        const { is3dsEnabled } = this._paymentIntegrationService\n            .getState()\n            .getPaymentMethodOrThrow(payload.payment.methodId, payload.payment.gatewayId).config;\n\n        const bluesnapSubmitedForm = this._shouldUseHostedFields\n            ? await this._blueSnapDirectHostedForm\n                  .validate()\n                  .submit(\n                      is3dsEnabled ? this._getBlueSnapDirectThreeDSecureData() : undefined,\n                      !(isHostedInstrumentLike(paymentData) && isVaultedInstrument(paymentData)),\n                  )\n            : undefined;\n\n        await this._paymentIntegrationService.submitOrder();\n\n        if (\n            isHostedInstrumentLike(paymentData) &&\n            isVaultedInstrument(paymentData) &&\n            this._paymentFieldsToken &&\n            paymentData.instrumentId\n        ) {\n            if (is3dsEnabled) {\n                this._blueSnapDirect3ds.initialize(this._blueSnapSdk);\n\n                const { last4, brand } = this._paymentIntegrationService\n                    .getState()\n                    .getCardInstrumentOrThrow(paymentData.instrumentId);\n\n                const previouslyUsedCard = {\n                    last4Digits: last4,\n                    ccType: brand.toUpperCase(),\n                    ...this._getBlueSnapDirectThreeDSecureData(),\n                };\n\n                threeDSecureReferenceId = await this._blueSnapDirect3ds.initialize3ds(\n                    this._paymentFieldsToken,\n                    previouslyUsedCard,\n                );\n            }\n\n            await this._paymentIntegrationService.submitPayment({\n                ...payload.payment,\n                paymentData: {\n                    instrumentId: paymentData.instrumentId,\n                    ...(this._shouldUseHostedFields ? { nonce: pfToken } : {}),\n                    ...(threeDSecureReferenceId\n                        ? { deviceSessionId: threeDSecureReferenceId }\n                        : {}),\n                    shouldSetAsDefaultInstrument: !!shouldSetAsDefaultInstrument,\n                },\n            });\n\n            return;\n        }\n\n        await this._paymentIntegrationService.submitPayment({\n            ...payload.payment,\n            paymentData: {\n                formattedPayload: {\n                    credit_card_token: {\n                        token: JSON.stringify({\n                            pfToken,\n                            cardHolderName:\n                                bluesnapSubmitedForm && bluesnapSubmitedForm.cardHolderName,\n                        }),\n                    },\n                    vault_payment_instrument: shouldSaveInstrument,\n                    set_as_default_stored_instrument: shouldSetAsDefaultInstrument,\n                },\n            },\n        });\n    }\n\n    finalize(): Promise<void> {\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    deinitialize(): Promise<void> {\n        if (this._shouldUseHostedFields) {\n            this._blueSnapDirectHostedForm.detach();\n        }\n\n        return Promise.resolve();\n    }\n\n    private _getBlueSnapDirectThreeDSecureData(): BlueSnapDirectThreeDSecureData {\n        const {\n            getBillingAddress,\n            getShippingAddress,\n            getCustomer,\n            getCheckoutOrThrow,\n            getCartOrThrow,\n        } = this._paymentIntegrationService.getState();\n        const billingAddress = getBillingAddress();\n        const shippingAddress = getShippingAddress();\n        const email = getCustomer()?.email || billingAddress?.email;\n        const phone = billingAddress?.phone || shippingAddress?.phone;\n\n        return {\n            amount: getCheckoutOrThrow().outstandingBalance,\n            currency: getCartOrThrow().currency.code,\n            ...(email && { email }),\n            ...(phone && { phone }),\n            ...(billingAddress && {\n                billingFirstName: billingAddress.firstName,\n                billingLastName: billingAddress.lastName,\n                billingCountry: billingAddress.countryCode,\n                billingCity: billingAddress.city,\n                billingAddress: `${billingAddress.address1} ${billingAddress.address2}`.trim(),\n                billingZip: billingAddress.postalCode,\n            }),\n            ...(shippingAddress && {\n                shippingFirstName: shippingAddress.firstName,\n                shippingLastName: shippingAddress.lastName,\n                shippingCountry: shippingAddress.countryCode,\n                shippingCity: shippingAddress.city,\n                shippingAddress: `${shippingAddress.address1} ${shippingAddress.address2}`.trim(),\n                shippingZip: shippingAddress.postalCode,\n            }),\n        };\n    }\n\n    private _getPaymentFieldsToken(): string {\n        return guard(\n            this._paymentFieldsToken,\n            () => new MissingDataError(MissingDataErrorType.MissingPaymentToken),\n        );\n    }\n}\n","import StandardError from './standard-error';\n\nexport interface PaymentInvalidFormErrorDetails {\n    [key: string]: Array<{ message: string; type: string }>;\n}\n\nexport default class PaymentInvalidFormError extends StandardError {\n    constructor(public details: PaymentInvalidFormErrorDetails, message?: string) {\n        super(message || 'Unable to proceed because the payment form contains invalid data.');\n\n        this.name = 'PaymentInvalidFormError';\n        this.type = 'payment_invalid_form';\n    }\n}\n","import { HostedFieldType } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { BlueSnapDirectHostedFieldTagId as HostedFieldTagId } from './types';\n\nexport const BlueSnapHostedFieldType: {\n    [HostedFieldTagId.CardNumber]: HostedFieldType.CardNumber;\n    [HostedFieldTagId.CardExpiry]: HostedFieldType.CardExpiry;\n    [HostedFieldTagId.CardName]: HostedFieldType.CardName;\n    [HostedFieldTagId.CardCode]: HostedFieldType.CardCode;\n} = {\n    [HostedFieldTagId.CardNumber]: HostedFieldType.CardNumber,\n    [HostedFieldTagId.CardExpiry]: HostedFieldType.CardExpiry,\n    [HostedFieldTagId.CardName]: HostedFieldType.CardName,\n    [HostedFieldTagId.CardCode]: HostedFieldType.CardCode,\n};\n\nexport const CREDIT_CARD_ERRORS = {\n    empty: {\n        [HostedFieldType.CardNumber]: {\n            fieldType: 'cardNumber',\n            message: 'Credit card number is required',\n            type: 'required',\n        },\n        [HostedFieldType.CardNumberVerification]: {\n            fieldType: 'cardNumber',\n            message: 'Credit card number is required',\n            type: 'required',\n        },\n        [HostedFieldType.CardExpiry]: {\n            fieldType: 'cardExpiry',\n            message: 'Expiration date is required',\n            type: 'required',\n        },\n        [HostedFieldType.CardCode]: {\n            fieldType: 'cardCode',\n            message: 'CVV is required',\n            type: 'required',\n        },\n        [HostedFieldType.CardName]: {\n            fieldType: 'cardName',\n            message: 'Full name is required',\n            type: 'required',\n        },\n    },\n    invalid: {\n        [HostedFieldType.CardNumber]: {\n            fieldType: 'cardNumber',\n            message: 'Credit card number must be valid',\n            type: 'invalid_card_number',\n        },\n        [HostedFieldType.CardNumberVerification]: {\n            fieldType: 'cardNumber',\n            message: 'Credit card number must be valid',\n            type: 'invalid_card_number',\n        },\n        [HostedFieldType.CardExpiry]: {\n            fieldType: 'cardExpiry',\n            message: 'Expiration date must be a valid future date in MM / YY format',\n            type: 'invalid_card_expiry',\n        },\n        [HostedFieldType.CardCode]: {\n            fieldType: 'cardCode',\n            message: 'CVV must be valid',\n            type: 'invalid_card_code',\n        },\n        [HostedFieldType.CardName]: {\n            fieldType: 'cardName',\n            message: 'Full name is required',\n            type: 'required',\n        },\n    },\n};\n","import { kebabCase } from 'lodash';\n\nimport { CreditCardPaymentInitializeOptions } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    guard,\n    HostedCardFieldOptionsMap,\n    HostedFieldBlurEventData,\n    HostedFieldEnterEventData,\n    HostedFieldFocusEventData,\n    HostedFieldOptionsMap,\n    HostedFieldStylesMap,\n    HostedFormOptions,\n    HostedInputValidateErrorData,\n    HostedStoredCardFieldOptionsMap,\n    InvalidArgumentError,\n    NotInitializedError,\n    NotInitializedErrorType,\n    PaymentInvalidFormError,\n    PaymentInvalidFormErrorDetails,\n    PaymentMethodFailedError,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { BlueSnapHostedFieldType } from '../bluesnap-direct-constants';\nimport {\n    BlueSnapDirectSdk,\n    BlueSnapDirectStyle,\n    BlueSnapDirectCallbackCardData as CallbackCardData,\n    BlueSnapDirectCallbackError as CallbackError,\n    BlueSnapDirectCallbackResults as CallbackResults,\n    WithBlueSnapDirectCardHolderName as CardHolderName,\n    BlueSnapDirectCardType as CardType,\n    BlueSnapDirectCardTypeValues as CardTypeValues,\n    BlueSnapDirectErrorCode as ErrorCode,\n    BlueSnapDirectErrorDescription as ErrorDescription,\n    BlueSnapDirectEventOrigin as EventOrigin,\n    BlueSnapDirectHostedFieldTagId as HostedFieldTagId,\n    BlueSnapDirectHostedPaymentFieldsOptions as HostedPaymentFieldsOptions,\n    BlueSnapDirectThreeDSecureData as ThreeDSecureData,\n} from '../types';\nimport isValidationErrorDescription from '../utils/is-bluesnap-direct-input-validation-error-description';\nimport isHostedCardFieldOptionsMap from '../utils/is-hosted-card-field-options-map';\nimport isHostedStoredCardFieldOptionsMap from '../utils/is-hosted-stored-card-field-options-map';\n\nimport BlueSnapHostedInputValidator from './bluesnap-direct-hosted-input-validator';\nimport BluesnapDirectNameOnCardInput from './bluesnap-direct-name-on-card-input';\n\nexport default class BlueSnapDirectHostedForm {\n    private _blueSnapSdk?: BlueSnapDirectSdk;\n    private _onValidate: HostedFormOptions['onValidate'];\n\n    constructor(\n        private _nameOnCardInput: BluesnapDirectNameOnCardInput,\n        private _hostedInputValidator: BlueSnapHostedInputValidator,\n    ) {}\n\n    initialize(blueSnapSdk: BlueSnapDirectSdk, fields?: HostedFieldOptionsMap) {\n        this._blueSnapSdk = blueSnapSdk;\n\n        if (!fields) {\n            return;\n        }\n\n        if (isHostedCardFieldOptionsMap(fields)) {\n            this._hostedInputValidator.initialize();\n\n            return;\n        }\n\n        if (isHostedStoredCardFieldOptionsMap(fields) && !!fields.cardNumberVerification) {\n            this._hostedInputValidator.initializeValidationFields();\n        }\n    }\n\n    async attach(\n        paymentFieldsToken: string,\n        { form: { fields, ...callbacksAndStyles } }: CreditCardPaymentInitializeOptions,\n        enable3DS = false,\n    ): Promise<void> {\n        const blueSnapSdk = this._getBlueSnapSdk();\n\n        if (!isHostedCardFieldOptionsMap(fields) && !isHostedStoredCardFieldOptionsMap(fields)) {\n            throw new InvalidArgumentError(\n                'Field options must be of type HostedCardFieldOptionsMap',\n            );\n        }\n\n        this._onValidate = callbacksAndStyles.onValidate;\n\n        if (isHostedCardFieldOptionsMap(fields)) {\n            this._setCustomBlueSnapAttributes(fields);\n        }\n\n        if (isHostedStoredCardFieldOptionsMap(fields)) {\n            this._setCustomStoredCardsBlueSnapAttributes(fields);\n        }\n\n        return new Promise<void>((resolve) => {\n            const options = this._getHostedPaymentFieldsOptions(\n                paymentFieldsToken,\n                fields,\n                callbacksAndStyles,\n                resolve,\n                enable3DS,\n            );\n\n            blueSnapSdk.hostedPaymentFieldsCreate(options);\n\n            if (isHostedCardFieldOptionsMap(fields)) {\n                this._nameOnCardInput.attach(\n                    options,\n                    fields.cardName.accessibilityLabel,\n                    fields.cardName.placeholder,\n                );\n            }\n        });\n    }\n\n    validate(): this {\n        const results = this._hostedInputValidator.validate();\n\n        this._onValidate?.(results);\n\n        if (!results.isValid) {\n            const details = Object.entries(results.errors).reduce<PaymentInvalidFormErrorDetails>(\n                (result, [key, value]: [string, HostedInputValidateErrorData[]]) => ({\n                    ...result,\n                    [key]: value.map(({ message, type }) => ({ message, type })),\n                }),\n                {},\n            );\n\n            throw new PaymentInvalidFormError(details);\n        }\n\n        return this;\n    }\n\n    submit(\n        threeDSecureData?: ThreeDSecureData,\n        shouldSendName = false,\n    ): Promise<CallbackCardData & CardHolderName> {\n        return new Promise((resolve, reject) =>\n            this._getBlueSnapSdk().hostedPaymentFieldsSubmitData(\n                (data: CallbackResults) =>\n                    this._isBlueSnapDirectCallbackError(data)\n                        ? reject(\n                              new PaymentMethodFailedError(\n                                  data.statusCode === ErrorCode.THREE_DS_AUTH_FAILED\n                                      ? data.error[0].errorDescription\n                                      : `Submission failed with status: ${\n                                            data.statusCode\n                                        } and errors: ${JSON.stringify(data.error)}`,\n                              ),\n                          )\n                        : resolve({\n                              ...data.cardData,\n                              ...(shouldSendName\n                                  ? { cardHolderName: this._nameOnCardInput.getValue() }\n                                  : {}),\n                          }),\n                threeDSecureData,\n            ),\n        );\n    }\n\n    detach(): void {\n        this._nameOnCardInput.detach();\n    }\n\n    private _isBlueSnapDirectCallbackError(data: CallbackResults): data is CallbackError {\n        return 'error' in data;\n    }\n\n    private _getHostedPaymentFieldsOptions(\n        token: string,\n        fields: HostedCardFieldOptionsMap | HostedStoredCardFieldOptionsMap,\n        {\n            onFocus,\n            onBlur,\n            onValidate,\n            onCardTypeChange,\n            onEnter,\n            styles,\n        }: Omit<HostedFormOptions, 'fields'>,\n        resolve: () => void,\n        enable3DS: boolean,\n    ): HostedPaymentFieldsOptions {\n        return {\n            token,\n            onFieldEventHandler: {\n                setupComplete: () => resolve(),\n                onFocus: this._usetUiEventCallback(onFocus),\n                onBlur: this._usetUiEventCallback(onBlur),\n                onError: this._handleError(onValidate),\n                onType: (_tagId: HostedFieldTagId, cardType: CardTypeValues) =>\n                    onCardTypeChange?.({ cardType: CardType[cardType] }),\n                onEnter: this._usetUiEventCallback(onEnter),\n                onValid: (tagId: HostedFieldTagId) =>\n                    onValidate?.(this._hostedInputValidator.validate({ tagId })),\n            },\n            ...(isHostedCardFieldOptionsMap(fields) && {\n                ccnPlaceHolder: fields.cardNumber.placeholder || '',\n                cvvPlaceHolder: fields.cardCode?.placeholder || '',\n                expPlaceHolder: fields.cardExpiry.placeholder || 'MM / YY',\n            }),\n            ...(styles && { style: this._mapStyles(styles) }),\n            '3DS': enable3DS,\n        };\n    }\n\n    private _mapStyles({\n        default: input,\n        error,\n        focus,\n    }: HostedFieldStylesMap): BlueSnapDirectStyle {\n        return Object.entries({\n            ...(input && { input }),\n            ...(error && { '.invalid': error }),\n            ...(focus && { ':focus': focus }),\n        }).reduce((result, [selector, declaration]) => {\n            return {\n                ...result,\n                [selector]: Object.entries(declaration).reduce(\n                    (declarationBlock, [property, value]) => ({\n                        ...declarationBlock,\n                        [kebabCase(property)]: value,\n                    }),\n                    {},\n                ),\n            };\n        }, {});\n    }\n\n    private _handleError(\n        onValidate: HostedFormOptions['onValidate'],\n    ): (\n        tagId: HostedFieldTagId | undefined,\n        errorCode: ErrorCode,\n        errorDescription: ErrorDescription | undefined,\n        eventOrigin: EventOrigin | undefined,\n    ) => void {\n        return (tagId, errorCode, errorDescription, eventOrigin) => {\n            if (errorCode === ErrorCode.INVALID_OR_EMPTY) {\n                if (tagId && isValidationErrorDescription(errorDescription)) {\n                    return onValidate?.(\n                        this._hostedInputValidator.validate({ tagId, errorDescription }),\n                    );\n                }\n            }\n\n            throw new PaymentMethodFailedError(\n                `An unexpected error has occurred: ${JSON.stringify({\n                    tagId,\n                    errorCode,\n                    errorDescription,\n                    eventOrigin,\n                })}`,\n            );\n        };\n    }\n\n    private _usetUiEventCallback(\n        callback?: (\n            data: HostedFieldBlurEventData | HostedFieldEnterEventData | HostedFieldFocusEventData,\n        ) => void,\n    ): (tagId: HostedFieldTagId) => void {\n        return (tagId) => {\n            if (callback) {\n                callback({ fieldType: BlueSnapHostedFieldType[tagId] });\n            }\n        };\n    }\n\n    private _getBlueSnapSdk(): BlueSnapDirectSdk {\n        return guard(\n            this._blueSnapSdk,\n            () => new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized),\n        );\n    }\n\n    private _setCustomBlueSnapAttributes(fields: HostedCardFieldOptionsMap): void {\n        const { cardNumber, cardExpiry, cardCode, cardName } = fields;\n\n        const cardNumberContainer = document.getElementById(cardNumber.containerId);\n        const cardExpiryContainer = document.getElementById(cardExpiry.containerId);\n        const cardCodeContainer = cardCode && document.getElementById(cardCode.containerId);\n        const cardNameContainer = document.getElementById(cardName.containerId);\n\n        if (\n            !cardNumberContainer ||\n            !cardExpiryContainer ||\n            !cardCodeContainer ||\n            !cardNameContainer\n        ) {\n            throw new InvalidArgumentError(\n                'Unable to create hosted payment fields to invalid HTML container elements.',\n            );\n        }\n\n        cardNumberContainer.dataset.bluesnap = HostedFieldTagId.CardNumber;\n        cardExpiryContainer.dataset.bluesnap = HostedFieldTagId.CardExpiry;\n        cardCodeContainer.dataset.bluesnap = HostedFieldTagId.CardCode;\n        cardNameContainer.dataset.bluesnap = HostedFieldTagId.CardName;\n    }\n\n    private _setCustomStoredCardsBlueSnapAttributes(fields: HostedStoredCardFieldOptionsMap): void {\n        const { cardNumberVerification, cardCodeVerification } = fields;\n\n        const cardNumberContainer =\n            cardNumberVerification && document.getElementById(cardNumberVerification.containerId);\n        const cardCodeContainer =\n            cardCodeVerification && document.getElementById(cardCodeVerification.containerId);\n\n        if (!cardNumberContainer && !cardCodeContainer) {\n            return;\n        }\n\n        if (cardNumberContainer) {\n            cardNumberContainer.dataset.bluesnap = HostedFieldTagId.CardNumber;\n        }\n\n        if (cardCodeContainer) {\n            cardCodeContainer.dataset.bluesnap = HostedFieldTagId.CardCode;\n        }\n    }\n}\n","import {\n    BlueSnapDirectErrorDescription,\n    BlueSnapDirectInputValidationErrorDescription,\n} from '../types';\n\nexport default function isBlueSnapDirectInputValidationErrorDescription(\n    errorDescription?: BlueSnapDirectErrorDescription,\n): errorDescription is BlueSnapDirectInputValidationErrorDescription {\n    if (errorDescription === undefined) {\n        return false;\n    }\n\n    return [BlueSnapDirectErrorDescription.EMPTY, BlueSnapDirectErrorDescription.INVALID].includes(\n        errorDescription,\n    );\n}\n","import {\n    HostedFieldType,\n    HostedInputValidateErrorData,\n    HostedInputValidateErrorDataMap,\n    HostedInputValidateResults,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { BlueSnapHostedFieldType, CREDIT_CARD_ERRORS } from '../bluesnap-direct-constants';\nimport {\n    BlueSnapDirectInputValidationErrorDescription as ErrorDescription,\n    BlueSnapDirectHostedFieldTagId as HostedFieldTagId,\n} from '../types';\n\nexport default class BlueSnapHostedInputValidator {\n    private _errors: HostedInputValidateErrorDataMap = {};\n\n    initialize(): void {\n        this._errors = {\n            cardNumber: [CREDIT_CARD_ERRORS.empty.cardNumber],\n            cardExpiry: [CREDIT_CARD_ERRORS.empty.cardExpiry],\n            cardCode: [CREDIT_CARD_ERRORS.empty.cardCode],\n            cardName: [CREDIT_CARD_ERRORS.empty.cardName],\n        };\n    }\n\n    initializeValidationFields(): void {\n        this._errors = {\n            cardNumberVerification: [CREDIT_CARD_ERRORS.empty.cardNumber],\n        };\n    }\n\n    validate(error?: {\n        tagId: HostedFieldTagId;\n        errorDescription?: ErrorDescription;\n    }): HostedInputValidateResults {\n        if (error) {\n            this._updateErrors(error.tagId, error.errorDescription);\n        }\n\n        return {\n            isValid: Object.values(this._errors).every(\n                (errorData: HostedInputValidateErrorData[]) => errorData.length === 0,\n            ),\n            errors: this._errors,\n        };\n    }\n\n    private _updateErrors(tagId: HostedFieldTagId, errorDescription?: ErrorDescription): void {\n        const fieldType = this._errors.cardNumberVerification\n            ? HostedFieldType.CardNumberVerification\n            : BlueSnapHostedFieldType[tagId];\n\n        this._errors[fieldType] = errorDescription\n            ? [CREDIT_CARD_ERRORS[errorDescription][fieldType]]\n            : [];\n    }\n}\n","import {\n    guard,\n    NotInitializedError,\n    NotInitializedErrorType,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport {\n    BluesnapDirectNocInputAllowedStyle as AllowedStyle,\n    BlueSnapDirectStyle,\n    BlueSnapDirectErrorCode as ErrorCode,\n    BlueSnapDirectErrorDescription as ErrorDescription,\n    BlueSnapDirectEventOrigin as EventOrigin,\n    BlueSnapDirectHostedFieldTagId as HostedFieldTagId,\n    BlueSnapDirectHostedPaymentFieldsOptions as HostedPaymentFieldsOptions,\n    BlueSnapDirectStyleDeclaration as StyleDeclaration,\n} from '../types';\nimport isArrayOfAllowedProps from '../utils/is-array-of-allowed-props';\n\nexport default class BluesnapDirectNameOnCardInput {\n    private _input?: HTMLInputElement;\n    private _style?: BlueSnapDirectStyle;\n\n    attach(\n        {\n            style,\n            onFieldEventHandler: { onFocus, onBlur, onValid, onError, onEnter } = {},\n        }: HostedPaymentFieldsOptions,\n        accessibilityLabel?: string,\n        placeholder?: string,\n    ): void {\n        this._style = style;\n\n        this._create();\n\n        this._getInput().addEventListener('focus', this._handleFocus(onFocus));\n        this._getInput().addEventListener('blur', this._handleBlur(onBlur, onValid, onError));\n        this._getInput().addEventListener('enter', this._handleEnter(onEnter));\n\n        if (accessibilityLabel) {\n            this._getInput().setAttribute('aria-label', accessibilityLabel);\n        }\n\n        if (placeholder) {\n            this._getInput().placeholder = placeholder;\n        }\n\n        document.querySelector('[data-bluesnap=\"noc\"]')?.appendChild(this._getInput());\n    }\n\n    getValue(): string {\n        return this._getInput().value;\n    }\n\n    detach(): void {\n        if (this._input) {\n            this._input.remove();\n            this._input = undefined;\n        }\n    }\n\n    private _handleFocus(\n        onFocus: Required<HostedPaymentFieldsOptions>['onFieldEventHandler']['onFocus'],\n    ): (event: Event) => void {\n        return () => {\n            this._applyStyles(this._style?.[':focus']);\n\n            onFocus?.(HostedFieldTagId.CardName);\n        };\n    }\n\n    private _handleBlur(\n        onBlur: Required<HostedPaymentFieldsOptions>['onFieldEventHandler']['onBlur'],\n        onValid: Required<HostedPaymentFieldsOptions>['onFieldEventHandler']['onValid'],\n        onError: Required<HostedPaymentFieldsOptions>['onFieldEventHandler']['onError'],\n    ): (event: Event) => void {\n        return ({ target }) => {\n            onBlur?.(HostedFieldTagId.CardName);\n\n            if (target instanceof HTMLInputElement) {\n                if (/\\w{1,200}/.test(target.value)) {\n                    this._applyStyles(this._style?.input);\n\n                    onValid?.(HostedFieldTagId.CardName);\n                } else {\n                    this._applyStyles(this._style?.['.invalid']);\n\n                    onError?.(\n                        HostedFieldTagId.CardName,\n                        ErrorCode.INVALID_OR_EMPTY,\n                        ErrorDescription.EMPTY,\n                        EventOrigin.ON_BLUR,\n                    );\n                }\n            }\n        };\n    }\n\n    private _handleEnter(\n        onEnter: Required<HostedPaymentFieldsOptions>['onFieldEventHandler']['onEnter'],\n    ): (event: Event) => void {\n        return () => onEnter?.(HostedFieldTagId.CardName);\n    }\n\n    private _applyStyles(styles: StyleDeclaration = {}): void {\n        const allowedStyle: AllowedStyle = {\n            color: styles.color,\n            fontFamily: styles['font-family'],\n            fontSize: styles['font-size'],\n            fontWeight: styles['font-weight'],\n        };\n        const styleKeys = Object.keys(allowedStyle);\n\n        if (isArrayOfAllowedProps(styleKeys)) {\n            styleKeys.forEach((key) => {\n                if (!allowedStyle[key]) {\n                    return;\n                }\n\n                this._getInput().style[key] = allowedStyle[key] || '';\n            });\n        }\n    }\n\n    private _configureInput(): void {\n        this._getInput().autocomplete = 'cc-name';\n        this._getInput().id = HostedFieldTagId.CardName;\n        this._getInput().inputMode = 'text';\n        this._getInput().maxLength = 200;\n        this._getInput().style.backgroundColor = 'transparent';\n        this._getInput().style.border = '0';\n        this._getInput().style.height = '100%';\n        this._getInput().style.margin = '0';\n        this._getInput().style.outline = 'none';\n        this._getInput().style.padding = '0';\n        this._getInput().style.width = '100%';\n        this._getInput().type = 'text';\n    }\n\n    private _getInput(): HTMLInputElement {\n        return guard(\n            this._input,\n            () => new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized),\n        );\n    }\n\n    private _create(): void {\n        this._input = document.createElement('input');\n        this._configureInput();\n        this._applyStyles(this._style?.input);\n    }\n}\n","import { BluesnapDirectNocInputAllowedStyle } from '../types';\n\nexport default function isArrayOfAllowedProps(\n    fields: string[],\n): fields is Array<keyof BluesnapDirectNocInputAllowedStyle> {\n    return fields.every((field) =>\n        ['color', 'fontFamily', 'fontSize', 'fontWeight'].includes(field),\n    );\n}\n","import { ScriptLoader } from '@bigcommerce/script-loader';\n\nimport { PaymentMethodClientUnavailableError } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { BlueSnapDirectHostWindow, BlueSnapDirectSdk } from '../types';\n\nexport enum BlueSnapDirectSdkEnv {\n    PRODUCTION = 'https://pay.bluesnap.com/web-sdk/5/bluesnap.js',\n    SANDBOX = 'https://sandpay.bluesnap.com/web-sdk/5/bluesnap.js',\n}\n\nexport default class BlueSnapDirectScriptLoader {\n    constructor(\n        private _scriptLoader: ScriptLoader,\n        private _window: BlueSnapDirectHostWindow = window,\n    ) {}\n\n    async load(testMode = false): Promise<BlueSnapDirectSdk> {\n        if (this._window.bluesnap) {\n            return this._window.bluesnap;\n        }\n\n        await this._scriptLoader.loadScript(\n            testMode ? BlueSnapDirectSdkEnv.SANDBOX : BlueSnapDirectSdkEnv.PRODUCTION,\n        );\n\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        if (!this._window.bluesnap) {\n            throw new PaymentMethodClientUnavailableError();\n        }\n\n        return this._window.bluesnap;\n    }\n}\n","import { getScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport BlueSnapDirect3ds from './bluesnap-direct-3ds';\nimport BlueSnapDirectCreditCardPaymentStrategy from './bluesnap-direct-credit-card-payment-strategy';\nimport BlueSnapDirectHostedForm from './bluesnap-direct-hosted-form';\nimport BlueSnapHostedInputValidator from './bluesnap-direct-hosted-input-validator';\nimport BluesnapDirectNameOnCardInput from './bluesnap-direct-name-on-card-input';\nimport BlueSnapDirectScriptLoader from './bluesnap-direct-script-loader';\n\nconst createBlueSnapDirectCreditCardPaymentStrategy: PaymentStrategyFactory<\n    BlueSnapDirectCreditCardPaymentStrategy\n> = (paymentIntegrationService) =>\n    new BlueSnapDirectCreditCardPaymentStrategy(\n        new BlueSnapDirectScriptLoader(getScriptLoader()),\n        paymentIntegrationService,\n        new BlueSnapDirectHostedForm(\n            new BluesnapDirectNameOnCardInput(),\n            new BlueSnapHostedInputValidator(),\n        ),\n        new BlueSnapDirect3ds(),\n    );\n\nexport default toResolvableModule(createBlueSnapDirectCreditCardPaymentStrategy, [\n    { id: 'credit_card', gateway: 'bluesnapdirect' },\n]);\n","import {\n    isHostedInstrumentLike,\n    isVaultedInstrument,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentIntegrationService,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { BlueSnapDirectRedirectResponse } from '../types';\nimport {\n    isEcpInstrument,\n    isIdealInstrument,\n    isPayByBankInstrument,\n    isSepaInstrument,\n} from '../utils/is-bluesnap-direct-instrument';\nimport isBlueSnapDirectRedirectResponseProviderData from '../utils/is-bluesnap-direct-provider-data';\n\nexport default class BlueSnapDirectAPMPaymentStrategy implements PaymentStrategy {\n    constructor(private _paymentIntegrationService: PaymentIntegrationService) {}\n\n    async execute(payload: OrderRequestBody): Promise<void> {\n        const paymentPayload = this._formatePaymentPayload(payload);\n\n        await this._paymentIntegrationService.submitOrder();\n\n        try {\n            await this._paymentIntegrationService.submitPayment(paymentPayload);\n        } catch (error) {\n            if (this._isBlueSnapDirectRedirectResponse(error)) {\n                const providerData: unknown =\n                    error.body.provider_data && JSON.parse(error.body.provider_data);\n\n                let frameUrl = error.body.additional_action_required.data.redirect_url;\n\n                if (isBlueSnapDirectRedirectResponseProviderData(providerData)) {\n                    const providerDataQuery = new URLSearchParams(providerData).toString();\n\n                    frameUrl = `${frameUrl}&${providerDataQuery}`;\n                }\n\n                return new Promise(() => window.location.replace(frameUrl));\n            }\n\n            return Promise.reject(error);\n        }\n    }\n\n    initialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    finalize(): Promise<void> {\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    deinitialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    private _formatePaymentPayload({ payment }: OrderRequestBody) {\n        if (!payment) {\n            throw new PaymentArgumentInvalidError(['payment']);\n        }\n\n        if (\n            payment.paymentData &&\n            isVaultedInstrument(payment.paymentData) &&\n            isHostedInstrumentLike(payment.paymentData)\n        ) {\n            return {\n                ...payment,\n                paymentData: {\n                    instrumentId: payment.paymentData.instrumentId,\n                    shouldSetAsDefaultInstrument:\n                        !!payment.paymentData.shouldSetAsDefaultInstrument,\n                },\n            };\n        }\n\n        if (isEcpInstrument(payment.paymentData)) {\n            return {\n                ...payment,\n                paymentData: {\n                    formattedPayload: {\n                        ecp: {\n                            account_number: payment.paymentData.accountNumber,\n                            account_type: payment.paymentData.accountType,\n                            shopper_permission: payment.paymentData.shopperPermission,\n                            routing_number: payment.paymentData.routingNumber,\n                            ...(payment.paymentData.companyName\n                                ? { company_name: payment.paymentData.companyName }\n                                : {}),\n                        },\n                        vault_payment_instrument: payment.paymentData.shouldSaveInstrument,\n                        set_as_default_stored_instrument:\n                            payment.paymentData.shouldSetAsDefaultInstrument,\n                    },\n                },\n            };\n        }\n\n        if (isSepaInstrument(payment.paymentData)) {\n            return {\n                ...payment,\n                paymentData: {\n                    formattedPayload: {\n                        sepa_direct_debit: {\n                            iban: payment.paymentData.iban,\n                            first_name: payment.paymentData.firstName,\n                            last_name: payment.paymentData.lastName,\n                            shopper_permission: payment.paymentData.shopperPermission,\n                        },\n                        vault_payment_instrument: payment.paymentData.shouldSaveInstrument,\n                        set_as_default_stored_instrument:\n                            payment.paymentData.shouldSetAsDefaultInstrument,\n                    },\n                },\n            };\n        }\n\n        if (isIdealInstrument(payment.paymentData)) {\n            return {\n                ...payment,\n                paymentData: {\n                    formattedPayload: {\n                        ideal: {\n                            bic: payment.paymentData.bic,\n                        },\n                    },\n                },\n            };\n        }\n\n        if (isPayByBankInstrument(payment.paymentData)) {\n            return {\n                ...payment,\n                paymentData: {\n                    formattedPayload: {\n                        pay_by_bank: {\n                            iban: payment.paymentData.iban,\n                        },\n                    },\n                },\n            };\n        }\n\n        return {\n            methodId: payment.methodId,\n        };\n    }\n\n    private _isBlueSnapDirectRedirectResponse(\n        response: unknown,\n    ): response is BlueSnapDirectRedirectResponse {\n        if (typeof response !== 'object' || response === null) {\n            return false;\n        }\n\n        const partialResponse: Partial<BlueSnapDirectRedirectResponse> = response;\n\n        if (!partialResponse.body) {\n            return false;\n        }\n\n        const partialBody: Partial<BlueSnapDirectRedirectResponse['body']> = partialResponse.body;\n\n        return (\n            partialBody.status === 'additional_action_required' &&\n            !!partialBody.additional_action_required?.data.redirect_url\n        );\n    }\n}\n","import { BlueSnapDirectRedirectResponseProviderData } from '../types';\n\nexport default function isBlueSnapDirectRedirectResponseProviderData(\n    value: unknown,\n): value is BlueSnapDirectRedirectResponseProviderData {\n    if (typeof value !== 'object' || value === null) {\n        return false;\n    }\n\n    const partialValue: Partial<BlueSnapDirectRedirectResponseProviderData> = value;\n\n    if (!partialValue.merchantid) {\n        return false;\n    }\n\n    return typeof partialValue.merchantid === 'string';\n}\n","import {\n    WithEcpInstrument,\n    WithIdealInstrument,\n    WithPayByBankInstrument,\n    WithSepaInstrument,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport function isEcpInstrument(data: unknown): data is WithEcpInstrument {\n    return Boolean(\n        typeof data === 'object' &&\n            data !== null &&\n            'accountNumber' in data &&\n            'accountType' in data &&\n            'shopperPermission' in data &&\n            'routingNumber' in data,\n    );\n}\n\nexport function isIdealInstrument(paymentData: unknown): paymentData is WithIdealInstrument {\n    return Boolean(typeof paymentData === 'object' && paymentData !== null && 'bic' in paymentData);\n}\n\nexport function isSepaInstrument(paymentData: unknown): paymentData is WithSepaInstrument {\n    return Boolean(\n        typeof paymentData === 'object' &&\n            paymentData !== null &&\n            'iban' in paymentData &&\n            'firstName' in paymentData &&\n            'lastName' in paymentData &&\n            'shopperPermission' in paymentData,\n    );\n}\n\nexport function isPayByBankInstrument(\n    paymentData: unknown,\n): paymentData is WithPayByBankInstrument {\n    return Boolean(\n        typeof paymentData === 'object' &&\n            paymentData !== null &&\n            'iban' in paymentData &&\n            !('firstName' in paymentData) &&\n            !('lastName' in paymentData) &&\n            !('shopperPermission' in paymentData),\n    );\n}\n","import {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport BlueSnapDirectAPMPaymentStrategy from './bluesnap-direct-apm-payment-strategy';\n\nconst createBlueSnapDirectAPMPaymentStrategy: PaymentStrategyFactory<\n    BlueSnapDirectAPMPaymentStrategy\n> = (paymentIntegrationService) => new BlueSnapDirectAPMPaymentStrategy(paymentIntegrationService);\n\nexport default toResolvableModule(createBlueSnapDirectAPMPaymentStrategy, [\n    { gateway: 'bluesnapdirect' },\n]);\n","export default class CancellablePromise<T> {\n    promise: Promise<T>;\n    cancel!: (reason?: any) => void;\n\n    constructor(promise: Promise<T>) {\n        const cancellable = new Promise<T>((_, reject) => {\n            this.cancel = reject;\n        });\n\n        this.promise = Promise.race([promise, cancellable]);\n    }\n}\n","import StandardError from './standard-error';\n\n/**\n * This error should be thrown when the payment flow is cancelled. It could be\n * due to a deliberate user interaction, i.e.: the user clicks on a cancel\n * button which dismisses the payment modal.\n */\nexport default class PaymentMethodCancelledError extends StandardError {\n    constructor(message?: string) {\n        super(message || 'Payment process was cancelled.');\n\n        this.name = 'PaymentMethodCancelledError';\n        this.type = 'payment_cancelled';\n    }\n}\n","enum PaymentStatusTypes {\n    ACKNOWLEDGE = 'ACKNOWLEDGE',\n    FINALIZE = 'FINALIZE',\n    INITIALIZE = 'INITIALIZE',\n}\n\nexport default PaymentStatusTypes;\n","import { noop } from 'lodash';\n\nimport {\n    CancellablePromise,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInitializeOptions,\n    PaymentIntegrationService,\n    PaymentMethodCancelledError,\n    PaymentRequestOptions,\n    PaymentStatusTypes,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { BlueSnapV2StyleProps } from './bluesnapv2';\nimport {\n    BlueSnapV2PaymentInitializeOptions,\n    WithBlueSnapV2PaymentInitializeOptions,\n} from './bluesnapv2-payment-options';\n\nconst IFRAME_NAME = 'bluesnapv2_hosted_payment_page';\n\nexport default class BlueSnapV2PaymentStrategy implements PaymentStrategy {\n    private _initializeOptions?: BlueSnapV2PaymentInitializeOptions;\n\n    constructor(private _paymentIntegrationService: PaymentIntegrationService) {}\n\n    async execute(\n        orderRequest: OrderRequestBody,\n        options?: PaymentInitializeOptions & WithBlueSnapV2PaymentInitializeOptions,\n    ): Promise<void> {\n        const { payment } = orderRequest;\n\n        if (!payment) {\n            throw new PaymentArgumentInvalidError(['payment']);\n        }\n\n        if (!this._initializeOptions) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        const { onLoad, style } = this._initializeOptions;\n        const frame = this._createIframe(IFRAME_NAME, style);\n        const promise = new CancellablePromise<undefined>(new Promise(noop));\n\n        onLoad(frame, () => promise.cancel(new PaymentMethodCancelledError()));\n\n        await this._paymentIntegrationService.submitOrder(orderRequest, options);\n\n        await this._paymentIntegrationService.initializeOffsitePayment({\n            methodId: payment.methodId,\n            gatewayId: payment.gatewayId,\n            shouldSaveInstrument: false,\n            target: frame.name,\n            promise: promise.promise,\n        });\n    }\n\n    async finalize(options?: PaymentRequestOptions): Promise<void> {\n        const state = this._paymentIntegrationService.getState();\n        const order = state.getOrder();\n        const status = state.getPaymentStatus();\n\n        if (\n            order &&\n            (status === PaymentStatusTypes.ACKNOWLEDGE || status === PaymentStatusTypes.FINALIZE)\n        ) {\n            await this._paymentIntegrationService.finalizeOrder(options);\n\n            return;\n        }\n\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    async initialize(\n        options?: PaymentInitializeOptions & WithBlueSnapV2PaymentInitializeOptions,\n    ): Promise<void> {\n        this._initializeOptions = options && options.bluesnapv2;\n\n        await Promise.resolve();\n    }\n\n    deinitialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    private _createIframe(name: string, style?: BlueSnapV2StyleProps): HTMLIFrameElement {\n        const iframe = document.createElement('iframe');\n\n        iframe.setAttribute(\n            'sandbox',\n            'allow-top-navigation allow-scripts allow-forms allow-same-origin',\n        );\n\n        iframe.name = name;\n\n        if (style) {\n            const { border, height, width } = style;\n\n            iframe.style.border = border ?? '';\n            iframe.style.height = height ?? '';\n            iframe.style.width = width ?? '';\n        }\n\n        return iframe;\n    }\n}\n","import {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport BlueSnapV2PaymentStrategy from './bluesnapv2-payment-strategy';\n\nconst createBluesnapV2PaymentStrategy: PaymentStrategyFactory<BlueSnapV2PaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new BlueSnapV2PaymentStrategy(paymentIntegrationService);\n};\n\nexport default toResolvableModule(createBluesnapV2PaymentStrategy, [{ gateway: 'bluesnapv2' }]);\n","import { isNil, values } from 'lodash';\n\nimport {\n    HostedForm,\n    InvalidArgumentError,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInitializeOptions,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { WithCreditCardPaymentInitializeOptions } from './credit-card-payment-initialize-options';\n\nexport default class CreditCardPaymentStrategy implements PaymentStrategy {\n    protected _hostedForm?: HostedForm;\n    protected _shouldRenderHostedForm?: boolean;\n\n    constructor(protected _paymentIntegrationService: PaymentIntegrationService) {}\n\n    execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        return this._isHostedPaymentFormEnabled(\n            payload.payment?.methodId,\n            payload.payment?.gatewayId,\n        ) && this._shouldRenderHostedForm\n            ? this._executeWithHostedForm(payload, options)\n            : this._executeWithoutHostedForm(payload, options);\n    }\n\n    initialize(\n        options?: PaymentInitializeOptions & WithCreditCardPaymentInitializeOptions,\n    ): Promise<void> {\n        if (\n            !this._isHostedPaymentFormEnabled(options?.methodId, options?.gatewayId) ||\n            !this._isHostedFieldAvailable(options)\n        ) {\n            this._shouldRenderHostedForm = false;\n\n            return Promise.resolve();\n        }\n\n        const formOptions = options && options.creditCard && options.creditCard.form;\n        const state = this._paymentIntegrationService.getState();\n        const { paymentSettings: { bigpayBaseUrl: host = '' } = {} } =\n            state.getStoreConfigOrThrow();\n\n        if (!formOptions) {\n            throw new InvalidArgumentError();\n        }\n\n        const form = this._paymentIntegrationService.createHostedForm(host, formOptions);\n\n        return form.attach().then(() => {\n            this._shouldRenderHostedForm = true;\n            this._hostedForm = form;\n\n            return Promise.resolve();\n        });\n    }\n\n    deinitialize(): Promise<void> {\n        if (this._hostedForm) {\n            this._hostedForm.detach();\n        }\n\n        return Promise.resolve();\n    }\n\n    finalize(): Promise<void> {\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    protected async _executeWithoutHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const paymentData = payment && payment.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        await this._paymentIntegrationService.submitPayment({ ...payment, paymentData });\n    }\n\n    protected async _executeWithHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const form = this._hostedForm;\n\n        if (!form) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        if (!payment || !payment.methodId) {\n            throw new PaymentArgumentInvalidError(['payment.methodId']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        await form.validate().then(() => form.submit(payment));\n    }\n\n    protected _isHostedPaymentFormEnabled(methodId?: string, gatewayId?: string): boolean {\n        if (!methodId) {\n            return false;\n        }\n\n        const state = this._paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(methodId, gatewayId);\n\n        return paymentMethod.config.isHostedFormEnabled === true;\n    }\n\n    private _isHostedFieldAvailable(\n        options?: PaymentInitializeOptions & WithCreditCardPaymentInitializeOptions,\n    ): boolean {\n        return !values(options && options.creditCard && options.creditCard.form.fields).every(\n            isNil,\n        );\n    }\n}\n","import { noop, some } from 'lodash';\n\nimport { CreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    isRequestError,\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInitializeOptions,\n    PaymentIntegrationService,\n    PaymentMethodFailedError,\n    PaymentRequestOptions,\n    PaymentStatusTypes,\n    RequestError,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport {\n    RestApiResponse,\n    THREE_D_SECURE_AVAILABLE,\n    THREE_D_SECURE_BUSY,\n    THREE_D_SECURE_PROCEED,\n    ThreeDSjs,\n} from './cba-mpgs';\nimport CBAMPGSScriptLoader from './cba-mpgs-script-loader';\nimport { isCBAMPGSPaymentMethodLike, isThreeDSErrorBody } from './is-cba-mpgs-payment-method-like';\n\nexport default class CBAMPGSPaymentStrategy extends CreditCardPaymentStrategy {\n    private threeDSjs?: ThreeDSjs;\n\n    private sessionId = '';\n    private locale?: string;\n\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        private cbaMGPSScriptLoader: CBAMPGSScriptLoader,\n    ) {\n        super(paymentIntegrationService);\n    }\n\n    async initialize(options: PaymentInitializeOptions): Promise<void> {\n        await super.initialize(options);\n\n        const { methodId } = options;\n\n        await this.paymentIntegrationService.loadPaymentMethod(methodId);\n\n        const state = this.paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(methodId);\n\n        if (!isCBAMPGSPaymentMethodLike(paymentMethod)) {\n            throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n        }\n\n        const {\n            clientToken,\n            initializationData: { isTestModeFlagEnabled = false, merchantId },\n            config: { is3dsEnabled },\n        } = paymentMethod;\n\n        if (is3dsEnabled) {\n            this.threeDSjs = await this.cbaMGPSScriptLoader.load(isTestModeFlagEnabled);\n\n            if (!this.threeDSjs) {\n                throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n            }\n\n            if (!clientToken || !merchantId) {\n                throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n            }\n\n            this.sessionId = clientToken;\n            this.locale = state.getLocale();\n\n            if (!this.locale) {\n                throw new MissingDataError(MissingDataErrorType.MissingCart);\n            }\n\n            await this.threeDSjs.configure({\n                merchantId,\n                sessionId: this.sessionId,\n                callback: () => {\n                    if (this.threeDSjs?.isConfigured()) {\n                        return this.paymentIntegrationService.getState();\n                    }\n\n                    throw new PaymentMethodFailedError('Failed to configure 3DS API.');\n                },\n                configuration: {\n                    userLanguage: this.locale,\n                    wsVersion: 62,\n                },\n            });\n        }\n\n        return Promise.resolve();\n    }\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment } = payload;\n        const paymentData = payment && payment.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        const state = this.paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(payment.methodId);\n\n        const { is3dsEnabled } = paymentMethod.config;\n\n        if (is3dsEnabled) {\n            const newPaymentData = {\n                ...paymentData,\n                threeDSecure: { token: this.sessionId },\n            };\n\n            if (payload.payment) {\n                payload.payment.paymentData = newPaymentData;\n            }\n        }\n\n        return super.execute(payload, options).catch((error) => {\n            if (\n                !is3dsEnabled ||\n                !isRequestError(error) ||\n                !some(error.body.errors, { code: 'three_d_secure_required' })\n            ) {\n                return Promise.reject(error);\n            }\n\n            const retryState = this.paymentIntegrationService.getState();\n            const order = retryState.getOrder();\n\n            const {\n                storeProfile: { storeId },\n            } = retryState.getStoreConfigOrThrow();\n\n            if (!order || !this.sessionId) {\n                throw new MissingDataError(MissingDataErrorType.MissingCheckout);\n            }\n\n            const orderId = `${storeId}_${order.orderId}`;\n\n            if (!isThreeDSErrorBody(error.body)) {\n                throw new RequestError();\n            }\n\n            const {\n                three_ds_result: { token: transactionId },\n            } = error.body;\n\n            if (!transactionId) {\n                return Promise.reject(error);\n            }\n\n            return this.initiateAuthentication(orderId, transactionId);\n        });\n    }\n\n    async finalize(options?: PaymentRequestOptions): Promise<void> {\n        const state = this.paymentIntegrationService.getState();\n        const order = state.getOrder();\n\n        if (order && state.getPaymentStatus() === PaymentStatusTypes.FINALIZE) {\n            await this.paymentIntegrationService.finalizeOrder(options);\n\n            return Promise.resolve();\n        }\n\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    deinitialize(): Promise<void> {\n        this.threeDSjs = undefined;\n        this.sessionId = '';\n\n        return super.deinitialize();\n    }\n\n    private async initiateAuthentication(orderId: string, transactionId: string): Promise<void> {\n        const response: RestApiResponse = await new Promise((resolve, reject) => {\n            if (!this.threeDSjs) {\n                throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n            }\n\n            this.threeDSjs.initiateAuthentication(orderId, transactionId, (data) => {\n                const error = data.error;\n\n                if (error) {\n                    return reject(new PaymentMethodFailedError(error.msg));\n                }\n\n                if (this.threeDSjs && data.gatewayRecommendation === THREE_D_SECURE_PROCEED) {\n                    return resolve(data.restApiResponse);\n                }\n\n                return reject(new PaymentMethodFailedError());\n            });\n        });\n\n        if (\n            response.transaction &&\n            response.transaction.authenticationStatus === THREE_D_SECURE_AVAILABLE\n        ) {\n            return this.authenticatePayer(orderId, transactionId);\n        }\n\n        throw new PaymentMethodFailedError();\n    }\n\n    private async authenticatePayer(\n        orderId: string,\n        transactionId: string,\n        attempt = 1,\n    ): Promise<void> {\n        return new Promise((_resolve, reject) => {\n            if (!this.threeDSjs) {\n                return reject(\n                    new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized),\n                );\n            }\n\n            this.threeDSjs.authenticatePayer(\n                orderId,\n                transactionId,\n                // eslint-disable-next-line @typescript-eslint/no-misused-promises\n                async (data) => {\n                    const error = data.error;\n\n                    if (error) {\n                        if (error.cause && error.cause === THREE_D_SECURE_BUSY && attempt < 5) {\n                            // Wait 3 seconds for MPGS server to process the `initiateAuthentication` call\n                            // See: Step 1: Initiate Authentication ->  Initiate Authentication Request:\n                            // https://ap-gateway.mastercard.com/api/documentation/integrationGuidelines/supportedFeatures/pickAdditionalFunctionality/authentication/3DS/integrationModelAPI.html?locale=en_US#x_3DSTest\n                            await new Promise((resolve) => setTimeout(resolve, 3000));\n\n                            // eslint-disable-next-line no-plusplus, no-param-reassign\n                            return this.authenticatePayer(orderId, transactionId, ++attempt);\n                        }\n\n                        return reject(new PaymentMethodFailedError());\n                    }\n\n                    // ThreeDSjs will handle the redirect so return a promise that doesn't really resolve\n                    return new Promise<never>(noop);\n                },\n                { fullScreenRedirect: true },\n            );\n        });\n    }\n}\n","/* eslint-disable @typescript-eslint/consistent-type-assertions */\nimport { PaymentMethod } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { CBAMPGSPaymentMethod, ThreeDSErrorBody } from './cba-mpgs';\n\nexport function isCBAMPGSPaymentMethodLike(\n    paymentMethod: PaymentMethod,\n): paymentMethod is CBAMPGSPaymentMethod {\n    return (\n        typeof paymentMethod === 'object' &&\n        paymentMethod !== null &&\n        'initializationData' in paymentMethod &&\n        typeof (paymentMethod as CBAMPGSPaymentMethod).initializationData === 'object' &&\n        (paymentMethod as CBAMPGSPaymentMethod).initializationData !== null &&\n        'merchantId' in (paymentMethod as CBAMPGSPaymentMethod).initializationData &&\n        typeof (paymentMethod as CBAMPGSPaymentMethod).initializationData.merchantId === 'string' &&\n        (typeof (paymentMethod as CBAMPGSPaymentMethod).initializationData.isTestModeFlagEnabled ===\n            'boolean' ||\n            typeof (paymentMethod as CBAMPGSPaymentMethod).initializationData\n                .isTestModeFlagEnabled === 'undefined')\n    );\n}\n\nexport function isThreeDSErrorBody(body: unknown): body is ThreeDSErrorBody {\n    return (\n        typeof body === 'object' &&\n        body !== null &&\n        'three_ds_result' in body &&\n        typeof (body as ThreeDSErrorBody).three_ds_result === 'object' &&\n        (body as ThreeDSErrorBody).three_ds_result !== null &&\n        'token' in (body as ThreeDSErrorBody).three_ds_result &&\n        typeof (body as ThreeDSErrorBody).three_ds_result.token === 'string'\n    );\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { PaymentMethod } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport const THREE_D_SECURE_PROCEED = 'PROCEED';\nexport const THREE_D_SECURE_BUSY = 'SERVER_BUSY';\nexport const THREE_D_SECURE_AVAILABLE = 'AUTHENTICATION_AVAILABLE';\n\nexport interface CBAMPGSHostWindow extends Window {\n    ThreeDS?: ThreeDSjs;\n}\n\nexport interface ThreeDSjs {\n    // Configuration method for initializing the API.\n    configure(config: ThreeDSConfiguration): Promise<void>;\n    // Convenience method to check if the API has been configured successfully.\n    isConfigured(): boolean;\n    // Authentication for the arguments passed.\n    initiateAuthentication(\n        orderId: string,\n        transactionId: string,\n        callback: (data: ThreeDSAuthenticationResponse) => void,\n    ): void;\n    authenticatePayer(\n        orderId: string,\n        transactionId: string,\n        callback: (data: ThreeDSAuthenticationResponse) => void,\n        optionalParams?: AuthenticatePayerOptionalParams,\n    ): void;\n}\n\nexport interface RestApiResponse {\n    transaction: {\n        authenticationStatus: string;\n    };\n}\n\n// Configuration required to configure ThreeDS\nexport interface ThreeDSConfiguration {\n    merchantId: string;\n    sessionId: string;\n    configuration: ThreeDSAPIConfiguration;\n    callback(): void;\n}\n\nexport interface ThreeDSAuthenticationResponse {\n    error?: ThreeDSAuthenticationError;\n    restApiResponse: RestApiResponse;\n    gatewayRecommendation: string;\n}\n\nexport interface AuthenticatePayerOptionalParams {\n    fullScreenRedirect: boolean;\n}\n\nexport interface ThreeDSAuthenticationError {\n    code: string;\n    msg: string;\n    cause?: string;\n}\n\n// JSON value supporting data elements like userLanguage, REST API version (wsVersion)\nexport interface ThreeDSAPIConfiguration {\n    // A language identifier or IETF language tag to control the language of the payment page displayed to the payer.\n    //  For example, \"en_US\", es, \"fr-CA\". By default, the language is \"en_US\".\n    userLanguage: string;\n    // The Web Services API version that you submitted the request in. IE: 62\n    wsVersion: number;\n}\n\nexport interface CBAMPGSPaymentMethod extends PaymentMethod {\n    initializationData: CBAMPGSInitializationData;\n}\n\nexport interface CBAMPGSInitializationData {\n    isTestModeFlagEnabled?: boolean;\n    merchantId: string;\n}\n\nexport interface ThreeDSErrorBody {\n    three_ds_result: {\n        token: string;\n    };\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { ScriptLoader } from '@bigcommerce/script-loader';\n\nimport { PaymentMethodClientUnavailableError } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { CBAMPGSHostWindow, ThreeDSjs } from './cba-mpgs';\n\nexport default class CBAMPGSScriptLoader {\n    constructor(private _scriptLoader: ScriptLoader, private _window: CBAMPGSHostWindow = window) {}\n\n    async load(testMode?: boolean): Promise<ThreeDSjs> {\n        await this._scriptLoader.loadScript(\n            `//${\n                testMode ? 'test' : 'ap'\n            }-gateway.mastercard.com/static/threeDS/1.3.0/three-ds.min.js`,\n        );\n\n        if (!this._window.ThreeDS) {\n            throw new PaymentMethodClientUnavailableError();\n        }\n\n        return this._window.ThreeDS;\n    }\n}\n","import { getScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CBAMPGSPaymentStrategy from './cba-mpgs-payment-strategy';\nimport CBAMPGSScriptLoader from './cba-mpgs-script-loader';\n\nconst createCBAMPGSPaymentStrategy: PaymentStrategyFactory<CBAMPGSPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new CBAMPGSPaymentStrategy(\n        paymentIntegrationService,\n        new CBAMPGSScriptLoader(getScriptLoader()),\n    );\n};\n\nexport default toResolvableModule(createCBAMPGSPaymentStrategy, [{ id: 'cba_mpgs' }]);\n","import { PaymentMethod } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport interface AdditionalActionRequired {\n    type: AdditionalActionType;\n    data: AdditionalRedirectData;\n}\n\nexport interface AdditionalRedirectData {\n    redirect_url: string;\n    transaction_id?: string;\n}\n\nexport enum AdditionalActionType {\n    OffsiteRedirect = 'offsite_redirect',\n}\n\nexport function getCheckoutcom(): PaymentMethod {\n    return {\n        id: 'checkoutcom',\n        logoUrl: '',\n        method: 'checkoutcom',\n        supportedCards: [],\n        config: {\n            displayName: 'Checkout.com',\n            merchantId: '',\n            testMode: true,\n        },\n        initializationData: {\n            checkoutcomkey: 'key',\n        },\n        type: 'PAYMENT_TYPE_API',\n        clientToken: 'clientToken',\n        skipRedirectConfirmationAlert: true,\n    };\n}\n\nexport interface WithDocumentInstrument {\n    ccDocument: string;\n}\n\nexport interface WithCheckoutcomSEPAInstrument {\n    iban: string;\n    bic: string;\n}\n\nexport interface WithCheckoutcomFawryInstrument {\n    customerMobile: string;\n    customerEmail: string;\n}\n","import { CreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    isRequestError,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStatusTypes,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { AdditionalActionRequired, AdditionalActionType } from './checkoutcom';\n\nexport default class CheckoutComCustomPaymentStrategy extends CreditCardPaymentStrategy {\n    constructor(protected paymentIntegrationService: PaymentIntegrationService) {\n        super(paymentIntegrationService);\n    }\n    finalize(options?: PaymentRequestOptions): Promise<void> {\n        const state = this.paymentIntegrationService.getState();\n        const order = state.getOrder();\n\n        if (order && state.getPaymentStatus() === PaymentStatusTypes.FINALIZE) {\n            this.paymentIntegrationService.finalizeOrder(options);\n        }\n\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    protected async _executeWithHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const form = this._hostedForm;\n\n        if (!form) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        if (!payment || !payment.methodId) {\n            throw new PaymentArgumentInvalidError(['payment.methodId']);\n        }\n\n        try {\n            await form.validate();\n            await this.paymentIntegrationService.submitOrder(order, options);\n            await form.submit(payment);\n        } catch (error) {\n            return this._processResponse(error);\n        }\n\n        this.paymentIntegrationService.loadCurrentOrder();\n    }\n\n    protected _processResponse(error: unknown): Promise<void> {\n        if (!isRequestError(error)) {\n            return Promise.reject(error);\n        }\n\n        const additionalActionRequired: AdditionalActionRequired =\n            error.body.additional_action_required;\n\n        // TODO validate all possible responses and perform respective additional actions\n        if (\n            additionalActionRequired &&\n            additionalActionRequired.type === AdditionalActionType.OffsiteRedirect\n        ) {\n            return this._performRedirect(additionalActionRequired);\n        }\n\n        return Promise.reject(error);\n    }\n\n    private _performRedirect(additionalActionRequired: AdditionalActionRequired): Promise<void> {\n        return new Promise(() => {\n            window.location.replace(additionalActionRequired.data.redirect_url);\n        });\n    }\n}\n","import {\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInstrument,\n    PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { WithCheckoutcomFawryInstrument } from '../checkoutcom';\nimport CheckoutComCustomPaymentStrategy from '../checkoutcom-custom-payment-strategy';\n\nconst CHECKOUTCOM_FAWRY_PAYMENT_METHOD = 'fawry';\n\nexport default class CheckoutComFawryPaymentStrategy extends CheckoutComCustomPaymentStrategy {\n    protected async _executeWithoutHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const paymentData = payment && payment.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        try {\n            await this._paymentIntegrationService.submitPayment({\n                ...payment,\n                paymentData: {\n                    ...paymentData,\n                    formattedPayload: this._createFormattedPayload(\n                        payment.methodId,\n                        paymentData as PaymentInstrument,\n                    ),\n                },\n            });\n        } catch (error) {\n            return this._processResponse(error);\n        }\n    }\n\n    private _createFormattedPayload(\n        methodId: string,\n        paymentData: PaymentInstrument,\n    ): WithCheckoutcomFawryInstrument | undefined {\n        if (\n            CHECKOUTCOM_FAWRY_PAYMENT_METHOD === methodId &&\n            'customerMobile' in paymentData &&\n            'customerEmail' in paymentData\n        ) {\n            const fawryPaymentData = paymentData as {\n                customerMobile: string;\n                customerEmail: string;\n            };\n\n            return {\n                customerMobile: fawryPaymentData.customerMobile,\n                customerEmail: fawryPaymentData.customerEmail,\n            };\n        }\n    }\n}\n","import {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CheckoutComFawryPaymentStrategy from './checkoutcom-fawry-payment-strategy';\n\nconst createCheckoutComFawryPaymentStrategy: PaymentStrategyFactory<\n    CheckoutComFawryPaymentStrategy\n> = (paymentIntegrationService) => {\n    return new CheckoutComFawryPaymentStrategy(paymentIntegrationService);\n};\n\nexport default toResolvableModule(createCheckoutComFawryPaymentStrategy, [\n    { gateway: 'checkoutcom', id: 'fawry' },\n]);\n","import { some } from 'lodash';\n\nimport { isRequestError, RequestError } from './';\n\nexport default function isThreeDSecureRequiredError(error: unknown): error is RequestError {\n    return isRequestError(error) && some(error.body.errors, { code: 'three_d_secure_required' });\n}\n","import { FormPoster } from '@bigcommerce/form-poster';\n\nimport { CreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    isThreeDSecureRequiredError,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStatusTypes,\n    RequestError,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default class CheckoutComCreditCardPaymentStrategy extends CreditCardPaymentStrategy {\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        protected formPoster: FormPoster,\n    ) {\n        super(paymentIntegrationService);\n    }\n\n    finalize(options?: PaymentRequestOptions): Promise<void> {\n        const state = this.paymentIntegrationService.getState();\n        const order = state.getOrder();\n\n        if (order && state.getPaymentStatus() === PaymentStatusTypes.FINALIZE) {\n            this.paymentIntegrationService.finalizeOrder(options);\n        }\n\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    protected async _executeWithoutHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const paymentData = payment && payment.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        await this.paymentIntegrationService.submitOrder(order, options);\n\n        try {\n            await this.paymentIntegrationService.submitPayment({ ...payment, paymentData });\n        } catch (error) {\n            if (isThreeDSecureRequiredError(error)) {\n                return this._handleThreeDSecure(error);\n            }\n\n            return Promise.reject(error);\n        }\n    }\n\n    protected async _executeWithHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const form = this._hostedForm;\n\n        if (!form) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        if (!payment || !payment.methodId) {\n            throw new PaymentArgumentInvalidError(['payment.methodId']);\n        }\n\n        try {\n            await form.validate();\n            await this.paymentIntegrationService.submitOrder(order, options);\n            await form.submit(payment);\n        } catch (error) {\n            if (isThreeDSecureRequiredError(error)) {\n                return this._handleThreeDSecure(error);\n            }\n\n            return Promise.reject(error);\n        }\n\n        this.paymentIntegrationService.loadCurrentOrder();\n    }\n\n    private _handleThreeDSecure(error: RequestError): Promise<void> {\n        const { acs_url, payer_auth_request, callback_url, merchant_data } =\n            error.body.three_ds_result;\n\n        return new Promise<void>(() =>\n            this.formPoster.postForm(acs_url, {\n                PaReq: payer_auth_request || null,\n                TermUrl: callback_url || null,\n                MD: merchant_data || null,\n            }),\n        );\n    }\n}\n","import { createFormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CheckoutComCreditCardPaymentStrategy from './checkoutcom-credit-card-payment-strategy';\n\nconst createCheckoutComCreditCardPaymentStrategy: PaymentStrategyFactory<\n    CheckoutComCreditCardPaymentStrategy\n> = (paymentIntegrationService) => {\n    return new CheckoutComCreditCardPaymentStrategy(paymentIntegrationService, createFormPoster());\n};\n\nexport default toResolvableModule(createCheckoutComCreditCardPaymentStrategy, [\n    { gateway: 'checkoutcom', id: 'credit_card' },\n    { gateway: 'checkoutcom', id: 'card' },\n]);\n","import {\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInstrument,\n    PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { WithCheckoutcomSEPAInstrument } from '../checkoutcom';\nimport CheckoutComCustomPaymentStrategy from '../checkoutcom-custom-payment-strategy';\n\nconst CHECKOUTCOM_SEPA_PAYMENT_METHOD = 'sepa';\n\nexport default class CheckoutComSEPAPaymentStrategy extends CheckoutComCustomPaymentStrategy {\n    protected async _executeWithoutHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const paymentData = payment?.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        try {\n            await this._paymentIntegrationService.submitPayment({\n                ...payment,\n                paymentData: {\n                    ...paymentData,\n                    formattedPayload: this._createFormattedPayload(\n                        payment.methodId,\n                        paymentData as PaymentInstrument,\n                    ),\n                },\n            });\n        } catch (error) {\n            return this._processResponse(error);\n        }\n    }\n\n    private _createFormattedPayload(\n        methodId: string,\n        paymentData: PaymentInstrument,\n    ): WithCheckoutcomSEPAInstrument {\n        const formattedPayload: WithCheckoutcomSEPAInstrument = { iban: '', bic: '' };\n        const { iban, bic } =\n            'iban' in paymentData && 'bic' in paymentData ? paymentData : formattedPayload;\n\n        if (methodId === CHECKOUTCOM_SEPA_PAYMENT_METHOD && document) {\n            formattedPayload.iban = iban;\n            formattedPayload.bic = bic;\n        }\n\n        return formattedPayload;\n    }\n}\n","import {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CheckoutComSepaPaymentStrategy from './checkoutcom-sepa-payment-strategy';\n\nconst createCheckoutComSepaPaymentStrategy: PaymentStrategyFactory<\n    CheckoutComSepaPaymentStrategy\n> = (paymentIntegrationService) => {\n    return new CheckoutComSepaPaymentStrategy(paymentIntegrationService);\n};\n\nexport default toResolvableModule(createCheckoutComSepaPaymentStrategy, [\n    { gateway: 'checkoutcom', id: 'sepa' },\n]);\n","import {\n    CreditCardInstrument,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInstrument,\n    PaymentRequestOptions,\n    WithIdealInstrument,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CheckoutComCustomPaymentStrategy from '../checkoutcom-custom-payment-strategy';\n\nconst CHECKOUTCOM_IDEAL_PAYMENT_METHOD = 'ideal';\n\nexport default class CheckoutComiDealPaymentStrategy extends CheckoutComCustomPaymentStrategy {\n    protected async _executeWithoutHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const paymentData = payment?.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        try {\n            await this._paymentIntegrationService.submitPayment({\n                ...payment,\n                paymentData: {\n                    ...paymentData,\n                    formattedPayload: this._createFormattedPayload(\n                        payment.methodId,\n                        paymentData as PaymentInstrument,\n                    ),\n                },\n            });\n        } catch (error) {\n            return this._processResponse(error);\n        }\n    }\n\n    private _createFormattedPayload(\n        methodId: string,\n        paymentData: PaymentInstrument | (CreditCardInstrument & WithIdealInstrument),\n    ): WithIdealInstrument | undefined {\n        if (CHECKOUTCOM_IDEAL_PAYMENT_METHOD === methodId && 'bic' in paymentData) {\n            return { bic: paymentData.bic };\n        }\n    }\n}\n","import {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CheckoutComiDealPaymentStrategy from './checkoutcom-ideal-payment-strategy';\n\nconst createCheckoutComiDealPaymentStrategy: PaymentStrategyFactory<\n    CheckoutComiDealPaymentStrategy\n> = (paymentIntegrationService) => {\n    return new CheckoutComiDealPaymentStrategy(paymentIntegrationService);\n};\n\nexport default toResolvableModule(createCheckoutComiDealPaymentStrategy, [\n    { gateway: 'checkoutcom', id: 'ideal' },\n]);\n","import {\n    CreditCardInstrument,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInstrument,\n    PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { WithDocumentInstrument } from '../checkoutcom';\nimport CheckoutComCustomPaymentStrategy from '../checkoutcom-custom-payment-strategy';\n\nconst DOCUMENT_SUPPORTED_APMS = ['boleto', 'oxxo', 'qpay', 'ideal'];\n\nexport default class CheckoutComAPMPaymentStrategy extends CheckoutComCustomPaymentStrategy {\n    protected async _executeWithoutHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const paymentData = payment?.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        try {\n            await this._paymentIntegrationService.submitPayment({\n                ...payment,\n                paymentData: {\n                    ...paymentData,\n                    formattedPayload: this._createFormattedPayload(\n                        payment.methodId,\n                        paymentData as PaymentInstrument,\n                    ),\n                },\n            });\n        } catch (error) {\n            return this._processResponse(error);\n        }\n    }\n\n    private _createFormattedPayload(\n        methodId: string,\n        paymentData: PaymentInstrument | (CreditCardInstrument & WithDocumentInstrument),\n    ): WithDocumentInstrument {\n        const formattedPayload: WithDocumentInstrument = { ccDocument: '' };\n        const ccDocument = 'ccDocument' in paymentData ? paymentData.ccDocument : '';\n\n        if (DOCUMENT_SUPPORTED_APMS.indexOf(methodId) !== -1 && ccDocument) {\n            formattedPayload.ccDocument = ccDocument;\n        }\n\n        return formattedPayload;\n    }\n}\n","import {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CheckoutComCustomPaymentStrategy from '../checkoutcom-custom-payment-strategy';\n\nimport CheckoutComAPMPaymentStrategy from './checkoutcom-apm-payment-strategy';\n\nconst createCheckoutComAPMPaymentStrategy: PaymentStrategyFactory<\n    CheckoutComCustomPaymentStrategy\n> = (paymentIntegrationService) => {\n    return new CheckoutComAPMPaymentStrategy(paymentIntegrationService);\n};\n\nexport default toResolvableModule(createCheckoutComAPMPaymentStrategy, [\n    { gateway: 'checkoutcom' },\n]);\n","import { noop } from 'lodash';\n\nimport {\n    InvalidArgumentError,\n    isRequestError,\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotCompletedError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInitializeOptions,\n    PaymentIntegrationSelectors,\n    PaymentIntegrationService,\n    PaymentMethod,\n    PaymentRequestOptions,\n    PaymentStrategy,\n    RequestError,\n    RequestOptions,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport ClearpayScriptLoader from './clearpay-script-loader';\nimport ClearpaySdk from './clearpay-sdk';\n\nexport default class ClearpayPaymentStrategy implements PaymentStrategy {\n    private _clearpaySdk?: ClearpaySdk;\n\n    constructor(\n        private _paymentIntegrationService: PaymentIntegrationService,\n        private _clearpayScriptLoader: ClearpayScriptLoader,\n    ) {}\n\n    async initialize(options: PaymentInitializeOptions): Promise<void> {\n        const { getPaymentMethodOrThrow } = this._paymentIntegrationService.getState();\n        const paymentMethod = getPaymentMethodOrThrow(options.methodId, options.gatewayId);\n\n        const features = this._paymentIntegrationService.getState().getStoreConfigOrThrow()\n            .checkoutSettings.features;\n\n        this._clearpaySdk = await this._clearpayScriptLoader.load(paymentMethod, features);\n    }\n\n    deinitialize(): Promise<void> {\n        this._clearpaySdk = undefined;\n\n        return Promise.resolve();\n    }\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { gatewayId, methodId } = payload.payment || {};\n\n        if (!gatewayId || !methodId) {\n            throw new PaymentArgumentInvalidError(['payment.gatewayId', 'payment.methodId']);\n        }\n\n        const state = this._paymentIntegrationService.getState();\n        const { isStoreCreditApplied: useStoreCredit } = state.getCheckoutOrThrow();\n\n        await this._paymentIntegrationService.applyStoreCredit(useStoreCredit);\n\n        await this._paymentIntegrationService.validateCheckout(state.getCheckout(), options);\n\n        const { countryCode } = state.getBillingAddressOrThrow();\n\n        if (!this._isCountrySupported(countryCode)) {\n            throw new InvalidArgumentError(\n                'Unable to proceed because billing country is not supported.',\n            );\n        }\n\n        await this._loadPaymentMethod(gatewayId, methodId, options);\n\n        await this._redirectToClearpay(\n            countryCode,\n            this._paymentIntegrationService.getState().getPaymentMethod(methodId, gatewayId),\n        );\n\n        // Clearpay will handle the rest of the flow so return a promise that doesn't really resolve\n        return new Promise(noop);\n    }\n\n    async finalize(options: PaymentRequestOptions): Promise<void> {\n        const state = this._paymentIntegrationService.getState();\n        const payment = state.getPaymentId();\n        const config = state.getContextConfig();\n\n        if (!payment) {\n            throw new MissingDataError(MissingDataErrorType.MissingCheckout);\n        }\n\n        if (!config || !config.payment.token) {\n            throw new MissingDataError(MissingDataErrorType.MissingCheckoutConfig);\n        }\n\n        const paymentPayload = {\n            methodId: payment.providerId,\n            paymentData: { nonce: config.payment.token },\n        };\n\n        await this._paymentIntegrationService.submitOrder({}, options);\n\n        try {\n            await this._paymentIntegrationService.submitPayment(paymentPayload);\n        } catch (error) {\n            await this._paymentIntegrationService.forgetCheckout(payment.providerId);\n            await this._paymentIntegrationService.loadPaymentMethods();\n\n            if (isRequestError(error)) {\n                throw new OrderFinalizationNotCompletedError(error.body?.errors?.[0]?.message);\n            }\n        }\n    }\n\n    private async _redirectToClearpay(\n        countryCode: string,\n        paymentMethod?: PaymentMethod,\n    ): Promise<void> {\n        if (!this._clearpaySdk || !paymentMethod || !paymentMethod.clientToken) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        this._clearpaySdk.initialize({ countryCode });\n        this._clearpaySdk.redirect({ token: paymentMethod.clientToken });\n\n        return Promise.resolve();\n    }\n\n    private _isCountrySupported(countryCode: string): boolean {\n        return countryCode === 'GB';\n    }\n\n    private async _loadPaymentMethod(\n        gatewayId: string,\n        methodId: string,\n        options?: RequestOptions,\n    ): Promise<PaymentIntegrationSelectors> {\n        try {\n            return await this._paymentIntegrationService.loadPaymentMethod(gatewayId, {\n                ...options,\n                params: { ...options?.params, method: methodId },\n            });\n        } catch (error) {\n            if (error instanceof RequestError && error.body?.status === 422) {\n                throw new InvalidArgumentError(\n                    \"Clearpay can't process your payment for this order, please try another payment method\",\n                );\n            }\n\n            throw error;\n        }\n    }\n}\n","import { ScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    PaymentMethod,\n    PaymentMethodClientUnavailableError,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\nimport { isExperimentEnabled } from '@bigcommerce/checkout-sdk/utility';\n\nimport ClearpaySdk from './clearpay-sdk';\nimport ClearpayWindow from './clearpay-window';\n\nconst SCRIPTS_DEFAULT = {\n    PROD: '//portal.clearpay.co.uk/afterpay-async.js',\n    SANDBOX: '//portal.sandbox.clearpay.co.uk/afterpay-async.js',\n    HTTPS_SANDBOX: 'https://portal.sandbox.clearpay.co.uk/afterpay-async.js',\n    HTTPS_PROD: 'https://portal.clearpay.co.uk/afterpay-async.js',\n};\n\nconst CLEARPAY_HTTPS_PROD_SCRIPT_EXPERIMENT = 'PI-4555.clearpay_add_https_to_prod_script';\n\nexport default class ClearpayScriptLoader {\n    constructor(private _scriptLoader: ScriptLoader, public _window: ClearpayWindow = window) {}\n\n    async load(method: PaymentMethod, features = {}): Promise<ClearpaySdk> {\n        await this._scriptLoader.loadScript(this._getScriptUrl(method.config.testMode, features));\n\n        if (!this._window.AfterPay) {\n            throw new PaymentMethodClientUnavailableError();\n        }\n\n        return this._window.AfterPay;\n    }\n\n    private _getScriptUrl(testMode?: boolean, features = {}): string {\n        const httpsEnabled = isExperimentEnabled(\n            features,\n            CLEARPAY_HTTPS_PROD_SCRIPT_EXPERIMENT,\n            false,\n        );\n\n        if (testMode) {\n            return httpsEnabled ? SCRIPTS_DEFAULT.HTTPS_SANDBOX : SCRIPTS_DEFAULT.SANDBOX;\n        }\n\n        return httpsEnabled ? SCRIPTS_DEFAULT.HTTPS_PROD : SCRIPTS_DEFAULT.PROD;\n    }\n}\n","import { getScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport ClearpayPaymentStrategy from './clearpay-payment-strategy';\nimport ClearpayScriptLoader from './clearpay-script-loader';\n\nconst createClearpayPaymentStrategy: PaymentStrategyFactory<ClearpayPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new ClearpayPaymentStrategy(\n        paymentIntegrationService,\n        new ClearpayScriptLoader(getScriptLoader()),\n    );\n};\n\nexport default toResolvableModule(createClearpayPaymentStrategy, [\n    { gateway: 'clearpay' },\n    { id: 'clearpay' },\n]);\n","import {\n    isHostedInstrumentLike,\n    isVaultedInstrument,\n    OrderFinalizationNotRequiredError,\n    OrderPaymentRequestBody,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStatusTypes,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default class OffsitePaymentStrategy implements PaymentStrategy {\n    constructor(private _paymentIntegrationService: PaymentIntegrationService) {}\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment, ...order } = payload;\n        const orderPayload = this._shouldSubmitFullPayload(payment) ? payload : order;\n        const paymentData = payment && payment.paymentData;\n        const instrumentId =\n            (paymentData && isVaultedInstrument(paymentData) && paymentData.instrumentId) ||\n            undefined;\n        const shouldSaveInstrument =\n            (paymentData &&\n                isHostedInstrumentLike(paymentData) &&\n                paymentData.shouldSaveInstrument) ||\n            undefined;\n        const shouldSetAsDefaultInstrument =\n            (paymentData &&\n                isHostedInstrumentLike(paymentData) &&\n                paymentData.shouldSetAsDefaultInstrument) ||\n            undefined;\n\n        if (!payment) {\n            throw new PaymentArgumentInvalidError(['payment']);\n        }\n\n        const { methodId, gatewayId } = payment;\n\n        await this._paymentIntegrationService.submitOrder(orderPayload, options);\n        await this._paymentIntegrationService.initializeOffsitePayment({\n            methodId,\n            gatewayId,\n            instrumentId,\n            shouldSaveInstrument,\n            shouldSetAsDefaultInstrument,\n        });\n    }\n\n    async finalize(options?: PaymentRequestOptions): Promise<void> {\n        const state = this._paymentIntegrationService.getState();\n        const order = state.getOrder();\n        const status = state.getPaymentStatus();\n\n        if (\n            order &&\n            (status === PaymentStatusTypes.ACKNOWLEDGE || status === PaymentStatusTypes.FINALIZE)\n        ) {\n            await this._paymentIntegrationService.finalizeOrder(options);\n\n            return;\n        }\n\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    initialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    deinitialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    private _shouldSubmitFullPayload(payment?: OrderPaymentRequestBody): boolean {\n        // FIXME: A temporary workaround to support offsite payment methods\n        // where their return URL needs to be provided by the core app.\n        if (!payment) {\n            return false;\n        }\n\n        return payment.gatewayId === 'adyen' || payment.gatewayId === 'barclaycard';\n    }\n}\n","import {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport OffsitePaymentStrategy from './offsite-payment-strategy';\n\nconst createOffsitePaymentStrategy: PaymentStrategyFactory<OffsitePaymentStrategy> = (\n    paymentIntegrationService,\n) => new OffsitePaymentStrategy(paymentIntegrationService);\n\nexport default toResolvableModule(createOffsitePaymentStrategy, [{ type: 'PAYMENT_TYPE_HOSTED' }]);\n","export interface PaypalFundingTypeList {\n    CARD?: string;\n    CREDIT?: string;\n    PAYPAL?: string;\n    PAYLATER?: string;\n}\n\nexport interface PaypalButton {\n    render(options: PaypalButtonOptions, container: string): void;\n}\n\nexport interface PaypalButtonRender {\n    render(container: string): void;\n    isEligible(): boolean;\n}\n\nexport interface MessagingRender {\n    render(container: string): void;\n}\n\nexport interface MessagingOptions {\n    amount: number;\n    placement: string;\n}\n\nexport interface PaypalButtonOptions {\n    env?: string;\n    commit?: boolean;\n    style?: PaypalStyleOptions;\n    funding?: PaypalFundingType;\n    fundingSource?: string;\n    client?: PaypalClientToken;\n    payment?(data?: PaypalAuthorizeData, actions?: PaypalActions): Promise<any>;\n    onAuthorize?(data: PaypalAuthorizeData, actions?: PaypalActions): Promise<any>;\n    createOrder?(data?: PaypalAuthorizeData, actions?: PaypalActions): Promise<any>;\n    onApprove?(data?: PaypalAuthorizeData, actions?: PaypalActions): Promise<any>;\n}\n\nexport interface PaypalClientToken {\n    production?: string;\n    sandbox?: string;\n}\n\nexport interface PaypalFundingType {\n    allowed?: string[];\n    disallowed?: string[];\n}\n\nexport enum PaypalButtonStyleLayoutOption {\n    HORIZONTAL = 'horizontal',\n    VERTICAL = 'vertical',\n}\n\nexport enum PaypalButtonStyleSizeOption {\n    SMALL = 'small',\n    MEDIUM = 'medium',\n    LARGE = 'large',\n    RESPONSIVE = 'responsive',\n}\n\nexport enum PaypalButtonStyleColorOption {\n    GOLD = 'gold',\n    BLUE = 'blue',\n    SIlVER = 'silver',\n    BLACK = 'black',\n}\n\nexport enum PaypalButtonStyleLabelOption {\n    CHECKOUT = 'checkout',\n    PAY = 'pay',\n    BUYNOW = 'buynow',\n    PAYPAL = 'paypal',\n    CREDIT = 'credit',\n}\n\nexport enum PaypalButtonStyleShapeOption {\n    PILL = 'pill',\n    RECT = 'rect',\n}\n\nexport enum PaymentStatusTypes {\n    ACKNOWLEDGE = 'ACKNOWLEDGE',\n    FINALIZE = 'FINALIZE',\n    INITIALIZE = 'INITIALIZE',\n}\n\nexport interface PaypalStyleOptions {\n    layout?: PaypalButtonStyleLayoutOption;\n    size?: PaypalButtonStyleSizeOption;\n    color?: PaypalButtonStyleColorOption;\n    label?: PaypalButtonStyleLabelOption;\n    shape?: PaypalButtonStyleShapeOption;\n    tagline?: boolean;\n    fundingicons?: boolean;\n    height?: number;\n}\n\nexport interface PaypalActions {\n    payment: PaypalPaymentActions;\n    request: PaypalRequestActions;\n}\n\nexport interface PaypalPaymentActions {\n    get(id: string): Promise<PaypalPaymentPayload>;\n}\n\nexport interface PaypalRequestActions {\n    post(url: string, payload?: object, options?: object): Promise<{ id: string }>;\n}\n\nexport interface PaypalTransaction {\n    amount?: PaypalAmount;\n    payee?: PaypalPayee;\n    description?: string;\n    note_to_payee?: string;\n    item_list?: PaypalItemList;\n}\n\nexport interface PaypalItemList {\n    items?: PaypalItem[];\n    shipping_address?: PaypalAddress;\n}\n\nexport interface PaypalItem {\n    sku?: string;\n    name?: string;\n    description?: string;\n    quantity: string;\n    price: string;\n    currency: string;\n    tax?: string;\n}\n\nexport interface PaypalAmount {\n    currency: string;\n    total: string;\n}\n\nexport interface PaypalPayer {\n    payer_info: object;\n}\n\nexport interface PaypalPayee {\n    email?: string;\n    merchant_id?: string;\n}\n\nexport interface PaypalAddress {\n    line1: string;\n    line2?: string;\n    city?: string;\n    country_code: string;\n    postal_code?: string;\n    state?: string;\n    phone?: string;\n    type?: string;\n}\n\nexport interface PaypalPaymentPayload {\n    payment: PaypalPaymentPayload;\n    payer: PaypalPayer;\n    transactions?: PaypalTransaction[];\n}\n\nexport interface PaypalAuthorizeData {\n    payerId: string;\n    paymentId?: string;\n    billingToken?: string;\n    // the PayPal side of things uses uppercase ID instead of camel case Id\n    payerID?: string;\n    paymentID?: string;\n}\n\nexport interface PaypalExpressCheckout {\n    initXO(): void;\n    startFlow(url: string): void;\n    closeFlow(): void;\n    setup(merchantId: string, options: PaypalExpressCheckoutOptions): void;\n}\n\nexport interface PaypalExpressCheckoutOptions {\n    button: string;\n    environment: string;\n}\n\nexport interface PaypalHostWindow extends Window {\n    paypal?: PaypalSDK;\n}\n\nexport interface PaypalSDK {\n    Button: PaypalButton;\n    checkout: PaypalExpressCheckout;\n    FUNDING: PaypalFundingTypeList;\n    Messages(options: MessagingOptions): MessagingRender;\n    Buttons(options: PaypalButtonOptions): PaypalButtonRender;\n}\n","import { noop } from 'lodash';\n\nimport {\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentInitializeOptions,\n    PaymentIntegrationSelectors,\n    PaymentIntegrationService,\n    PaymentMethod,\n    PaymentRequestOptions,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { WithPaypalExpressPaymentInitializeOptions } from './paypal-express-payment-initialize-options';\nimport PaypalScriptLoader from './paypal-express-script-loader';\nimport { PaymentStatusTypes, PaypalHostWindow, PaypalSDK } from './paypal-express-types';\n\nexport default class PaypalExpressPaymentStrategy implements PaymentStrategy {\n    private paypalSdk?: PaypalSDK;\n    private paymentMethod?: PaymentMethod;\n    private useRedirectFlow = false;\n    private window: PaypalHostWindow;\n\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        private scriptLoader: PaypalScriptLoader,\n    ) {\n        this.window = window;\n    }\n\n    async initialize(\n        options: PaymentInitializeOptions & WithPaypalExpressPaymentInitializeOptions,\n    ): Promise<void> {\n        const state = this.paymentIntegrationService.getState();\n\n        this.paymentMethod = state.getPaymentMethodOrThrow(options.methodId);\n        this.useRedirectFlow =\n            (options.paypalexpress && options.paypalexpress.useRedirectFlow) === true;\n\n        const merchantId = this.paymentMethod.config.merchantId;\n\n        if (!this.isInContextEnabled() || !merchantId) {\n            throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n        }\n\n        const paypalSdk = await this.scriptLoader.loadPaypalSDK();\n\n        this.paypalSdk = paypalSdk;\n\n        this.paypalSdk.checkout.setup(merchantId, {\n            button: 'paypal-button',\n            environment: this.paymentMethod.config.testMode ? 'sandbox' : 'production',\n        });\n    }\n\n    deinitialize() {\n        if (this.isInContextEnabled() && this.paypalSdk) {\n            this.paypalSdk.checkout.closeFlow();\n            this.paypalSdk = undefined;\n        }\n\n        return Promise.resolve();\n    }\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions) {\n        let state: PaymentIntegrationSelectors;\n        let redirectUrl: string | undefined;\n        const paypal = this.paypalSdk;\n\n        if (this.isAcknowledgedOrFinalized()) {\n            await this.paymentIntegrationService.submitOrder(payload, options);\n\n            return;\n        }\n\n        if (!this.isInContextEnabled() || this.useRedirectFlow) {\n            state = await this.paymentIntegrationService.submitOrder(payload, options);\n            redirectUrl = state.getPaymentRedirectUrl();\n\n            if (redirectUrl && this.window.top) {\n                this.window.top.location.href = redirectUrl;\n            }\n\n            // We need to hold execution so the consumer does not redirect us somewhere else\n            return new Promise<never>(noop);\n        }\n\n        if (!paypal) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        paypal.checkout.initXO();\n\n        try {\n            state = await this.paymentIntegrationService.submitOrder(payload, options);\n        } catch (error) {\n            paypal.checkout.closeFlow();\n\n            return Promise.reject(error);\n        }\n\n        redirectUrl = state.getPaymentRedirectUrl();\n\n        if (redirectUrl) {\n            paypal.checkout.startFlow(redirectUrl);\n        }\n\n        // We need to hold execution so the consumer does not redirect us somewhere else\n        return new Promise<never>(noop);\n    }\n\n    async finalize(options?: PaymentRequestOptions) {\n        const state = this.paymentIntegrationService.getState();\n        const order = state.getOrder();\n\n        if (order && this.isAcknowledgedOrFinalized()) {\n            await this.paymentIntegrationService.finalizeOrder(options);\n\n            return Promise.resolve();\n        }\n\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    private isAcknowledgedOrFinalized(): boolean {\n        const state = this.paymentIntegrationService.getState();\n\n        return (\n            state.getPaymentStatus() === PaymentStatusTypes.ACKNOWLEDGE ||\n            state.getPaymentStatus() === PaymentStatusTypes.FINALIZE\n        );\n    }\n\n    private isInContextEnabled(): boolean {\n        return !!(this.paymentMethod && this.paymentMethod.config.merchantId);\n    }\n}\n","import { LoadScriptOptions, ScriptLoader } from '@bigcommerce/script-loader';\n\nimport { PaymentMethodClientUnavailableError } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { PaypalHostWindow, PaypalSDK } from './paypal-express-types';\n\nexport default class PaypalScriptLoader {\n    private window: PaypalHostWindow;\n\n    constructor(private scriptLoader: ScriptLoader) {\n        this.window = window;\n    }\n\n    async loadPaypalSDK(merchantId = ''): Promise<PaypalSDK> {\n        const scriptSrc = '//www.paypalobjects.com/api/checkout.min.js';\n        const options: LoadScriptOptions = {\n            async: true,\n            attributes: { 'data-merchant-id': merchantId },\n            ...(merchantId && {\n                attributes: { 'data-merchant-id': merchantId },\n            }),\n        };\n\n        await this.scriptLoader.loadScript(scriptSrc, options);\n\n        if (!this.window.paypal) {\n            throw new PaymentMethodClientUnavailableError();\n        }\n\n        return this.window.paypal;\n    }\n}\n","import { getScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport PaypalExpressPaymentStrategy from './paypal-express-payment-strategy';\nimport PaypalExpressScriptLoader from './paypal-express-script-loader';\n\nconst createPaypalExpressPaymentStrategy: PaymentStrategyFactory<PaypalExpressPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new PaypalExpressPaymentStrategy(\n        paymentIntegrationService,\n        new PaypalExpressScriptLoader(getScriptLoader()),\n    );\n};\n\nexport default toResolvableModule(createPaypalExpressPaymentStrategy, [\n    { id: 'paypalexpress', type: 'PAYMENT_TYPE_HOSTED' },\n    { id: 'paypalexpresscredit', type: 'PAYMENT_TYPE_HOSTED' },\n]);\n","export const INTERNAL_USE_ONLY =\n    'This API endpoint is for internal use only and may change in the future';\n","export const SDK_VERSION_HEADERS = { 'X-Checkout-SDK-Version': LIBRARY_VERSION };\n","import { FormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    CheckoutButtonInitializeOptions,\n    CheckoutButtonStrategy,\n    INTERNAL_USE_ONLY,\n    InvalidArgumentError,\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    PaymentIntegrationService,\n    SDK_VERSION_HEADERS,\n    StandardError,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { WithPaypalExpressButtonInitializeOptions } from './paypal-express-button-initialize-options';\nimport PaypalScriptLoader from './paypal-express-script-loader';\nimport {\n    PaypalActions,\n    PaypalAuthorizeData,\n    PaypalButtonStyleShapeOption,\n    PaypalButtonStyleSizeOption,\n    PaypalClientToken,\n    PaypalSDK,\n    PaypalStyleOptions,\n} from './paypal-express-types';\n\nexport default class PaypalButtonStrategy implements CheckoutButtonStrategy {\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        private paypalExpressScriptLoader: PaypalScriptLoader,\n        private formPoster: FormPoster,\n    ) {}\n\n    async initialize(\n        options: CheckoutButtonInitializeOptions & WithPaypalExpressButtonInitializeOptions,\n    ): Promise<void> {\n        const state = this.paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(options.methodId);\n\n        if (!options.paypal) {\n            throw new InvalidArgumentError();\n        }\n\n        if (!paymentMethod.config.merchantId) {\n            throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n        }\n\n        const paypalSDK = await this.paypalExpressScriptLoader.loadPaypalSDK(\n            paymentMethod.config.merchantId,\n        );\n\n        this.renderButton(options, paypalSDK);\n    }\n\n    deinitialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    private renderButton(\n        options: CheckoutButtonInitializeOptions & WithPaypalExpressButtonInitializeOptions,\n        paypalSDK: PaypalSDK,\n    ) {\n        const { containerId, methodId, paypal } = options;\n        const { allowCredit, clientId, onPaymentError, shouldProcessPayment, style } = paypal;\n\n        const state = this.paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(options.methodId);\n\n        if (!paymentMethod.config.merchantId) {\n            throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n        }\n\n        const merchantId = paymentMethod.config.merchantId;\n        const env = paymentMethod.config.testMode ? 'sandbox' : 'production';\n        const clientToken: PaypalClientToken = { [env]: clientId };\n        const fundingCreditOption = paypalSDK.FUNDING.CREDIT || 'credit';\n        const allowedSources = allowCredit ? [fundingCreditOption] : [];\n        const disallowedSources = !allowCredit ? [fundingCreditOption] : [];\n\n        return paypalSDK.Button.render(\n            {\n                env,\n                client: clientToken,\n                commit: shouldProcessPayment,\n                funding: {\n                    allowed: allowedSources,\n                    disallowed: disallowedSources,\n                },\n                style: this.getStyle(style),\n                payment: (_, actions) => this.setupPayment(merchantId, actions, onPaymentError),\n                onAuthorize: (data, actions) =>\n                    this.tokenizePayment(data, methodId, actions, shouldProcessPayment),\n            },\n            containerId,\n        );\n    }\n\n    private getStyle(style?: Omit<PaypalStyleOptions, 'height'>): PaypalStyleOptions {\n        const { color, fundingicons, label, layout, shape, size, tagline } = style || {};\n\n        return {\n            color,\n            fundingicons,\n            label,\n            layout,\n            shape: shape || PaypalButtonStyleShapeOption.RECT,\n            size: size === 'small' ? PaypalButtonStyleSizeOption.RESPONSIVE : size,\n            tagline,\n        };\n    }\n\n    private async setupPayment(\n        merchantId: string,\n        actions?: PaypalActions,\n        onError?: (error: StandardError) => void,\n    ): Promise<string> {\n        if (!actions) {\n            throw new NotInitializedError(NotInitializedErrorType.CheckoutButtonNotInitialized);\n        }\n\n        try {\n            const state = await this.paymentIntegrationService.loadDefaultCheckout();\n            const { id: cartId } = state.getCartOrThrow();\n            const host = state.getHost() || '';\n\n            const paymentRequest = await actions.request.post(\n                `${host}/api/storefront/payment/paypalexpress`,\n                { merchantId, cartId },\n                {\n                    headers: {\n                        'X-API-INTERNAL': INTERNAL_USE_ONLY,\n                        ...SDK_VERSION_HEADERS,\n                    },\n                },\n            );\n\n            return paymentRequest.id;\n        } catch (error) {\n            if (onError && error instanceof StandardError) {\n                onError(error);\n            }\n\n            throw error;\n        }\n    }\n\n    private async tokenizePayment(\n        data: PaypalAuthorizeData,\n        methodId: string,\n        actions?: PaypalActions,\n        shouldProcessPayment?: boolean,\n    ): Promise<void> {\n        if (!actions) {\n            throw new NotInitializedError(NotInitializedErrorType.CheckoutButtonNotInitialized);\n        }\n\n        if (!data.paymentID || !data.payerID) {\n            throw new MissingDataError(MissingDataErrorType.MissingPayment);\n        }\n\n        const state = this.paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(methodId);\n\n        const getPaymentData = await actions.payment.get(data.paymentID);\n\n        return this.formPoster.postForm('/checkout.php', {\n            payment_type: 'paypal',\n            provider: paymentMethod.id,\n            action: shouldProcessPayment ? 'process_payment' : 'set_external_checkout',\n            paymentId: data.paymentID,\n            payerId: data.payerID,\n            payerInfo: JSON.stringify(getPaymentData.payer.payer_info),\n        });\n    }\n}\n","import { createFormPoster } from '@bigcommerce/form-poster';\nimport { getScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    CheckoutButtonStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { PaypalExpressButtonStrategy, PaypalExpressScriptLoader } from './index';\n\nconst createPaypalExpressButtonStrategy: CheckoutButtonStrategyFactory<\n    PaypalExpressButtonStrategy\n> = (paymentIntegrationService) => {\n    return new PaypalExpressButtonStrategy(\n        paymentIntegrationService,\n        new PaypalExpressScriptLoader(getScriptLoader()),\n        createFormPoster(),\n    );\n};\n\nexport default toResolvableModule(createPaypalExpressButtonStrategy, [{ id: 'paypalexpress' }]);\n","import BrowserInfo from './browser-info';\n\nexport default function getBrowserInfo(): BrowserInfo {\n    const { navigator } = window;\n\n    let language: string;\n\n    if (navigator.language) {\n        language = navigator.language;\n    } else {\n        language = (navigator as any).userLanguage;\n    }\n\n    return {\n        color_depth: window.screen.colorDepth || 24,\n        java_enabled: typeof navigator.javaEnabled === 'function' ? navigator.javaEnabled() : false,\n        language,\n        screen_height: window.screen.height,\n        screen_width: window.screen.width,\n        time_zone_offset: new Date().getTimezoneOffset().toString(),\n    };\n}\n","import { FormPoster } from '@bigcommerce/form-poster';\nimport { some } from 'lodash';\n\nimport { CreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    getBrowserInfo,\n    isRequestError,\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderRequestBody,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStatusTypes,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default class SagePayPaymentStrategy extends CreditCardPaymentStrategy {\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        private _formPoster: FormPoster,\n    ) {\n        super(paymentIntegrationService);\n    }\n\n    execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment } = payload;\n\n        if (!payment) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        const { paymentData } = payment;\n\n        if (!paymentData) {\n            throw new MissingDataError(MissingDataErrorType.MissingPayment);\n        }\n\n        if (this._isThreeDSTwoExperimentOn()) {\n            const newPaymentData = {\n                ...paymentData,\n                browser_info: getBrowserInfo(),\n            };\n\n            if (payload.payment) {\n                payload.payment.paymentData = newPaymentData;\n            }\n        }\n\n        return super.execute(payload, options).catch((error: Error) => {\n            if (\n                !isRequestError(error) ||\n                !some(error.body.errors, { code: 'three_d_secure_required' })\n            ) {\n                return Promise.reject(error);\n            }\n\n            return new Promise(() => {\n                let payload;\n\n                if (this._isThreeDSTwoExperimentOn() && !error.body.three_ds_result.merchant_data) {\n                    payload = {\n                        creq: error.body.three_ds_result.payer_auth_request,\n                    };\n                } else {\n                    payload = {\n                        PaReq: error.body.three_ds_result.payer_auth_request,\n                        TermUrl: error.body.three_ds_result.callback_url,\n                        MD: error.body.three_ds_result.merchant_data,\n                    };\n                }\n\n                this._formPoster.postForm(\n                    error.body.three_ds_result.acs_url,\n                    payload,\n                    undefined,\n                    '_top',\n                );\n            });\n        });\n    }\n\n    finalize(options?: PaymentRequestOptions): Promise<void> {\n        const state = this.paymentIntegrationService.getState();\n        const order = state.getOrder();\n\n        if (order && state.getPaymentStatus() === PaymentStatusTypes.FINALIZE) {\n            this.paymentIntegrationService.finalizeOrder(options);\n        }\n\n        return super.finalize();\n    }\n\n    private _isThreeDSTwoExperimentOn(): boolean {\n        return (\n            this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings\n                .features['INT-4994.Opayo_3DS2'] === true\n        );\n    }\n}\n","import { createFormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport SagePayPaymentStrategy from './sage-pay-payment-strategy';\n\nconst createSagePayPaymentStrategy: PaymentStrategyFactory<SagePayPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new SagePayPaymentStrategy(paymentIntegrationService, createFormPoster());\n};\n\nexport default toResolvableModule(createSagePayPaymentStrategy, [{ id: 'sagepay' }]);\n"],"names":["MissingDataErrorType","NotInitializedErrorType","StandardError","Error","constructor","message","prototype","super","name","type","Object","setPrototypeOf","this","__proto__","captureStackTrace","stack","MissingBillingAddress","MissingCart","MissingCheckout","MissingConsignments","MissingCustomer","MissingCheckoutConfig","MissingOrder","MissingOrderConfig","MissingOrderId","MissingPayment","MissingPaymentId","MissingPaymentInstrument","MissingPaymentMethod","MissingPaymentRedirectUrl","MissingPaymentStatus","MissingPaymentToken","MissingShippingAddress","MissingDataError","subtype","InvalidArgumentError","PaymentArgumentInvalidError","invalidFields","join","OrderFinalizationNotCompletedError","CheckoutButtonNotInitialized","CustomerNotInitialized","PaymentNotInitialized","ShippingNotInitialized","SpamProtectionNotInitialized","NotInitializedError","DEFAULT_RESPONSE","body","headers","status","RequestError","response","errors","SCRIPTS_DEFAULT","SCRIPTS_US","AfterpayPaymentStrategy","_paymentIntegrationService","_afterpayScriptLoader","initialize","options","state","getState","paymentMethod","getPaymentMethod","methodId","gatewayId","currencyCode","getCart","currency","code","countryCode","_mapCurrencyToISO2","withHttps","features","experimentName","fallbackValue","getStoreConfigOrThrow","checkoutSettings","_afterpaySdk","load","deinitialize","Promise","resolve","execute","payload","payment","useStoreCredit","applyStoreCredit","_loadPaymentMethod","validateCheckout","getCheckout","_redirectToAfterpay","finalize","getPaymentId","config","getContextConfig","token","paymentPayload","providerId","paymentData","nonce","submitOrder","submitPayment","error","forgetCheckout","loadPaymentMethods","clientToken","redirect","AUD","NZD","CAD","USD","loadPaymentMethod","params","method","PaymentMethodClientUnavailableError","PROD","SANDBOX","HTTPS_PROD","HTTPS_SANDBOX","AfterpayScriptLoader","_scriptLoader","testMode","scriptURI","_getScriptURI","loadScript","then","window","AfterPay","module","paymentIntegrationService","createScriptLoader","resolveIds","gateway","id","assign","HostedFieldType","__webpack_require__","toResolvableModule","d","exports","definition","key","o","defineProperty","enumerable","get","obj","prop","hasOwnProperty","call","PaymentMethodFailedError","guard","value","errorFactory","BlueSnapDirect3ds","blueSnapSdk","_blueSnapSdk","initialize3ds","cardData","_getBlueSnapSdk","reject","threeDsPaymentsSetup","sdkResponse","threeDSecure","threeDSecureReferenceId","threeDsPaymentsSubmitData","isHostedInstrumentLike","instrument","shouldSaveInstrument","shouldSetAsDefaultInstrument","isVaultedInstrument","Boolean","instrumentId","OrderFinalizationNotRequiredError","CardCode","CardCodeVerification","CardExpiry","CardName","CardNumber","CardNumberVerification","CardExpiryVerification","isHostedCardFieldOptionsMap","fields","isHostedStoredCardFieldOptionsMap","BlueSnapDirectCardType","BlueSnapDirectEventOrigin","BlueSnapDirectErrorDescription","BlueSnapDirectErrorCode","BlueSnapDirectHostedFieldTagId","BlueSnapDirectCreditCardPaymentStrategy","_blueSnapDirectHostedForm","_blueSnapDirect3ds","creditCard","bigpayToken","is3dsEnabled","getPaymentMethodOrThrow","_paymentFieldsToken","_shouldUseHostedFields","form","cardNumberVerification","attach","_getPaymentFieldsToken","pfToken","bluesnapSubmitedForm","validate","submit","_getBlueSnapDirectThreeDSecureData","last4","brand","getCardInstrumentOrThrow","previouslyUsedCard","last4Digits","ccType","toUpperCase","deviceSessionId","formattedPayload","credit_card_token","JSON","stringify","cardHolderName","vault_payment_instrument","set_as_default_stored_instrument","detach","getBillingAddress","getShippingAddress","getCustomer","getCheckoutOrThrow","getCartOrThrow","billingAddress","shippingAddress","email","phone","amount","outstandingBalance","billingFirstName","firstName","billingLastName","lastName","billingCountry","billingCity","city","address1","address2","trim","billingZip","postalCode","shippingFirstName","shippingLastName","shippingCountry","shippingCity","shippingZip","PaymentInvalidFormError","details","AMEX","CHINA_UNION_PAY","DINERS","DISCOVER","JCB","MASTERCARD","UNKNOWN","VISA","ON_BLUR","ON_SUBMIT","EMPTY","INVALID","THREE_DS_NOT_ENABLED","CC_NOT_SUPORTED","ERROR_403","ERROR_404","ERROR_500","INVALID_OR_EMPTY","SESSION_EXPIRED","THREE_DS_AUTH_FAILED","THREE_DS_CLIENT_ERROR","THREE_DS_MISSING_FIELDS","TOKEN_EXPIRED","TOKEN_NOT_ASSOCIATED","TOKEN_NOT_FOUND","BlueSnapHostedFieldType","CREDIT_CARD_ERRORS","empty","fieldType","invalid","BlueSnapDirectHostedForm","_nameOnCardInput","_hostedInputValidator","initializeValidationFields","paymentFieldsToken","enable3DS","callbacksAndStyles","_onValidate","onValidate","_setCustomBlueSnapAttributes","_setCustomStoredCardsBlueSnapAttributes","_getHostedPaymentFieldsOptions","hostedPaymentFieldsCreate","cardName","accessibilityLabel","placeholder","results","isValid","entries","reduce","result","map","threeDSecureData","shouldSendName","hostedPaymentFieldsSubmitData","data","_isBlueSnapDirectCallbackError","statusCode","errorDescription","getValue","onFocus","onBlur","onCardTypeChange","onEnter","styles","onFieldEventHandler","setupComplete","_usetUiEventCallback","onError","_handleError","onType","_tagId","cardType","onValid","tagId","ccnPlaceHolder","cardNumber","cvvPlaceHolder","cardCode","expPlaceHolder","cardExpiry","style","_mapStyles","default","input","focus","selector","declaration","declarationBlock","property","kebabCase","errorCode","eventOrigin","includes","callback","cardNumberContainer","document","getElementById","containerId","cardExpiryContainer","cardCodeContainer","cardNameContainer","dataset","bluesnap","cardCodeVerification","BlueSnapHostedInputValidator","_errors","_updateErrors","values","every","errorData","length","BluesnapDirectNameOnCardInput","_style","_create","_getInput","addEventListener","_handleFocus","_handleBlur","_handleEnter","setAttribute","querySelector","appendChild","_input","remove","_applyStyles","t","target","HTMLInputElement","test","allowedStyle","color","fontFamily","fontSize","fontWeight","styleKeys","keys","field","forEach","_configureInput","autocomplete","inputMode","maxLength","backgroundColor","border","height","margin","outline","padding","width","createElement","BlueSnapDirectSdkEnv","PRODUCTION","BlueSnapDirectScriptLoader","_window","getScriptLoader","BlueSnapDirectAPMPaymentStrategy","_formatePaymentPayload","_isBlueSnapDirectRedirectResponse","providerData","provider_data","parse","frameUrl","additional_action_required","redirect_url","partialValue","merchantid","providerDataQuery","URLSearchParams","toString","location","replace","ecp","account_number","accountNumber","account_type","accountType","shopper_permission","shopperPermission","routing_number","routingNumber","companyName","company_name","sepa_direct_debit","iban","first_name","last_name","ideal","bic","pay_by_bank","partialResponse","partialBody","CancellablePromise","promise","cancellable","_","cancel","race","PaymentMethodCancelledError","PaymentStatusTypes","ACKNOWLEDGE","FINALIZE","INITIALIZE","BlueSnapV2PaymentStrategy","orderRequest","_initializeOptions","onLoad","frame","_createIframe","noop","initializeOffsitePayment","order","getOrder","getPaymentStatus","finalizeOrder","bluesnapv2","iframe","CreditCardPaymentStrategy","_isHostedPaymentFormEnabled","_shouldRenderHostedForm","_executeWithHostedForm","_executeWithoutHostedForm","_isHostedFieldAvailable","formOptions","paymentSettings","bigpayBaseUrl","host","createHostedForm","_hostedForm","isHostedFormEnabled","isNil","CBAMPGSPaymentStrategy","cbaMGPSScriptLoader","sessionId","initializationData","merchantId","isTestModeFlagEnabled","threeDSjs","locale","getLocale","configure","isConfigured","configuration","userLanguage","wsVersion","newPaymentData","catch","some","retryState","storeProfile","storeId","orderId","three_ds_result","transactionId","initiateAuthentication","msg","gatewayRecommendation","restApiResponse","transaction","authenticationStatus","authenticatePayer","attempt","_resolve","cause","setTimeout","fullScreenRedirect","CBAMPGSScriptLoader","ThreeDS","AdditionalActionType","OffsiteRedirect","CheckoutComCustomPaymentStrategy","_processResponse","loadCurrentOrder","additionalActionRequired","_performRedirect","CheckoutComFawryPaymentStrategy","_createFormattedPayload","fawryPaymentData","customerMobile","customerEmail","isThreeDSecureRequiredError","CheckoutComCreditCardPaymentStrategy","formPoster","_handleThreeDSecure","acs_url","payer_auth_request","callback_url","merchant_data","postForm","PaReq","TermUrl","MD","createFormPoster","CheckoutComSEPAPaymentStrategy","CheckoutComiDealPaymentStrategy","DOCUMENT_SUPPORTED_APMS","CheckoutComAPMPaymentStrategy","ccDocument","indexOf","ClearpayPaymentStrategy","_clearpayScriptLoader","_clearpaySdk","isStoreCreditApplied","getBillingAddressOrThrow","_isCountrySupported","_redirectToClearpay","ClearpayScriptLoader","_getScriptUrl","httpsEnabled","e","OffsitePaymentStrategy","orderPayload","_shouldSubmitFullPayload","PaypalButtonStyleLayoutOption","PaypalButtonStyleSizeOption","PaypalButtonStyleColorOption","PaypalButtonStyleLabelOption","PaypalButtonStyleShapeOption","HORIZONTAL","VERTICAL","SMALL","MEDIUM","LARGE","RESPONSIVE","GOLD","BLUE","SIlVER","BLACK","CHECKOUT","PAY","BUYNOW","PAYPAL","CREDIT","PILL","RECT","PaypalExpressPaymentStrategy","scriptLoader","useRedirectFlow","paypalexpress","isInContextEnabled","paypalSdk","loadPaypalSDK","checkout","setup","button","environment","closeFlow","redirectUrl","paypal","isAcknowledgedOrFinalized","getPaymentRedirectUrl","top","href","initXO","startFlow","PaypalScriptLoader","async","attributes","SDK_VERSION_HEADERS","PaypalButtonStrategy","paypalExpressScriptLoader","paypalSDK","renderButton","allowCredit","clientId","onPaymentError","shouldProcessPayment","env","fundingCreditOption","FUNDING","allowedSources","disallowedSources","Button","render","client","commit","funding","allowed","disallowed","getStyle","actions","setupPayment","onAuthorize","tokenizePayment","fundingicons","label","layout","shape","size","tagline","loadDefaultCheckout","cartId","getHost","request","post","paymentID","payerID","getPaymentData","payment_type","provider","action","paymentId","payerId","payerInfo","payer","payer_info","getBrowserInfo","navigator","language","color_depth","screen","colorDepth","java_enabled","javaEnabled","screen_height","screen_width","time_zone_offset","Date","getTimezoneOffset","SagePayPaymentStrategy","_formPoster","_isThreeDSTwoExperimentOn","browser_info","creq"],"sourceRoot":""}