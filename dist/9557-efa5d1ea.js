"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[9557],{63582(e,t,r){r.d(t,{A:()=>i});var n=r(31635),o=r(70355);const i=(0,r(19285).A)((({checkoutService:{deinitializeCustomer:e,initializeCustomer:t},checkoutButtonContainerClass:r,containerId:i,methodId:a,onUnhandledError:d,onWalletButtonClick:c,additionalInitializationOptions:l,integrations:s})=>((0,o.useEffect)((()=>((0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t({methodId:a,integrations:s,[a]:Object.assign({container:i,onUnhandledError:d,onClick:()=>c(a)},l)})}catch(e){"function"==typeof d&&e instanceof Error&&d(e)}})),()=>{(0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield e({methodId:a})}catch(e){"function"==typeof d&&e instanceof Error&&d(e)}}))})),[]),o.createElement("div",{className:r,"data-test":i,id:i}))),[])},59713(e,t,r){r.d(t,{A:()=>o});var n=r(69440);function o(e,t,r){const o=window.getComputedStyle(e,r);return t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:o.getPropertyValue((0,n.kebabCase)(t))})),{})}},47459(e,t,r){r.d(t,{A:()=>m});var n=r(70355),o=r(90767),i=r(49655),a=r(88186),d=r(30680),c=r(97429),l=r(2224),s=r(14456);const m=({appearFocused:e,id:t,name:r})=>{const m=(0,n.useCallback)((()=>n.createElement(n.Fragment,null,n.createElement(a.A,{additionalClassName:"has-icon",appearFocused:e,id:t}),n.createElement(s.A,null))),[t,e]),u=(0,n.useMemo)((()=>n.createElement(n.Fragment,null,n.createElement(i.A,{id:"payment.credit_card_cvv_label"}),n.createElement(c.A,{placement:"top-start",tooltip:n.createElement(o.A,null)},n.createElement("span",{className:"has-tip"},n.createElement(l.A,null))))),[]);return n.createElement(d.A,{additionalClassName:"form-ccFields-field--ccCvv",input:m,labelContent:u,name:r})}},12929(e,t,r){r.d(t,{A:()=>d});var n=r(70355),o=r(49655),i=r(88186),a=r(30680);const d=({appearFocused:e,id:t,name:r})=>{const d=(0,n.useCallback)((()=>n.createElement(i.A,{appearFocused:e,id:t})),[t,e]);return n.createElement(a.A,{additionalClassName:"form-field--ccExpiry",input:d,labelContent:n.createElement(o.A,{id:"payment.credit_card_expiration_label"}),name:r})}},36659(e,t,r){r.d(t,{A:()=>c});var n=r(70355),o=r(49655),i=r(88186),a=r(30680),d=r(14456);const c=({appearFocused:e,id:t,name:r})=>{const c=(0,n.useCallback)((()=>n.createElement(n.Fragment,null,n.createElement(i.A,{additionalClassName:"has-icon",appearFocused:e,id:t}),n.createElement(d.A,null))),[t,e]);return n.createElement(a.A,{additionalClassName:"form-field--ccNumber",input:c,labelContent:n.createElement(o.A,{id:"payment.credit_card_number_label"}),name:r})}},98363(e,t,r){r.d(t,{A:()=>c});var n=r(70355),o=r(49655),i=r(36659),a=r(47459),d=r(12929);const c=({cardCodeId:e,cardNumberId:t,cardExpiryId:r,focusedFieldType:c})=>n.createElement(n.Fragment,null,t&&n.createElement("p",null,n.createElement("strong",null,n.createElement(o.A,{id:"payment.instrument_trusted_shipping_address_title_text"})),n.createElement("br",null),n.createElement(o.A,{id:"payment.instrument_trusted_shipping_address_text"})),n.createElement("div",{className:"form-ccFields"},t&&n.createElement(i.A,{appearFocused:"cardNumber"===c,id:t,name:"hostedForm.errors.cardNumberVerification"}),e&&n.createElement(a.A,{appearFocused:"cardCode"===c,id:e,name:"hostedForm.errors.cardCodeVerification"}),r&&n.createElement(d.A,{appearFocused:"cardExpiry"===c,id:r,name:"hostedForm.errors.cardExpiryVerification"})))},39527(e,t,r){r.d(t,{i:()=>s});var n=r(31635),o=r(69440),i=r(70355),a=r(82804),d=r(48407),c=r(31448),l=r(98363);const s=({checkoutState:e,method:t,language:r,paymentForm:s})=>{const{setFieldTouched:m,setFieldValue:u,setSubmitted:p,submitForm:b}=s,{config:h}=t,{cardCode:f}=h,g=f||null===f,y=(0,d.A)(e),v=(0,c.A)(e),C=(0,i.useCallback)((e=>`${(0,o.compact)([t.gateway,t.id]).join("-")}-${e}`),[t]),[E,I]=(0,i.useState)();return{getHostedStoredCardValidationFieldset:(0,i.useCallback)((e=>{const r=!!e&&v(e,t),n=!!e&&y(e,t);return i.createElement(l.A,{cardCodeId:n?C("ccCvv"):void 0,cardNumberId:r?C("ccNumber"):void 0,focusedFieldType:E})}),[E,C,y,v,t]),getHostedFormOptions:(0,i.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const n=["color","fontFamily","fontSize","fontWeight"],i=!!e&&v(e,t),d=!!e&&y(e,t);let c;return e?d?c=C("ccCvv"):i&&(c=C("ccNumber")):c=C("ccNumber"),{fields:e?{cardCodeVerification:d&&e?{accessibilityLabel:r.translate("payment.credit_card_cvv_label"),containerId:C("ccCvv"),instrumentId:e.bigpayToken}:void 0,cardNumberVerification:i&&e?{accessibilityLabel:r.translate("payment.credit_card_number_label"),containerId:C("ccNumber"),instrumentId:e.bigpayToken}:void 0}:{cardCode:g?{accessibilityLabel:r.translate("payment.credit_card_cvv_label"),containerId:C("ccCvv")}:void 0,cardExpiry:{accessibilityLabel:r.translate("payment.credit_card_expiration_label"),containerId:C("ccExpiry"),placeholder:r.translate("payment.credit_card_expiration_placeholder_text")},cardName:{accessibilityLabel:r.translate("payment.credit_card_name_label"),containerId:C("ccName")},cardNumber:{accessibilityLabel:r.translate("payment.credit_card_number_label"),containerId:C("ccNumber")}},styles:c?{default:yield(0,a.A)(c,n),error:yield(0,a.A)(c,n,a.S.Error),focus:yield(0,a.A)(c,n,a.S.Focus)}:{},onBlur:({fieldType:e})=>{E===e&&I(void 0)},onCardTypeChange:({cardType:e})=>{u("hostedForm.cardType",e)},onEnter:()=>{p(!0),b()},onFocus:({fieldType:e})=>{I(e)},onValidate:({errors:e={}})=>{(0,o.forIn)(e,((e=[],t)=>{var r,n;const o=`hostedForm.errors.${t}`;u(o,null!==(n=null===(r=e[0])||void 0===r?void 0:r.type)&&void 0!==n?n:""),e[0]&&m(o)}))}}}))),[E,C,g,y,v,r,t,m,u,p,b])}}},89799(e,t,r){r.d(t,{A:()=>v});var n=r(31635),o=r(69440),i=r(70355),a=r(52137),d=r(43125),c=r(11474),l=r(62677),s=r(40646),m=r(68801),u=r(3375),p=r.n(u),b=r(72769),h=r(49655);const f=({buttonId:e,shouldShowEditButton:t})=>{if(t){const t=i.createElement(h.A,{id:"remote.select_different_card_action"});return i.createElement("p",null,i.createElement("button",{className:p()("stepHeader","widget-link-amazonpay"),id:e,onClick:(0,b.A)(),type:"button"},t))}return null},g=({shouldShowDescriptor:e,paymentDescriptor:t})=>e&&t?i.createElement("div",{className:"payment-descriptor"},t):null,y=({additionalContainerClassName:e,containerId:t,hideContentWhenSignedOut:r,hideWidget:n,isSignInRequired:o,isSignedIn:a,method:d,renderCustomPaymentForm:c,shouldRenderCustomInstrument:l,shouldShowCreditCardFieldset:s})=>i.createElement("div",{className:p()("widget",`widget--${d.id}`,"payment-widget",l?"":e),id:t,style:{display:r&&o&&!a||!s||n?"none":void 0},tabIndex:-1},l&&c&&c()),v=({instruments:e,hideWidget:t=!1,isInitializing:r=!1,isAccountInstrument:u,isInstrumentFeatureAvailable:p,isLoadingInstruments:b,shouldHideInstrumentExpiryDate:h=!1,shouldShow:v=!0,hideVerificationFields:C,method:E,storedCardValidationSchema:I,isPaymentDataRequired:k,setValidationSchema:S,loadInstruments:A,onUnhandledError:_=o.noop,deinitializeCustomer:w,deinitializePayment:F,setSubmit:N,initializeCustomer:z,initializePayment:x,signInCustomer:O,isSignedIn:P,isSignInRequired:$,isInstrumentCardNumberRequired:R,validateInstrument:T,containerId:V,hideContentWhenSignedOut:B=!1,renderCustomPaymentForm:j,additionalContainerClassName:W,shouldRenderCustomInstrument:D=!1,paymentDescriptor:L,shouldShowDescriptor:q,shouldShowEditButton:U,buttonId:M,setFieldValue:H})=>{const[G,J]=(0,i.useState)(!1),[K,Q]=(0,i.useState)(void 0),X=(0,i.useRef)(e);(0,i.useEffect)((()=>{X.current=e}),[e]);const Y=(0,i.useCallback)((()=>{if(G)return;const e=X.current.find((e=>e.defaultInstrument))||X.current[0];return e?e.bigpayToken:void 0}),[G]),Z=(0,i.useCallback)((()=>{const e=K||Y();return(0,o.find)(X.current,{bigpayToken:e})}),[K,Y]),ee=(0,i.useCallback)((()=>{if(!k)return null;const e=Z();return p&&e&&I||null}),[Z,p,k,I]),te=(0,i.useCallback)(((e,t)=>!e&&(0,a.T)(t)?t:void 0),[]),re=(0,i.useCallback)((t=>{if(0===e.length)return J(!0),Q(void 0),void H("instrumentId","");if(K===t){const e=Y();Q(e),H("instrumentId",e)}}),[e,K,Y]),ne=(0,i.useCallback)((()=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){J(!0),Q(void 0),F&&(yield F({gatewayId:E.gateway,methodId:E.id})),x&&(yield x({gatewayId:E.gateway,methodId:E.id}))}))),[E,F,x]),oe=(0,i.useCallback)((e=>{J(!1),Q(e)}),[]),ie=(0,i.useCallback)((()=>{const t=K||Y(),r=(0,o.find)(e,{bigpayToken:t});if(r){(0,d.A)(r);const e=R(r,E);if(C)return;if(T)return T(e,r)}}),[K,Y,e,E,C,T]),ae=()=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const e=X.current;if(!k)return void N(E,null);if($&&!P)return N(E,O||null),z?z({methodId:E.id}):void 0;let t;if(N(E,null),!G){const r=K||Y(),n=e.find((e=>e.bigpayToken===r))||e[0];n&&(0,d.a)(n)&&(t=n)}return x?x({gatewayId:E.gateway,methodId:E.id},t):void 0})),de=K||Y(),ce=de&&e.find((e=>e.bigpayToken===de))||e[0],le=e.filter((e=>!(0,a.T)(e))),se=e.filter((e=>(0,a.T)(e))),me=p&&e.length>0,ue=!me||G,pe=(r||b)&&!t,be=ce?te(G,ce):void 0,he=e[0]&&(0,a.T)(e[0]);(0,i.useEffect)((()=>((0,n.__awaiter)(void 0,void 0,void 0,(function*(){S(E,ee());try{p&&(yield null==A?void 0:A()),yield ae()}catch(e){e instanceof Error&&_(e)}})),()=>{(0,n.__awaiter)(void 0,void 0,void 0,(function*(){S(E,null),N(E,null);try{F&&(yield F({gatewayId:E.gateway,methodId:E.id})),w&&(yield w({methodId:E.id}))}catch(e){e instanceof Error&&_(e)}}))})),[]);const fe=(0,i.useRef)(!0),ge=(0,i.useRef)(e.length),ye=(0,i.useRef)(k),ve=(0,i.useRef)(K);return(0,i.useEffect)((()=>{if(fe.current)return void(fe.current=!1);S(E,ee());(ve.current!==K||Number(ge.current)>0&&0===e.length||ye.current!==k)&&(ve.current=K,ge.current=e.length,ye.current=k,(0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{F&&(yield F({gatewayId:E.gateway,methodId:E.id})),yield ae()}catch(e){e instanceof Error&&_(e)}})))}),[K,e,k]),v?i.createElement(m.A,{hideContentWhenLoading:!0,isLoading:pe},i.createElement("div",{className:"paymentMethod--hosted"},he&&me&&i.createElement(c.A,{instruments:se,onSelectInstrument:oe,onUseNewInstrument:ne,selectedInstrument:be}),!he&&me&&i.createElement(l.A,{instruments:le,onDeleteInstrument:re,onSelectInstrument:oe,onUseNewInstrument:ne,selectedInstrumentId:de,shouldHideExpiryDate:h,validateInstrument:ie()}),i.createElement(g,{paymentDescriptor:L,shouldShowDescriptor:q}),i.createElement(y,{additionalContainerClassName:W,containerId:V,hideContentWhenSignedOut:B,hideWidget:t,isSignInRequired:$,isSignedIn:P,method:E,renderCustomPaymentForm:j,shouldRenderCustomInstrument:D,shouldShowCreditCardFieldset:ue}),p&&i.createElement(s.A,{instrumentId:de,instruments:e,isAccountInstrument:Boolean(u||he)}),i.createElement(f,{buttonId:M,shouldShowEditButton:U}))):i.createElement("div",{style:{display:"none"}})}},82804(e,t,r){r.d(t,{A:()=>m,S:()=>n});var n,o=r(69440),i=r(70355),a=r(54622),d=r(59713),c=r(9343),l=r(85216),s=r(10156);function m(e,t,r=n.Default){const m=document.createElement("div"),u=document.getElementById(e);if(!u)throw new Error("Unable to retrieve input styles as the provided container ID is not valid.");return u.appendChild(m),new Promise((e=>{a.render(i.createElement(c.Ay.Provider,{value:{isSubmitted:!0,setSubmitted:o.noop}},i.createElement(l.A,{hasError:r===n.Error},i.createElement(s.A,{appearFocused:r===n.Focus,ref:r=>{r&&(e((0,d.A)(r,t)),a.unmountComponentAtNode(m),m.parentElement&&m.parentElement.removeChild(m))}}))),m)}))}!function(e){e.Default="default",e.Error="error",e.Focus="focus"}(n||(n={}))},29557(e,t,r){r.d(t,{StripeLinkV2Button:()=>R,StripeOCSPaymentMethod:()=>C,StripeUPEPaymentMethod:()=>E,StripeV3PaymentMethod:()=>O});var n=r(31635),o=r(60269),i=r(69440),a=r(70355),d=r(55150),c=r(89799),l=r(48407),s=r(31448),m=r(19285),u=r(32312),p=r(17080),b=r(59713);const h={default:.66,themeV2:.36},f=(e,t,r)=>{const n=document.querySelector(e);return n?(0,b.A)(n,t,r):{}},g=(e=0)=>"number"!=typeof e?parseFloat(e):e,y=(e='link[href*="font"]')=>{const t=document.querySelectorAll(e),r=[];return t.forEach((e=>{const t=null==e?void 0:e.getAttribute("href");t&&r.push({cssSrc:t})})),r},v=(e,t="default")=>{const r="18px",n="13px",o=h[t],a=f(`#${e}--input`,["color","background-color","border-color","box-shadow","font-family"]),d=f(`#${e}--label`,["color"]),c=f(`#${e}--error`,["color"]),l=f(`#${e}--accordion-header .form-label`,["color","font-size","font-family","font-weight","padding-top","padding-right","padding-bottom"]),s=f(`#${e}--accordion-header`,["background-color"]),m=f(`#${e}--accordion-header-selected`,["background-color","border-color","margin-bottom","margin-top"]),u=f(`#${e}--accordion-header.optimizedCheckout-form-checklist-item`,["border-bottom","border-top","border-left","border-right","border-color","border-radius"]),{color:p,"font-size":b,"font-family":y,"font-weight":v,"padding-top":C=n,"padding-right":E=r,"padding-bottom":I=n}=l,k=(0,i.isEmpty)(l)?void 0:`${C} ${E} ${I} ${r}`,S=f(`#${e}--accordion-header .form-label`,["border-color","border-width","width","background-color"],"::before"),A=f(`#${e}--accordion-header .form-label`,["border-color","border-width","width","background-color"],"::after"),_=f(`#${e}--accordion-header-selected .form-label`,["border-color","background-color"],"::before");let w=f(".form-checklist-header--selected .form-label",["border-color","background-color","width","transform"],"::after");(0,i.isEmpty)(w)&&(w=f(`#${e}--accordion-header-selected .form-label`,["border-color","background-color","width","transform"],"::after"));const F=w.width||S.width,N=((e="")=>{const t=/matrix\(([^)]+)\)/.exec(e);if(!t)return;return t[1].split(",").map((e=>parseFloat(e.trim())))[0]})(w.transform)||o,z=(e=>{const{radioIconOuterWidth:t=26,radioIconOuterStrokeWidth:r=1,radioIconInnerWidth:n=17}=e||{},o=g(t),i=g(r),a=g(n);return{outerWidth:`${(o/.88).toFixed(2)}px`,outerStrokeWidth:`${(i/o*88).toFixed(2)}px`,innerRadius:(a/o*88/2).toFixed(2)}})({radioIconOuterWidth:S.width,radioIconOuterStrokeWidth:S["border-width"],radioIconInnerWidth:F&&g(F)*N});return{variables:{colorPrimary:a["box-shadow"],colorBackground:a["background-color"],colorText:d.color,colorDanger:c.color,colorTextSecondary:d.color,colorTextPlaceholder:a.color,colorIcon:a.color,fontFamily:y||a["font-family"]},rules:{".Input":{borderColor:a["border-color"],color:a.color,boxShadow:a["box-shadow"]},".AccordionItem":{borderRadius:u["border-radius"],borderTop:u["border-top"],borderRight:u["border-right"],borderBottom:u["border-bottom"],borderLeft:u["border-left"],borderColor:u["border-color"],marginBottom:m["margin-bottom"],marginTop:m["margin-top"],backgroundColor:s["background-color"],boxShadow:"none",fontSize:b,fontWeight:v,color:p,padding:k},".AccordionItem:hover":{backgroundColor:m["background-color"],color:p},".AccordionItem--selected":{fontWeight:"bold",color:p,backgroundColor:m["background-color"],borderColor:m["border-color"]},".TabLabel":{color:p},".RadioIcon":{width:z.outerWidth},".RadioIconInner":{r:z.innerRadius,fill:A["background-color"]},".RadioIconOuter":{strokeWidth:z.outerStrokeWidth,stroke:S["border-color"],fill:S["background-color"]},".RadioIconInner--checked":{r:z.innerRadius,fill:w["background-color"]},".RadioIconOuter--checked":{stroke:_["border-color"],fill:_["background-color"]}}}},C=(0,m.A)((e=>{var{paymentForm:t,checkoutState:r,checkoutService:m,method:b,onUnhandledError:h=i.noop}=e,f=(0,n.__rest)(e,["paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const g=(0,a.useRef)(),C=(0,a.useRef)(),{onToggle:E,selectedItemId:I}=(0,a.useContext)(u.A),[k,S]=(0,a.useState)(I),[A,_]=(0,a.useState)(!1),{themeV2:w}=(0,d.w)(),F=`${b.gateway}-${b.id}`,N=`${F}-component-field`,z=t;(0,a.useEffect)((()=>{C.current&&(clearTimeout(C.current),C.current=void 0),k&&I!==k&&(C.current=setTimeout((()=>{E(k)}),100))}),[E]),(0,a.useEffect)((()=>{var e;I!==F&&(S(I),null===(e=g.current)||void 0===e||e.call(g))}),[I,F]),(0,a.useEffect)((()=>{k===F&&E(k)}),[k,F]);const x=(0,a.useCallback)((()=>{z.hidePaymentSubmitButton(b,!1)}),[z,b]),{hidePaymentSubmitButton:O,disableSubmit:P,setFieldValue:$,setSubmit:R,setValidationSchema:T}=t,V=r.data.getInstruments(b)||[],{data:{getCheckout:B,isPaymentDataRequired:j},statuses:{isLoadingInstruments:W}}=r,D=B(),{initializationData:{isCustomChecklistItem:L}}=b,q=(0,a.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){_(!0);const t=w?"themeV2":void 0;return m.initializePayment(Object.assign(Object.assign({},e),{integrations:[o.S1,o.vd],stripeocs:{containerId:N,layout:{type:L?"accordion":"auto",defaultCollapsed:I!==F,radios:!0,linkInAccordion:!0,spacedAccordionItems:!!w,visibleAccordionItemsCount:0},appearance:v(N,t),fonts:y(),onError:h,render:x,paymentMethodSelect:S,handleClosePaymentMethod:e=>{g.current=e},togglePreloader:_}}))}))),[N,I,F,L,w,m,h,x,S,_]),U=(0,a.useCallback)((e=>m.initializeCustomer(Object.assign(Object.assign({},e),{integrations:[o.BK]}))),[m]);if(!j())return null;return a.createElement(a.Fragment,null,A?a.createElement("div",{"data-test":"stripe-accordion-skeleton",style:{padding:"10px 18px"}},a.createElement(p.A,null)):w?a.createElement("style",null,`\n                    .custom-checklist-item#radio-${F} {\n                        border: none;\n                    }\n                `):a.createElement("style",null,`\n                    .custom-checklist-item#radio-${F} {\n                        border-bottom: none;\n                    }\n                    .custom-checklist-item#radio-${F}:last-of-type {\n                        margin-bottom: -1px;\n                    }\n                `),a.createElement(c.A,Object.assign({},f,{containerId:N,deinitializePayment:m.deinitializePayment,disableSubmit:P,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:O,initializeCustomer:U,initializePayment:q,instruments:V,isInstrumentCardCodeRequired:(0,l.A)(r),isInstrumentCardNumberRequired:(0,s.A)(r),isInstrumentFeatureAvailable:!1,isLoadingInstruments:W(),isPaymentDataRequired:j(),isSignedIn:(0,i.some)(null==D?void 0:D.payments,{providerId:b.id}),loadInstruments:m.loadInstruments,method:b,setFieldValue:$,setSubmit:R,setValidationSchema:T,signOut:m.signOutCustomer})),a.createElement("div",{style:{display:"none"}},a.createElement("div",{className:"form-checklist-item optimizedCheckout-form-checklist-item",id:`${N}--accordion-header`},a.createElement("input",{className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",id:`${N}-radio-input`,type:"radio"}),a.createElement("div",{className:"form-label optimizedCheckout-form-label sub-header"})),a.createElement("div",{className:"form-checklist-item optimizedCheckout-form-checklist-item form-checklist-item--selected optimizedCheckout-form-checklist-item--selected",id:`${N}--accordion-header-selected`},a.createElement("div",{className:"form-checklist-header--selected",id:`${N}--accordion-header-selected`},a.createElement("input",{className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",defaultChecked:!0,id:`${N}-radio-input-selected`,type:"radio"}),a.createElement("div",{className:"form-label optimizedCheckout-form-label"}))),a.createElement("div",{className:"optimizedCheckout-form-input",id:`${N}--input`},a.createElement("div",{className:"form-field--error"},a.createElement("div",{className:"optimizedCheckout-form-label",id:`${N}--error`})),a.createElement("div",{className:"optimizedCheckout-form-label",id:`${N}--label`}))))}),[{gateway:"stripeocs",id:"optimized_checkout"},{gateway:"stripeocs",id:"checkout_session"}]),E=(0,m.A)((e=>{var{paymentForm:t,checkoutState:r,checkoutService:d,method:m,onUnhandledError:u=i.noop}=e,p=(0,n.__rest)(e,["paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const h=`stripe-${m.id}-component-field`,f=t,g=(0,a.useCallback)((()=>{f.hidePaymentSubmitButton(m,!1)}),[f,m]),{hidePaymentSubmitButton:y,disableSubmit:v,setFieldValue:C,setSubmit:E,setValidationSchema:I}=t,k=r.data.getInstruments(m)||[],{data:{getCheckout:S,isPaymentDataRequired:A,getPaymentProviderCustomer:_},statuses:{isLoadingInstruments:w}}=r,F=S(),N=r.data.getCustomer(),z=_(),x=null==z?void 0:z.stripeLinkAuthenticationState,O=null==N?void 0:N.isGuest,P=(0,a.useMemo)((()=>!(!O&&x)),[O,x])&&!O&&Boolean(m.config.isVaultingEnabled),$=(e,t)=>{const r=document.getElementById(e);if(!r)throw new Error("Unable to retrieve input styles as the provided container ID is not valid.");return(0,b.A)(r,t)},R=(0,a.useCallback)((e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const t=$(`${h}--input`,["color","background-color","border-color","box-shadow"]),r=$(`${h}--label`,["color"]),n=$(`${h}--error`,["color"]);return f.hidePaymentSubmitButton(m,!0),d.initializePayment(Object.assign(Object.assign({},e),{integrations:[o.Bf],stripeupe:{containerId:h,style:{labelText:r.color,fieldText:t.color,fieldPlaceholderText:t.color,fieldErrorText:n.color,fieldBackground:t["background-color"],fieldInnerShadow:t["box-shadow"],fieldBorder:t["border-color"]},onError:u,render:g}}))}))),[d,h,u,m,f,g]),T=(0,a.useCallback)((e=>d.initializeCustomer(Object.assign(Object.assign({},e),{integrations:[o.Tv]}))),[d]);return a.createElement(a.Fragment,null,a.createElement(c.A,Object.assign({},p,{containerId:h,deinitializePayment:d.deinitializePayment,disableSubmit:v,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:y,initializeCustomer:T,initializePayment:R,instruments:k,isInstrumentCardCodeRequired:(0,l.A)(r),isInstrumentCardNumberRequired:(0,s.A)(r),isInstrumentFeatureAvailable:P,isLoadingInstruments:w(),isPaymentDataRequired:A(),isSignedIn:(0,i.some)(null==F?void 0:F.payments,{providerId:m.id}),loadInstruments:d.loadInstruments,method:m,setFieldValue:C,setSubmit:E,setValidationSchema:I,signOut:d.signOutCustomer})),a.createElement("div",{className:"optimizedCheckout-form-input",id:`${h}--input`},a.createElement("div",{className:"form-field--error"},a.createElement("div",{className:"optimizedCheckout-form-label",id:`${h}--error`})),a.createElement("div",{className:"optimizedCheckout-form-label",id:`${h}--label`})))}),[{gateway:"stripeupe"},{gateway:"stripeupe",id:"klarna"}]);var I=r(39527),k=r(49655),S=r(3375),A=r.n(S),_=r(90767),w=r(14456),F=r(97429),N=r(2224);const z=({options:e})=>a.createElement("div",{className:"form-ccFields"},a.createElement("div",{className:A()("form-field","form-field--stripe-ccNumber")},a.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardNumberElementOptions.containerId},a.createElement(k.A,{id:"payment.credit_card_number_label"})),a.createElement("div",{className:A()("form-input","optimizedCheckout-form-input","has-icon","widget-input--stripev3"),"data-cse":"CardNumber",id:e.cardNumberElementOptions.containerId}),a.createElement(w.A,null)),a.createElement("div",{className:"form-field form-field--ccExpiry"},a.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardExpiryElementOptions.containerId},a.createElement(k.A,{id:"payment.credit_card_expiration_label"})),a.createElement("div",{className:A()("form-input","optimizedCheckout-form-input","widget-input--stripev3"),"data-cse":"ExpiryDate",id:e.cardExpiryElementOptions.containerId})),a.createElement("div",{className:"form-field form-ccFields-field--ccCvv"},a.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardCvcElementOptions.containerId},a.createElement(k.A,{id:"payment.credit_card_cvv_label"}),a.createElement(F.A,{placement:"top-start",tooltip:a.createElement(_.A,null)},a.createElement("span",{className:"has-tip"},a.createElement(N.A,null)))),a.createElement("div",{className:A()("form-input","optimizedCheckout-form-input","has-icon","widget-input--stripev3"),"data-cse":"SecurityCode",id:e.cardCvcElementOptions.containerId}),a.createElement(w.A,null)));var x;!function(e){e.Alipay="alipay",e.Card="card",e.CardCvc="cardCvc",e.CardExpiry="cardExpiry",e.CardNumber="cardNumber",e.Iban="iban",e.IdealBank="idealBank"}(x||(x={}));const O=(0,m.A)((e=>{var{language:t,paymentForm:r,checkoutState:d,checkoutService:m,method:u,onUnhandledError:p=i.noop}=e,b=(0,n.__rest)(e,["language","paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const{useIndividualCardFields:h}=u.initializationData,f=u.id,g=f!==x.Alipay?"optimizedCheckout-form-input widget--stripev3":"",y=`stripe-${f}-component-field`,v=(0,a.useMemo)((()=>{const e={base:"form-input optimizedCheckout-form-input"};return{[x.Card]:{classes:e},[x.CardCvc]:{classes:e,placeholder:""},[x.CardExpiry]:{classes:e},[x.CardNumber]:{classes:e,showIcon:!0,placeholder:""},[x.Iban]:{classes:e,supportedCountries:["SEPA"]},[x.IdealBank]:{classes:e}}}),[]),{hidePaymentSubmitButton:C,disableSubmit:E,setFieldValue:S,setSubmit:A,setValidationSchema:_}=r,{data:{getCheckout:w,isPaymentDataRequired:F,getCustomer:N,getConfig:O},statuses:{isLoadingInstruments:P}}=d,$=w(),R=N(),T=O(),V=d.data.getInstruments(u)||[],B=!(null==R?void 0:R.isGuest)&&Boolean(u.config.isVaultingEnabled),j=(0,a.useMemo)((()=>T?T.links.siteLink:null),[T]),W=(0,a.useCallback)((e=>{"stripev3_error"===e.type&&"auth_failure"===e.subtype&&(e.message=t.translate("payment.stripev3_auth_3ds_fail")),p(e)}),[t,p]),D=(0,a.useCallback)((e=>({cardNumberElementOptions:Object.assign(Object.assign({},e[x.CardNumber]),{containerId:"stripe-card-number-component-field"}),cardExpiryElementOptions:Object.assign(Object.assign({},e[x.CardExpiry]),{containerId:"stripe-expiry-component-field"}),cardCvcElementOptions:Object.assign(Object.assign({},e[x.CardCvc]),{containerId:"stripe-cvc-component-field"})})),[]),L=(0,a.useCallback)((e=>h?D(e):e[f]),[f,D,h]),{getHostedStoredCardValidationFieldset:q,getHostedFormOptions:U}=(0,I.i)({checkoutState:d,method:u,language:t,paymentForm:r}),M=(0,a.useCallback)(((e,t)=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){return m.initializePayment(Object.assign(Object.assign({},e),{integrations:[o.Us],stripev3:Object.assign({containerId:y,options:L(v)},t&&{form:yield U(t)})}))}))),[y,L,v,m,U]);return a.createElement(a.Fragment,null,a.createElement(c.A,Object.assign({},b,{additionalContainerClassName:g,containerId:y,deinitializePayment:m.deinitializePayment,disableSubmit:E,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:C,initializePayment:M,instruments:V,isInstrumentCardCodeRequired:(0,l.A)(d),isInstrumentCardNumberRequired:(0,s.A)(d),isInstrumentFeatureAvailable:B,isLoadingInstruments:P(),isPaymentDataRequired:F(),isSignedIn:(0,i.some)(null==$?void 0:$.payments,{providerId:u.id}),loadInstruments:m.loadInstruments,method:u,onUnhandledError:W,renderCustomPaymentForm:()=>{const e=D(v);return a.createElement(z,{options:e})},setFieldValue:S,setSubmit:A,setValidationSchema:_,shouldRenderCustomInstrument:h,signOut:m.signOutCustomer,validateInstrument:(e,t)=>q(t)})),"iban"===u.id&&a.createElement("p",{className:"stripe-sepa-mandate-disclaimer"},a.createElement(k.A,{data:{storeUrl:j},id:"payment.stripe_sepa_mandate_disclaimer"})))}),[{gateway:"stripev3"}]);var P=r(63582),$=r(4907);const R=(0,m.A)((e=>{const t={onComplete:$.A,loadingContainerId:"checkout-app",methodId:"optimized_checkout",gatewayId:"stripeocs"};return a.createElement(P.A,Object.assign({additionalInitializationOptions:t,integrations:[o.BK]},e))}),[{id:"stripeocs"}])},88186(e,t,r){r.d(t,{A:()=>d});var n=r(31635),o=r(3375),i=r.n(o),a=r(70355);const d=e=>{var{additionalClassName:t,appearFocused:r,testId:o}=e,d=(0,n.__rest)(e,["additionalClassName","appearFocused","testId"]);return a.createElement("div",Object.assign({},d,{className:i()("form-input","optimizedCheckout-form-input",{"form-input--focus":r},{"optimizedCheckout-form-input--focus":r},t),"data-test":o}))}}}]);
//# sourceMappingURL=9557-efa5d1ea.js.map