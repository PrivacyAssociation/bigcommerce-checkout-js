{"version":3,"file":"bolt-payment-method-a33072a5.js","mappings":"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","sources":["webpack://checkout/./packages/bolt-integration/src/BoltClientPaymentMethod.tsx","webpack://checkout/./packages/bolt-integration/src/BoltCustomForm.tsx","webpack://checkout/./packages/bolt-integration/src/BoltEmbeddedPaymentMethod.tsx","webpack://checkout/./packages/bolt-integration/src/BoltPaymentMethod.tsx","webpack://checkout/./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx","webpack://checkout/./packages/hosted-widget-integration/src/EditButton.tsx","webpack://checkout/./packages/hosted-widget-integration/src/PaymentDescriptor.tsx","webpack://checkout/./packages/hosted-widget-integration/src/PaymentWidget.tsx","webpack://checkout/./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx","webpack://checkout/./packages/instrument-utils/src/guards/isInstrumentCardCodeRequired/isInstrumentCardCodeRequired.ts","webpack://checkout/./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts","webpack://checkout/./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts","webpack://checkout/./packages/instrument-utils/src/guards/isInstrumentCardNumberRequired/isInstrumentCardNumberRequired.ts","webpack://checkout/./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts","webpack://checkout/./packages/instrument-utils/src/storedInstrument/InstrumentSelect/InstrumentSelect.tsx","webpack://checkout/./packages/instrument-utils/src/storedInstrument/CardInstrumentFieldset/CardInstrumentFieldset.tsx","webpack://checkout/./packages/instrument-utils/src/storedInstrument/mapFromInstrumentCardType/mapFromInstrumentCardType.ts"],"sourcesContent":["import { type CheckoutService, type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport { createBoltPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/bolt';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport { type PaymentMethodProps } from '@bigcommerce/checkout/payment-integration-api';\n\nconst BoltClientPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    ...rest\n}) => {\n    const initializeBoltPayment: CheckoutService['initializePayment'] = useCallback(\n        (options: PaymentInitializeOptions) =>\n            checkoutService.initializePayment({\n                ...options,\n                integrations: [createBoltPaymentStrategy],\n                bolt: {\n                    useBigCommerceCheckout: true,\n                },\n            }),\n        [checkoutService],\n    );\n\n    return (\n        <HostedPaymentComponent\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={initializeBoltPayment}\n            method={method}\n            {...rest}\n        />\n    );\n};\n\nexport default BoltClientPaymentMethod;\n","import React, { type FunctionComponent } from 'react';\n\nimport { TranslatedHtml, TranslatedString } from '@bigcommerce/checkout/locale';\nimport { CheckboxFormField } from '@bigcommerce/checkout/ui';\n\nexport interface BoltCustomFormProps {\n    containerId: string;\n    showCreateAccountCheckbox: boolean;\n}\n\nconst agreementTranslationOptions = {\n    privacyPolicyUrl: 'https://www.bolt.com/privacy/',\n    termsUrl: 'https://www.bolt.com/end-user-terms/',\n};\n\nconst benefitsList = [\n    { id: 'payment.bolt_benefit_1' },\n    { id: 'payment.bolt_benefit_2' },\n    { id: 'payment.bolt_benefit_3' },\n];\n\nconst BoltCreateAccountCheckbox: FunctionComponent = () => {\n    const labelContent = (\n        <>\n            <TranslatedHtml\n                data={agreementTranslationOptions}\n                id=\"payment.bolt_checkbox_agreement\"\n            />\n            <ul>\n                {benefitsList.map(({ id }, key) => (\n                    <li key={key}>\n                        <TranslatedString id={id} />\n                    </li>\n                ))}\n            </ul>\n        </>\n    );\n\n    return (\n        <CheckboxFormField\n            additionalClassName=\"form-checkbox form-field--createAccount\"\n            labelContent={labelContent}\n            name=\"shouldCreateAccount\"\n        />\n    );\n};\n\nconst BoltCustomForm: FunctionComponent<BoltCustomFormProps> = ({\n    containerId,\n    showCreateAccountCheckbox,\n}) => {\n    return (\n        <div className=\"form-ccFields\">\n            <div className=\"form-field form-field--bolt-embed\" id={containerId} />\n            {showCreateAccountCheckbox ? <BoltCreateAccountCheckbox /> : null}\n        </div>\n    );\n};\n\nexport default BoltCustomForm;\n","import { type CustomerInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport {\n    createBoltCustomerStrategy,\n    createBoltPaymentStrategy,\n} from '@bigcommerce/checkout-sdk/integrations/bolt';\nimport React, { type FunctionComponent, useCallback, useState } from 'react';\n\nimport { HostedWidgetPaymentComponent } from '@bigcommerce/checkout/hosted-widget-integration';\nimport {\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { type PaymentMethodProps } from '@bigcommerce/checkout/payment-integration-api';\n\nimport BoltCustomForm from './BoltCustomForm';\n\nconst BoltEmbeddedPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    const [showCreateAccountCheckbox, setShowCreateAccountCheckbox] = useState(false);\n\n    const boltEmbeddedContainerId = 'bolt-embedded';\n\n    const {\n        hidePaymentSubmitButton,\n        disableSubmit,\n        setFieldValue,\n        setSubmit,\n        setValidationSchema,\n    } = paymentForm;\n\n    const initializeBoltPayment = useCallback(\n        (options: any) =>\n            checkoutService.initializePayment({\n                ...options,\n                integrations: [createBoltPaymentStrategy],\n                bolt: {\n                    containerId: boltEmbeddedContainerId,\n                    useBigCommerceCheckout: true,\n                    onPaymentSelect: (hasBoltAccount: boolean) => {\n                        setShowCreateAccountCheckbox(!hasBoltAccount);\n\n                        if (hasBoltAccount) {\n                            setFieldValue('shouldCreateAccount', false);\n                        }\n                    },\n                },\n            }),\n        [checkoutService, boltEmbeddedContainerId, setFieldValue],\n    );\n\n    const initializeBoltCustomer = useCallback(\n        (options: CustomerInitializeOptions) => {\n            return checkoutService.initializeCustomer({\n                ...options,\n                integrations: [createBoltCustomerStrategy],\n            });\n        },\n        [checkoutService],\n    );\n\n    const renderCustomPaymentForm = useCallback(\n        () => (\n            <BoltCustomForm\n                containerId={boltEmbeddedContainerId}\n                showCreateAccountCheckbox={showCreateAccountCheckbox}\n            />\n        ),\n        [boltEmbeddedContainerId, showCreateAccountCheckbox],\n    );\n\n    const { getInstruments, isPaymentDataRequired } = checkoutState.data;\n    const { isInitializingPayment, isLoadingInstruments } = checkoutState.statuses;\n    const instruments = getInstruments(method) || [];\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer?.isGuest;\n    const isInstrumentFeatureAvailable =\n        !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n\n    return (\n        <HostedWidgetPaymentComponent\n            containerId=\"boltEmbeddedOneClick\"\n            deinitializePayment={checkoutService.deinitializePayment}\n            disableSubmit={disableSubmit}\n            hidePaymentSubmitButton={hidePaymentSubmitButton}\n            initializeCustomer={initializeBoltCustomer}\n            initializePayment={initializeBoltPayment}\n            instruments={instruments}\n            isInitializing={isInitializingPayment()}\n            isInstrumentCardCodeRequired={isInstrumentCardCodeRequiredSelector(checkoutState)}\n            isInstrumentCardNumberRequired={isInstrumentCardNumberRequiredSelector(checkoutState)}\n            isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n            isLoadingInstruments={isLoadingInstruments()}\n            isPaymentDataRequired={isPaymentDataRequired()}\n            isSignedIn={!isGuestCustomer}\n            loadInstruments={checkoutService.loadInstruments}\n            method={method}\n            renderCustomPaymentForm={renderCustomPaymentForm}\n            setFieldValue={setFieldValue}\n            setSubmit={setSubmit}\n            setValidationSchema={setValidationSchema}\n            shouldRenderCustomInstrument\n            signOut={checkoutService.signOutCustomer}\n            {...rest}\n        />\n    );\n};\n\nexport default BoltEmbeddedPaymentMethod;\n","import React, { type FunctionComponent } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport BoltClientPaymentMethod from './BoltClientPaymentMethod';\nimport BoltEmbeddedPaymentMethod from './BoltEmbeddedPaymentMethod';\n\nconst BoltPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    paymentForm,\n    ...rest\n}) => {\n    const useBoltEmbedded = method.initializationData?.embeddedOneClickEnabled;\n\n    if (useBoltEmbedded) {\n        return (\n            <BoltEmbeddedPaymentMethod\n                checkoutService={checkoutService}\n                checkoutState={checkoutState}\n                method={method}\n                paymentForm={paymentForm}\n                {...rest}\n            />\n        );\n    }\n\n    return (\n        <BoltClientPaymentMethod\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            method={method}\n            paymentForm={paymentForm}\n            {...rest}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BoltPaymentMethod,\n    [{ id: 'bolt' }],\n);\n","import {\n    type AccountInstrument,\n    type CheckoutSelectors,\n    type CheckoutService,\n    type LanguageService,\n    type PaymentInitializeOptions,\n    type PaymentInstrument,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport { find, noop } from 'lodash';\nimport React, { type ReactNode, useCallback, useEffect, useState } from 'react';\n\nimport {\n    AccountInstrumentFieldset,\n    isAccountInstrument,\n    isInstrumentFeatureAvailable,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { type PaymentFormService } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nexport interface HostedPaymentComponentProps {\n    checkoutService: CheckoutService;\n    checkoutState: CheckoutSelectors;\n    description?: ReactNode;\n    isInitializing?: boolean;\n    isUsingMultiShipping?: boolean;\n    language: LanguageService;\n    method: PaymentMethod;\n    paymentForm: PaymentFormService;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n    onUnhandledError?(error: Error): void;\n}\n\ninterface HostedPaymentComponentDerivedProps {\n    instruments: AccountInstrument[];\n    isInstrumentFeatureAvailable: boolean;\n    isLoadingInstruments: boolean;\n    isNewAddress: boolean;\n    isPaymentDataRequired: boolean;\n    loadInstruments(): Promise<CheckoutSelectors>;\n}\n\nfunction getHostedPaymentMethodDerivedProps(\n    props: HostedPaymentComponentProps,\n): HostedPaymentComponentDerivedProps {\n    const filterAccountInstruments = memoizeOne((instruments: PaymentInstrument[] = []) =>\n        instruments.filter(isAccountInstrument),\n    );\n    const filterTrustedInstruments = memoizeOne((instruments: AccountInstrument[] = []) =>\n        instruments.filter(({ trustedShippingAddress }) => trustedShippingAddress),\n    );\n    const { checkoutService, checkoutState, isUsingMultiShipping = false, method } = props;\n\n    const {\n        data: {\n            getCart,\n            getConfig,\n            getCustomer,\n            getInstruments,\n            isPaymentDataRequired,\n            isPaymentDataSubmitted,\n        },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const cart = getCart();\n    const config = getConfig();\n    const customer = getCustomer();\n\n    if (!config || !cart || !customer) {\n        throw new Error('Unable to get checkout');\n    }\n\n    const currentMethodInstruments = filterAccountInstruments(getInstruments(method));\n    const trustedInstruments = filterTrustedInstruments(currentMethodInstruments);\n\n    return {\n        instruments: trustedInstruments,\n        isNewAddress: trustedInstruments.length === 0 && currentMethodInstruments.length > 0,\n        isInstrumentFeatureAvailable:\n            !isPaymentDataSubmitted(method.id, method.gateway) &&\n            isInstrumentFeatureAvailable({\n                config,\n                customer,\n                isUsingMultiShipping,\n                paymentMethod: method,\n            }),\n        isLoadingInstruments: isLoadingInstruments(),\n        isPaymentDataRequired: isPaymentDataRequired(),\n        loadInstruments: checkoutService.loadInstruments,\n    };\n}\n\nconst HostedPaymentMethodComponent: React.FC<HostedPaymentComponentProps> = (props) => {\n    const {\n        description,\n        isInitializing = false,\n        initializePayment,\n        method,\n        onUnhandledError = noop,\n        deinitializePayment,\n    } = props;\n\n    const [isAddingNewInstrument, setIsAddingNewInstrument] = useState(false);\n    const [selectedInstrument, setSelectedInstrument] = useState<AccountInstrument | undefined>();\n\n    const derivedProps = getHostedPaymentMethodDerivedProps(props);\n    const {\n        isLoadingInstruments,\n        instruments,\n        isNewAddress,\n        isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp,\n        loadInstruments,\n    } = derivedProps;\n\n    const getDefaultInstrument = useCallback((): AccountInstrument | undefined => {\n        if (isAddingNewInstrument || !instruments.length) {\n            return;\n        }\n\n        return find(instruments, { defaultInstrument: true }) || instruments[0];\n    }, [isAddingNewInstrument, instruments]);\n\n    const handleUseNewInstrument = useCallback(() => {\n        setIsAddingNewInstrument(true);\n        setSelectedInstrument(undefined);\n    }, []);\n\n    const handleSelectInstrument = useCallback(\n        (id: string) => {\n            setIsAddingNewInstrument(false);\n            setSelectedInstrument(find(instruments, { bigpayToken: id }));\n        },\n        [instruments],\n    );\n\n    useEffect(() => {\n        const initializePaymentAsync = async () => {\n            try {\n                await initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n\n                if (isInstrumentFeatureAvailableProp) {\n                    await loadInstruments();\n                }\n            } catch (error) {\n                onUnhandledError(error);\n            }\n        };\n\n        void initializePaymentAsync();\n\n        return () => {\n            const deinitializePaymentAsync = async () => {\n                try {\n                    await deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    onUnhandledError(error);\n                }\n            };\n\n            void deinitializePaymentAsync();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const currentSelectedInstrument = selectedInstrument || getDefaultInstrument();\n    const isLoading = isInitializing || isLoadingInstruments;\n    const shouldShowInstrumentFieldset =\n        isInstrumentFeatureAvailableProp && (instruments.length > 0 || isNewAddress);\n\n    if (!description && !isInstrumentFeatureAvailableProp) {\n        return null;\n    }\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n            <div className=\"paymentMethod paymentMethod--hosted\">\n                {description}\n\n                {shouldShowInstrumentFieldset && (\n                    <AccountInstrumentFieldset\n                        instruments={instruments}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewInstrument}\n                        selectedInstrument={currentSelectedInstrument}\n                    />\n                )}\n\n                {isInstrumentFeatureAvailableProp && (\n                    <StoreInstrumentFieldset\n                        instrumentId={\n                            currentSelectedInstrument && currentSelectedInstrument.bigpayToken\n                        }\n                        instruments={instruments}\n                        isAccountInstrument={true}\n                    />\n                )}\n            </div>\n        </LoadingOverlay>\n    );\n};\n\nexport default HostedPaymentMethodComponent;\n","import classNames from 'classnames';\nimport React, { type ReactNode } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\ninterface EditButtonProps {\n    buttonId: string | undefined;\n    shouldShowEditButton: boolean | undefined;\n}\n\nexport const EditButton = ({ buttonId, shouldShowEditButton }: EditButtonProps): ReactNode => {\n    if (shouldShowEditButton) {\n        const translatedString = <TranslatedString id=\"remote.select_different_card_action\" />;\n\n        return (\n            <p>\n                <button\n                    className={classNames('stepHeader', 'widget-link-amazonpay')}\n                    id={buttonId}\n                    onClick={preventDefault()}\n                    type=\"button\"\n                >\n                    {translatedString}\n                </button>\n            </p>\n        );\n    }\n\n    return null;\n};\n","import React, { type ReactNode } from 'react';\n\ninterface PaymentDescriptorProps {\n    paymentDescriptor: string | undefined;\n    shouldShowDescriptor: boolean | undefined;\n}\n\nexport const PaymentDescriptor = ({\n    shouldShowDescriptor,\n    paymentDescriptor,\n}: PaymentDescriptorProps): ReactNode => {\n    if (shouldShowDescriptor && paymentDescriptor) {\n        return <div className=\"payment-descriptor\">{paymentDescriptor}</div>;\n    }\n\n    return null;\n};\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport React, { type ReactElement } from 'react';\n\ninterface PaymentWidgetProps {\n    additionalContainerClassName: string | undefined;\n    containerId: string;\n    hideContentWhenSignedOut: boolean;\n    hideWidget: boolean;\n    isSignInRequired: boolean | undefined;\n    isSignedIn: boolean;\n    method: PaymentMethod;\n    renderCustomPaymentForm: (() => React.ReactNode) | undefined;\n    shouldRenderCustomInstrument: boolean;\n    shouldShowCreditCardFieldset: boolean;\n}\n\nexport const PaymentWidget = ({\n    additionalContainerClassName,\n    containerId,\n    hideContentWhenSignedOut,\n    hideWidget,\n    isSignInRequired,\n    isSignedIn,\n    method,\n    renderCustomPaymentForm,\n    shouldRenderCustomInstrument,\n    shouldShowCreditCardFieldset,\n}: PaymentWidgetProps): ReactElement => (\n    <div\n        className={classNames(\n            'widget',\n            `widget--${method.id}`,\n            'payment-widget',\n            shouldRenderCustomInstrument ? '' : additionalContainerClassName,\n        )}\n        id={containerId}\n        style={{\n            display:\n                (hideContentWhenSignedOut && isSignInRequired && !isSignedIn) ||\n                !shouldShowCreditCardFieldset ||\n                hideWidget\n                    ? 'none'\n                    : undefined,\n        }}\n        tabIndex={-1}\n    >\n        {shouldRenderCustomInstrument && renderCustomPaymentForm && renderCustomPaymentForm()}\n    </div>\n);\n","import {\n    type AccountInstrument,\n    type CardInstrument,\n    type CheckoutSelectors,\n    type CustomerInitializeOptions,\n    type CustomerRequestOptions,\n    type Instrument,\n    type PaymentInitializeOptions,\n    type PaymentInstrument,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { find, noop } from 'lodash';\nimport React, {\n    type ReactElement,\n    type ReactNode,\n    useCallback,\n    useEffect,\n    useRef,\n    useState,\n} from 'react';\nimport { type ObjectSchema } from 'yup';\n\nimport {\n    AccountInstrumentFieldset,\n    assertIsCardInstrument,\n    CardInstrumentFieldset,\n    isBankAccountInstrument,\n    isCardInstrument,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport { EditButton } from './EditButton';\nimport { PaymentDescriptor } from './PaymentDescriptor';\nimport { PaymentWidget } from './PaymentWidget';\n\nexport interface PaymentContextProps {\n    disableSubmit(method: PaymentMethod, disabled?: boolean): void;\n    // NOTE: This prop allows certain payment methods to override the default\n    // form submission behaviour. It is not recommended to use it because\n    // generally speaking we want to avoid method-specific snowflake behaviours.\n    // Nevertheless, because of some product / UX decisions made in the past\n    // (i.e.: Amazon), we have to have this backdoor so we can preserve these\n    // snowflake behaviours. In the future, if we decide to change the UX, we\n    // can remove this prop.\n    setSubmit(method: PaymentMethod, fn: ((values: PaymentFormValues) => void) | null): void;\n    setFieldValue<TField extends keyof PaymentFormValues>(\n        field: TField,\n        value: PaymentFormValues[TField],\n    ): void;\n    setValidationSchema(\n        method: PaymentMethod,\n        schema: ObjectSchema<Partial<PaymentFormValues>> | null,\n    ): void;\n    hidePaymentSubmitButton(method: PaymentMethod, hidden?: boolean): void;\n}\n\nexport interface WithCheckoutHostedWidgetPaymentMethodProps {\n    instruments: PaymentInstrument[];\n    isInstrumentFeatureAvailable: boolean;\n    isLoadingInstruments: boolean;\n    isPaymentDataRequired: boolean;\n    isSignedIn: boolean;\n    isInstrumentCardCodeRequired(instrument: Instrument, method: PaymentMethod): boolean;\n    isInstrumentCardNumberRequired(instrument: Instrument, method: PaymentMethod): boolean;\n    loadInstruments(): Promise<CheckoutSelectors>;\n    signOut(options: CustomerRequestOptions): void;\n}\n\nexport interface HostedWidgetComponentProps extends WithCheckoutHostedWidgetPaymentMethodProps {\n    additionalContainerClassName?: string;\n    buttonId?: string;\n    containerId: string;\n    hideContentWhenSignedOut?: boolean;\n    hideVerificationFields?: boolean;\n    isAccountInstrument?: boolean;\n    hideWidget?: boolean;\n    isInitializing?: boolean;\n    isUsingMultiShipping?: boolean;\n    isSignInRequired?: boolean;\n    method: PaymentMethod;\n    paymentDescriptor?: string;\n    shouldHideInstrumentExpiryDate?: boolean;\n    shouldShow?: boolean;\n    shouldShowDescriptor?: boolean;\n    shouldShowEditButton?: boolean;\n    shouldRenderCustomInstrument?: boolean;\n    storedCardValidationSchema?: ObjectSchema;\n    renderCustomPaymentForm?(): React.ReactNode;\n    validateInstrument?(\n        shouldShowNumberField: boolean,\n        selectedInstrument?: CardInstrument,\n    ): React.ReactNode;\n    deinitializeCustomer?(options: CustomerRequestOptions): Promise<CheckoutSelectors>;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializeCustomer?(options: CustomerInitializeOptions): Promise<CheckoutSelectors>;\n    initializePayment(\n        options: PaymentInitializeOptions,\n        selectedInstrument?: CardInstrument,\n    ): Promise<CheckoutSelectors>;\n    onPaymentSelect?(): void;\n    onSignOut?(): void;\n    onSignOutError?(error: Error): void;\n    onUnhandledError?(error: Error): void;\n    signInCustomer?(): void;\n}\n\nconst HostedWidgetPaymentComponent = ({\n    instruments,\n    hideWidget = false,\n    isInitializing = false,\n    isAccountInstrument,\n    isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp,\n    isLoadingInstruments,\n    shouldHideInstrumentExpiryDate = false,\n    shouldShow = true,\n    hideVerificationFields,\n    method,\n    storedCardValidationSchema,\n    isPaymentDataRequired,\n    setValidationSchema,\n    loadInstruments,\n    onUnhandledError = noop,\n    deinitializeCustomer,\n    deinitializePayment,\n    setSubmit,\n    initializeCustomer,\n    initializePayment,\n    signInCustomer,\n    isSignedIn,\n    isSignInRequired,\n    isInstrumentCardNumberRequired,\n    validateInstrument,\n    containerId,\n    hideContentWhenSignedOut = false,\n    renderCustomPaymentForm,\n    additionalContainerClassName,\n    shouldRenderCustomInstrument = false,\n    paymentDescriptor,\n    shouldShowDescriptor,\n    shouldShowEditButton,\n    buttonId,\n    setFieldValue,\n}: HostedWidgetComponentProps & PaymentContextProps): ReactElement => {\n    const [isAddingNewCard, setIsAddingNewCard] = useState(false);\n    const [selectedInstrumentId, setSelectedInstrumentId] = useState<string | undefined>(undefined);\n    const instrumentsRef = useRef<PaymentInstrument[]>(instruments);\n\n    useEffect(() => {\n        instrumentsRef.current = instruments;\n    }, [instruments]);\n\n    const getDefaultInstrumentId = useCallback((): string | undefined => {\n        if (isAddingNewCard) {\n            return undefined;\n        }\n\n        const defaultInstrument =\n            instrumentsRef.current.find((instrument) => instrument.defaultInstrument) ||\n            instrumentsRef.current[0];\n\n        return defaultInstrument ? defaultInstrument.bigpayToken : undefined;\n    }, [isAddingNewCard]);\n\n    const getSelectedInstrument = useCallback((): PaymentInstrument | undefined => {\n        const currentSelectedId = selectedInstrumentId || getDefaultInstrumentId();\n\n        return find(instrumentsRef.current, { bigpayToken: currentSelectedId });\n    }, [selectedInstrumentId, getDefaultInstrumentId]);\n\n    const getValidationSchema = useCallback((): ObjectSchema | null => {\n        if (!isPaymentDataRequired) {\n            return null;\n        }\n\n        const currentSelectedInstrument = getSelectedInstrument();\n\n        if (isInstrumentFeatureAvailableProp && currentSelectedInstrument) {\n            return storedCardValidationSchema || null;\n        }\n\n        return null;\n    }, [\n        getSelectedInstrument,\n        isInstrumentFeatureAvailableProp,\n        isPaymentDataRequired,\n        storedCardValidationSchema,\n    ]);\n\n    const getSelectedBankAccountInstrument = useCallback(\n        (\n            addingNew: boolean,\n            currentSelectedInstrument: PaymentInstrument,\n        ): AccountInstrument | undefined => {\n            return !addingNew && isBankAccountInstrument(currentSelectedInstrument)\n                ? currentSelectedInstrument\n                : undefined;\n        },\n        [],\n    );\n\n    const handleDeleteInstrument = useCallback(\n        (id: string): void => {\n            if (instruments.length === 0) {\n                setIsAddingNewCard(true);\n                setSelectedInstrumentId(undefined);\n                setFieldValue('instrumentId', '');\n\n                return;\n            }\n\n            if (selectedInstrumentId === id) {\n                const nextId = getDefaultInstrumentId();\n\n                setSelectedInstrumentId(nextId);\n                setFieldValue('instrumentId', nextId);\n            }\n        },\n        [instruments, selectedInstrumentId, getDefaultInstrumentId],\n    );\n\n    const handleUseNewCard = useCallback(async () => {\n        setIsAddingNewCard(true);\n        setSelectedInstrumentId(undefined);\n\n        if (deinitializePayment) {\n            await deinitializePayment({\n                gatewayId: method.gateway,\n                methodId: method.id,\n            });\n        }\n\n        if (initializePayment) {\n            await initializePayment({\n                gatewayId: method.gateway,\n                methodId: method.id,\n            });\n        }\n    }, [method, deinitializePayment, initializePayment]);\n\n    const handleSelectInstrument = useCallback((id: string) => {\n        setIsAddingNewCard(false);\n        setSelectedInstrumentId(id);\n    }, []);\n\n    const getValidateInstrument = useCallback((): ReactNode | undefined => {\n        const currentSelectedId = selectedInstrumentId || getDefaultInstrumentId();\n        const currentSelectedInstrument = find(instruments, { bigpayToken: currentSelectedId });\n\n        if (currentSelectedInstrument) {\n            assertIsCardInstrument(currentSelectedInstrument);\n\n            const shouldShowNumberField = isInstrumentCardNumberRequired(\n                currentSelectedInstrument,\n                method,\n            );\n\n            if (hideVerificationFields) {\n                return undefined;\n            }\n\n            if (validateInstrument) {\n                return validateInstrument(shouldShowNumberField, currentSelectedInstrument);\n            }\n        }\n\n        return undefined;\n    }, [\n        selectedInstrumentId,\n        getDefaultInstrumentId,\n        instruments,\n        method,\n        hideVerificationFields,\n        validateInstrument,\n    ]);\n\n    const initializeMethod = async (): Promise<CheckoutSelectors | void> => {\n        const currentInstruments = instrumentsRef.current;\n\n        if (!isPaymentDataRequired) {\n            setSubmit(method, null);\n\n            return;\n        }\n\n        if (isSignInRequired && !isSignedIn) {\n            setSubmit(method, signInCustomer || null);\n\n            if (initializeCustomer) {\n                return initializeCustomer({ methodId: method.id });\n            }\n\n            return;\n        }\n\n        setSubmit(method, null);\n\n        let selectedCardInstrument: CardInstrument | undefined;\n\n        if (!isAddingNewCard) {\n            const currentSelectedInstrumentId = selectedInstrumentId || getDefaultInstrumentId();\n            const maybeInstrument =\n                currentInstruments.find(\n                    (instrument) => instrument.bigpayToken === currentSelectedInstrumentId,\n                ) || currentInstruments[0];\n\n            if (maybeInstrument && isCardInstrument(maybeInstrument)) {\n                selectedCardInstrument = maybeInstrument;\n            }\n        }\n\n        if (initializePayment) {\n            return initializePayment(\n                { gatewayId: method.gateway, methodId: method.id },\n                selectedCardInstrument,\n            );\n        }\n    };\n\n    // Below values are for lower level components\n    const effectiveSelectedInstrumentId = selectedInstrumentId || getDefaultInstrumentId();\n    const selectedInstrument = effectiveSelectedInstrumentId\n        ? instruments.find((i) => i.bigpayToken === effectiveSelectedInstrumentId) || instruments[0]\n        : instruments[0];\n    const cardInstruments: CardInstrument[] = instruments.filter(\n        (i): i is CardInstrument => !isBankAccountInstrument(i),\n    );\n    const accountInstruments: AccountInstrument[] = instruments.filter(\n        (i): i is AccountInstrument => isBankAccountInstrument(i),\n    );\n    const shouldShowInstrumentFieldset = isInstrumentFeatureAvailableProp && instruments.length > 0;\n    const shouldShowCreditCardFieldset = !shouldShowInstrumentFieldset || isAddingNewCard;\n    const isLoading = (isInitializing || isLoadingInstruments) && !hideWidget;\n    const selectedAccountInstrument = selectedInstrument\n        ? getSelectedBankAccountInstrument(isAddingNewCard, selectedInstrument)\n        : undefined;\n    const shouldShowAccountInstrument = instruments[0] && isBankAccountInstrument(instruments[0]);\n\n    useEffect(() => {\n        const init = async () => {\n            setValidationSchema(method, getValidationSchema());\n\n            try {\n                if (isInstrumentFeatureAvailableProp) {\n                    await loadInstruments?.();\n                }\n\n                await initializeMethod();\n            } catch (error: unknown) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        void init();\n\n        return () => {\n            const deInit = async () => {\n                setValidationSchema(method, null);\n                setSubmit(method, null);\n\n                try {\n                    if (deinitializePayment) {\n                        await deinitializePayment({\n                            gatewayId: method.gateway,\n                            methodId: method.id,\n                        });\n                    }\n\n                    if (deinitializeCustomer) {\n                        await deinitializeCustomer({ methodId: method.id });\n                    }\n                } catch (error: unknown) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            };\n\n            void deInit();\n        };\n    }, []);\n\n    const isInitialRenderRef = useRef(true);\n    const instrumentsLength = useRef(instruments.length);\n    const isPaymentDataRequiredRef = useRef(isPaymentDataRequired);\n    const selectedInstrumentIdRef = useRef(selectedInstrumentId);\n\n    useEffect(() => {\n        if (isInitialRenderRef.current) {\n            isInitialRenderRef.current = false;\n\n            return;\n        }\n\n        setValidationSchema(method, getValidationSchema());\n\n        const reInit = async () => {\n            try {\n                if (deinitializePayment) {\n                    await deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                }\n\n                await initializeMethod();\n            } catch (error: unknown) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        if (\n            selectedInstrumentIdRef.current !== selectedInstrumentId ||\n            (Number(instrumentsLength.current) > 0 && instruments.length === 0) ||\n            isPaymentDataRequiredRef.current !== isPaymentDataRequired\n        ) {\n            selectedInstrumentIdRef.current = selectedInstrumentId;\n            instrumentsLength.current = instruments.length;\n            isPaymentDataRequiredRef.current = isPaymentDataRequired;\n\n            void reInit();\n        }\n    }, [selectedInstrumentId, instruments, isPaymentDataRequired]);\n\n    if (!shouldShow) {\n        return <div style={{ display: 'none' }} />;\n    }\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n            <div className=\"paymentMethod--hosted\">\n                {shouldShowAccountInstrument && shouldShowInstrumentFieldset && (\n                    <AccountInstrumentFieldset\n                        instruments={accountInstruments}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewCard}\n                        selectedInstrument={selectedAccountInstrument}\n                    />\n                )}\n                {!shouldShowAccountInstrument && shouldShowInstrumentFieldset && (\n                    <CardInstrumentFieldset\n                        instruments={cardInstruments}\n                        onDeleteInstrument={handleDeleteInstrument}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewCard}\n                        selectedInstrumentId={effectiveSelectedInstrumentId}\n                        shouldHideExpiryDate={shouldHideInstrumentExpiryDate}\n                        validateInstrument={getValidateInstrument()}\n                    />\n                )}\n\n                <PaymentDescriptor\n                    paymentDescriptor={paymentDescriptor}\n                    shouldShowDescriptor={shouldShowDescriptor}\n                />\n\n                <PaymentWidget\n                    additionalContainerClassName={additionalContainerClassName}\n                    containerId={containerId}\n                    hideContentWhenSignedOut={hideContentWhenSignedOut}\n                    hideWidget={hideWidget}\n                    isSignInRequired={isSignInRequired}\n                    isSignedIn={isSignedIn}\n                    method={method}\n                    renderCustomPaymentForm={renderCustomPaymentForm}\n                    shouldRenderCustomInstrument={shouldRenderCustomInstrument}\n                    shouldShowCreditCardFieldset={shouldShowCreditCardFieldset}\n                />\n\n                {isInstrumentFeatureAvailableProp && (\n                    <StoreInstrumentFieldset\n                        instrumentId={effectiveSelectedInstrumentId}\n                        instruments={instruments}\n                        isAccountInstrument={Boolean(\n                            isAccountInstrument || shouldShowAccountInstrument,\n                        )}\n                    />\n                )}\n\n                <EditButton buttonId={buttonId} shouldShowEditButton={shouldShowEditButton} />\n            </div>\n        </LoadingOverlay>\n    );\n};\n\nexport default HostedWidgetPaymentComponent;\n","import {\n    type LineItemMap,\n    type PaymentInstrument,\n    type PaymentMethod,\n} from '@bigcommerce/checkout-sdk';\n\nexport const PROVIDERS_WITHOUT_CARD_CODE = ['bluesnapdirect'];\n\nexport interface IsInstrumentCardCodeRequiredState {\n    instrument: PaymentInstrument;\n    lineItems: LineItemMap;\n    paymentMethod: PaymentMethod;\n}\n\nexport default function isInstrumentCardCodeRequired({\n    instrument,\n    lineItems,\n    paymentMethod,\n}: IsInstrumentCardCodeRequiredState): boolean {\n    const {\n        config: { isVaultingCvvEnabled, cardCode },\n        initializationData,\n    } = paymentMethod;\n    const { isVaultingCardCodeValidationAvailable = true } = initializationData || {};\n\n    if (\n        PROVIDERS_WITHOUT_CARD_CODE.includes(instrument.provider) ||\n        !isVaultingCardCodeValidationAvailable\n    ) {\n        return false;\n    }\n\n    // If there's a digital item in the cart, always show CVV field\n    if (lineItems.digitalItems.length > 0 || lineItems.giftCertificates.length > 0) {\n        return true;\n    }\n\n    // If the shipping address is trusted, show CVV field based on the merchant's configuration\n    if (instrument.trustedShippingAddress) {\n        return !!isVaultingCvvEnabled;\n    }\n\n    // Otherwise, if the shipping address is untrusted, show CVV field if the\n    // merchant either requires it for regular card or stored card payments.\n    return !!(isVaultingCvvEnabled || cardCode);\n}\n","import {\n    type CheckoutSelectors,\n    type Instrument,\n    type PaymentMethod,\n} from '@bigcommerce/checkout-sdk';\nimport { createSelector } from 'reselect';\n\nimport isInstrumentCardCodeRequired from './isInstrumentCardCodeRequired/isInstrumentCardCodeRequired';\n\nconst isInstrumentCardCodeRequiredSelector = createSelector(\n    ({ data }: CheckoutSelectors) => {\n        const cart = data.getCart();\n\n        return cart && cart.lineItems;\n    },\n    (lineItems) => (instrument: Instrument, method: PaymentMethod) => {\n        if (!lineItems) {\n            return false;\n        }\n\n        return isInstrumentCardCodeRequired({\n            instrument,\n            lineItems,\n            paymentMethod: method,\n        });\n    },\n);\n\nexport default isInstrumentCardCodeRequiredSelector;\n","import {\n    type CheckoutSelectors,\n    type Instrument,\n    type PaymentMethod,\n} from '@bigcommerce/checkout-sdk';\nimport { createSelector } from 'reselect';\n\nimport isInstrumentCardNumberRequired from './isInstrumentCardNumberRequired/isInstrumentCardNumberRequired';\n\nconst isInstrumentCardNumberRequiredSelector = createSelector(\n    ({ data }: CheckoutSelectors) => {\n        const cart = data.getCart();\n\n        return cart && cart.lineItems;\n    },\n    (lineItems) => (instrument: Instrument, paymentMethod?: PaymentMethod) => {\n        if (!lineItems) {\n            return false;\n        }\n\n        return isInstrumentCardNumberRequired({\n            lineItems,\n            instrument,\n            paymentMethod,\n        });\n    },\n);\n\nexport default isInstrumentCardNumberRequiredSelector;\n","import { type Instrument, type LineItemMap, type PaymentMethod } from '@bigcommerce/checkout-sdk';\n\nexport interface IsInstrumentCardNumberRequiredState {\n    lineItems: LineItemMap;\n    instrument: Instrument;\n    paymentMethod?: PaymentMethod;\n}\n\nexport default function isInstrumentCardNumberRequired({\n    lineItems,\n    instrument,\n    paymentMethod,\n}: IsInstrumentCardNumberRequiredState): boolean {\n    const { isVaultingCardNumberValidationAvailable = true } =\n        paymentMethod?.initializationData || {};\n\n    if (lineItems.physicalItems.length === 0 || !isVaultingCardNumberValidationAvailable) {\n        return false;\n    }\n\n    return !instrument.trustedShippingAddress;\n}\n","import { type Customer, type PaymentMethod, type StoreConfig } from '@bigcommerce/checkout-sdk';\n\nexport interface IsInstrumentFeatureAvailableState {\n    config: StoreConfig;\n    customer: Customer;\n    isUsingMultiShipping: boolean;\n    paymentMethod: PaymentMethod;\n}\n\nexport default function isInstrumentFeatureAvailable({\n    config,\n    customer,\n    isUsingMultiShipping,\n    paymentMethod,\n}: IsInstrumentFeatureAvailableState): boolean {\n    if (\n        !config.checkoutSettings.isCardVaultingEnabled ||\n        !paymentMethod.config.isVaultingEnabled ||\n        customer.isGuest ||\n        isUsingMultiShipping\n    ) {\n        return false;\n    }\n\n    return true;\n}\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport { expirationDate } from 'card-validator';\nimport classNames from 'classnames';\nimport creditCardType from 'credit-card-type';\nimport { type FieldProps } from 'formik';\nimport { find, noop } from 'lodash';\nimport React, { type FunctionComponent, useCallback, useEffect, useRef } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { CreditCardIcon, DropdownTrigger } from '@bigcommerce/checkout/ui';\n\nimport { mapFromInstrumentCardType } from '../mapFromInstrumentCardType';\n\nexport interface InstrumentSelectProps extends FieldProps<string> {\n    instruments: CardInstrument[];\n    selectedInstrumentId?: string;\n    shouldHideExpiryDate?: boolean;\n    onSelectInstrument(id: string): void;\n    onUseNewInstrument(): void;\n}\n\nexport interface InstrumentSelectValues {\n    instrumentId: string;\n}\n\ninterface InstrumentMenuItemProps {\n    className?: string;\n    instrument: CardInstrument;\n    testId?: string;\n    shouldHideExpiryDate?: boolean;\n    onClick?(): void;\n}\n\nconst InstrumentMenuItem: FunctionComponent<InstrumentMenuItemProps> = ({\n    className,\n    instrument,\n    testId,\n    shouldHideExpiryDate = false,\n    onClick,\n}) => {\n    const cardType = mapFromInstrumentCardType(instrument.brand);\n    const cardInfo = creditCardType.getTypeInfo(cardType);\n    const isExpired = !expirationDate({\n        month: instrument.expiryMonth,\n        year: instrument.expiryYear,\n    }).isValid;\n\n    return (\n        <button className={className} data-test={testId} onClick={onClick} type=\"button\">\n            <div\n                className={classNames('instrumentSelect-details', {\n                    'instrumentSelect-details--expired': isExpired,\n                })}\n            >\n                <CreditCardIcon cardType={cardType} />\n\n                <div className=\"instrumentSelect-card\" data-test={`${testId ?? ''}-last4`}>\n                    {cardInfo ? (\n                        <TranslatedString\n                            data={{\n                                cardTitle: cardInfo.niceType ?? '',\n                                endingIn: instrument.last4,\n                            }}\n                            id=\"payment.instrument_ending_in_text\"\n                        />\n                    ) : (\n                        <TranslatedString\n                            data={{ endingIn: instrument.last4 }}\n                            id=\"payment.instrument_default_ending_in_text\"\n                        />\n                    )}\n                </div>\n\n                {!shouldHideExpiryDate && (\n                    <div\n                        className={classNames('instrumentSelect-expiry', {\n                            'instrumentSelect-expiry--expired': isExpired,\n                        })}\n                        data-test={`${testId || ''}-expiry`}\n                    >\n                        {isExpired ? (\n                            <TranslatedString\n                                data={{\n                                    expiryDate: `${instrument.expiryMonth}/${instrument.expiryYear}`,\n                                }}\n                                id=\"payment.instrument_expired_text\"\n                            />\n                        ) : (\n                            <TranslatedString\n                                data={{\n                                    expiryDate: `${instrument.expiryMonth}/${instrument.expiryYear}`,\n                                }}\n                                id=\"payment.instrument_expires_text\"\n                            />\n                        )}\n                    </div>\n                )}\n            </div>\n        </button>\n    );\n};\n\ninterface InstrumentOptionProps {\n    instrument: CardInstrument;\n    testId?: string;\n    shouldHideExpiryDate?: boolean;\n    onClick?(token: string): void;\n}\n\nconst InstrumentOption: FunctionComponent<InstrumentOptionProps> = ({\n    instrument,\n    shouldHideExpiryDate = false,\n    onClick = noop,\n}) => {\n    const handleClick = useCallback(() => {\n        onClick(instrument.bigpayToken);\n    }, [onClick, instrument]);\n\n    return (\n        <InstrumentMenuItem\n            instrument={instrument}\n            onClick={handleClick}\n            shouldHideExpiryDate={shouldHideExpiryDate}\n            testId=\"instrument-select-option\"\n        />\n    );\n};\n\ninterface InstrumentUseNewButtonProps {\n    className?: string;\n    testId?: string;\n    onClick?(): void;\n}\n\nconst InstrumentUseNewButton: FunctionComponent<InstrumentUseNewButtonProps> = ({\n    className,\n    testId,\n    onClick = noop,\n}) => (\n    <button className={className} data-test={testId} onClick={onClick} type=\"button\">\n        <div className=\"instrumentSelect-details instrumentSelect-details--addNew\">\n            <CreditCardIcon />\n\n            <div className=\"instrumentSelect-card\">\n                <TranslatedString id=\"payment.instrument_add_card_action\" />\n            </div>\n        </div>\n    </button>\n);\n\ninterface InstrumentMenuProps {\n    instruments: CardInstrument[];\n    selectedInstrumentId?: string;\n    shouldHideExpiryDate?: boolean;\n    onSelectInstrument(id: string): void;\n    onUseNewInstrument(): void;\n}\n\nconst InstrumentMenu: FunctionComponent<InstrumentMenuProps> = ({\n    instruments,\n    selectedInstrumentId,\n    shouldHideExpiryDate = false,\n    onSelectInstrument,\n    onUseNewInstrument,\n}) => {\n    return (\n        <ul\n            className=\"instrumentSelect-dropdownMenu instrumentSelect-dropdownMenuNext dropdown-menu\"\n            data-test=\"instrument-select-menu\"\n        >\n            {instruments.map((instrument) => (\n                <li\n                    className={classNames('instrumentSelect-option dropdown-menu-item', {\n                        'instrumentSelect-option--selected':\n                            instrument.bigpayToken === selectedInstrumentId,\n                    })}\n                    key={instrument.bigpayToken}\n                >\n                    <InstrumentOption\n                        instrument={instrument}\n                        onClick={onSelectInstrument}\n                        shouldHideExpiryDate={shouldHideExpiryDate}\n                        testId=\"instrument-select-option\"\n                    />\n                </li>\n            ))}\n\n            <li className=\"instrumentSelect-option instrumentSelect-option--addNew dropdown-menu-item\">\n                <InstrumentUseNewButton\n                    onClick={onUseNewInstrument}\n                    testId=\"instrument-select-option-use-new\"\n                />\n            </li>\n        </ul>\n    );\n};\n\ninterface InstrumentSelectButtonProps {\n    instrument?: CardInstrument;\n    shouldHideExpiryDate?: boolean;\n    testId?: string;\n    onClick?(): void;\n}\n\nconst InstrumentSelectButton: FunctionComponent<InstrumentSelectButtonProps> = ({\n    instrument,\n    shouldHideExpiryDate = false,\n    testId,\n    onClick,\n}) => {\n    if (!instrument) {\n        return (\n            <InstrumentUseNewButton\n                className=\"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input\"\n                testId={testId}\n            />\n        );\n    }\n\n    return (\n        <InstrumentMenuItem\n            className=\"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input\"\n            instrument={instrument}\n            onClick={onClick}\n            shouldHideExpiryDate={shouldHideExpiryDate}\n            testId={testId}\n        />\n    );\n};\n\nconst InstrumentSelect: FunctionComponent<InstrumentSelectProps> = ({\n    field,\n    form,\n    instruments,\n    onSelectInstrument,\n    onUseNewInstrument,\n    selectedInstrumentId,\n    shouldHideExpiryDate = false,\n}) => {\n    const prevSelectedInstrumentIdRef = useRef(selectedInstrumentId);\n\n    const updateFieldValue = useCallback(\n        (instrumentId = '') => {\n            void form.setFieldValue(field.name, instrumentId);\n        },\n        [form, field.name],\n    );\n\n    useEffect(() => {\n        // FIXME: Used setTimeout here because setFieldValue call doesnot set value if called before formik is properly mounted.\n        //        This ensures that update Field value is called after formik has mounted.\n        // See GitHub issue: https://github.com/jaredpalmer/formik/issues/930\n        setTimeout(() => updateFieldValue(selectedInstrumentId));\n\n        return () => {\n            if (field.value === '' && selectedInstrumentId !== undefined) {\n                updateFieldValue();\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        if (prevSelectedInstrumentIdRef.current !== selectedInstrumentId) {\n            // FIXME: Used setTimeout here because setFieldValue call doesnot set value if called before formik is properly mounted.\n            //        This ensures that update Field value is called after formik has mounted.\n            // See GitHub issue: https://github.com/jaredpalmer/formik/issues/930\n            setTimeout(() => updateFieldValue(selectedInstrumentId));\n        }\n\n        prevSelectedInstrumentIdRef.current = selectedInstrumentId;\n    }, [selectedInstrumentId, updateFieldValue]);\n\n    const selectedInstrument = find(instruments, { bigpayToken: selectedInstrumentId });\n\n    return (\n        <div className=\"instrumentSelect\">\n            <DropdownTrigger\n                dropdown={\n                    <InstrumentMenu\n                        instruments={instruments}\n                        onSelectInstrument={onSelectInstrument}\n                        onUseNewInstrument={onUseNewInstrument}\n                        selectedInstrumentId={selectedInstrumentId}\n                        shouldHideExpiryDate={shouldHideExpiryDate}\n                    />\n                }\n            >\n                <InstrumentSelectButton\n                    instrument={selectedInstrument}\n                    shouldHideExpiryDate={shouldHideExpiryDate}\n                    testId=\"instrument-select\"\n                />\n\n                <input type=\"hidden\" {...field} />\n            </DropdownTrigger>\n        </div>\n    );\n};\n\nexport default InstrumentSelect;\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport {\n    BasicFormField,\n    Fieldset,\n    Legend,\n    ModalTrigger,\n    type ModalTriggerModalProps,\n} from '@bigcommerce/checkout/ui';\n\nimport { InstrumentSelect } from '../InstrumentSelect';\nimport { ManageInstrumentsModal } from '../ManageInstrumentsModal';\n\nexport interface CardInstrumentFieldsetProps {\n    instruments: CardInstrument[];\n    selectedInstrumentId?: string;\n    shouldHideExpiryDate?: boolean;\n    validateInstrument?: React.ReactNode;\n    onDeleteInstrument?(instrumentId: string): void;\n    onSelectInstrument(id: string): void;\n    onUseNewInstrument(): void;\n}\n\nconst CardInstrumentFieldset: FunctionComponent<CardInstrumentFieldsetProps> = ({\n    instruments,\n    onDeleteInstrument,\n    onSelectInstrument,\n    onUseNewInstrument,\n    selectedInstrumentId,\n    shouldHideExpiryDate = false,\n    validateInstrument = null,\n}) => {\n    const renderInput = useCallback(\n        (field: FieldProps<string>) => (\n            <InstrumentSelect\n                {...field}\n                instruments={instruments}\n                onSelectInstrument={onSelectInstrument}\n                onUseNewInstrument={onUseNewInstrument}\n                selectedInstrumentId={selectedInstrumentId}\n                shouldHideExpiryDate={shouldHideExpiryDate}\n            />\n        ),\n        [\n            instruments,\n            onSelectInstrument,\n            onUseNewInstrument,\n            selectedInstrumentId,\n            shouldHideExpiryDate,\n        ],\n    );\n\n    const renderModal = useCallback(\n        (props: ModalTriggerModalProps) => (\n            <ManageInstrumentsModal\n                instruments={instruments}\n                onDeleteInstrument={onDeleteInstrument}\n                {...props}\n            />\n        ),\n        [instruments, onDeleteInstrument],\n    );\n\n    return (\n        <Fieldset\n            additionalClassName=\"instrumentFieldset\"\n            legend={\n                <Legend hidden>\n                    <TranslatedString id=\"payment.instrument_text\" />\n                </Legend>\n            }\n        >\n            <ModalTrigger modal={renderModal}>\n                {({ onClick }) => (\n                    <button className=\"instrumentModal-trigger\" onClick={onClick} type=\"button\">\n                        <TranslatedString id=\"payment.instrument_manage_button\" />\n                    </button>\n                )}\n            </ModalTrigger>\n\n            <BasicFormField name=\"instrumentId\" render={renderInput} />\n\n            <div style={{ display: selectedInstrumentId ? undefined : 'none' }}>\n                {validateInstrument}\n            </div>\n        </Fieldset>\n    );\n};\n\nexport default memo(CardInstrumentFieldset);\n","export default function mapFromInstrumentCardType(type: string): string {\n    switch (type) {\n        case 'amex':\n        case 'american_express':\n            return 'american-express';\n\n        case 'diners':\n        case 'diners_club':\n            return 'diners-club';\n\n        default:\n            return type;\n    }\n}\n"],"names":["checkoutService","checkoutState","method","rest","initializeBoltPayment","useCallback","options","initializePayment","integrations","bolt","useBigCommerceCheckout","HostedPaymentComponent","deinitializePayment","agreementTranslationOptions","privacyPolicyUrl","termsUrl","benefitsList","id","BoltCreateAccountCheckbox","labelContent","TranslatedHtml","data","map","key","TranslatedString","CheckboxFormField","additionalClassName","name","containerId","showCreateAccountCheckbox","className","paymentForm","setShowCreateAccountCheckbox","useState","boltEmbeddedContainerId","hidePaymentSubmitButton","disableSubmit","setFieldValue","setSubmit","setValidationSchema","onPaymentSelect","hasBoltAccount","initializeBoltCustomer","initializeCustomer","renderCustomPaymentForm","getInstruments","isPaymentDataRequired","isInitializingPayment","isLoadingInstruments","statuses","instruments","customer","getCustomer","isGuestCustomer","isGuest","isInstrumentFeatureAvailable","Boolean","config","isVaultingEnabled","HostedWidgetPaymentComponent","isInitializing","isInstrumentCardCodeRequired","isInstrumentCardCodeRequiredSelector","isInstrumentCardNumberRequired","isInstrumentCardNumberRequiredSelector","isSignedIn","loadInstruments","shouldRenderCustomInstrument","signOut","signOutCustomer","initializationData","embeddedOneClickEnabled","props","description","onUnhandledError","noop","isAddingNewInstrument","setIsAddingNewInstrument","selectedInstrument","setSelectedInstrument","derivedProps","filterAccountInstruments","filter","filterTrustedInstruments","trustedShippingAddress","isUsingMultiShipping","getCart","getConfig","isPaymentDataSubmitted","cart","Error","currentMethodInstruments","trustedInstruments","isNewAddress","length","gateway","paymentMethod","getHostedPaymentMethodDerivedProps","isInstrumentFeatureAvailableProp","getDefaultInstrument","find","defaultInstrument","handleUseNewInstrument","undefined","handleSelectInstrument","bigpayToken","useEffect","gatewayId","methodId","error","currentSelectedInstrument","isLoading","shouldShowInstrumentFieldset","hideContentWhenLoading","A","onSelectInstrument","onUseNewInstrument","instrumentId","isAccountInstrument","EditButton","buttonId","shouldShowEditButton","translatedString","onClick","preventDefault","type","PaymentDescriptor","shouldShowDescriptor","paymentDescriptor","PaymentWidget","additionalContainerClassName","hideContentWhenSignedOut","hideWidget","isSignInRequired","shouldShowCreditCardFieldset","style","display","tabIndex","shouldHideInstrumentExpiryDate","shouldShow","hideVerificationFields","storedCardValidationSchema","deinitializeCustomer","signInCustomer","validateInstrument","isAddingNewCard","setIsAddingNewCard","selectedInstrumentId","setSelectedInstrumentId","instrumentsRef","useRef","current","getDefaultInstrumentId","instrument","getSelectedInstrument","currentSelectedId","getValidationSchema","getSelectedBankAccountInstrument","addingNew","handleDeleteInstrument","nextId","handleUseNewCard","getValidateInstrument","shouldShowNumberField","initializeMethod","currentInstruments","selectedCardInstrument","currentSelectedInstrumentId","maybeInstrument","isCardInstrument","effectiveSelectedInstrumentId","i","cardInstruments","accountInstruments","selectedAccountInstrument","shouldShowAccountInstrument","isInitialRenderRef","instrumentsLength","isPaymentDataRequiredRef","selectedInstrumentIdRef","Number","LoadingOverlay","AccountInstrumentFieldset","CardInstrumentFieldset","onDeleteInstrument","shouldHideExpiryDate","StoreInstrumentFieldset","PROVIDERS_WITHOUT_CARD_CODE","lineItems","isVaultingCvvEnabled","cardCode","isVaultingCardCodeValidationAvailable","includes","provider","digitalItems","giftCertificates","isVaultingCardNumberValidationAvailable","physicalItems","checkoutSettings","isCardVaultingEnabled","InstrumentMenuItem","testId","cardType","mapFromInstrumentCardType","brand","cardInfo","isExpired","expirationDate","month","expiryMonth","year","expiryYear","isValid","CreditCardIcon","cardTitle","niceType","endingIn","last4","expiryDate","InstrumentOption","handleClick","InstrumentUseNewButton","InstrumentMenu","InstrumentSelectButton","field","form","prevSelectedInstrumentIdRef","updateFieldValue","setTimeout","value","DropdownTrigger","dropdown","memo","renderInput","renderModal","ManageInstrumentsModal","Fieldset","legend","Legend","hidden","ModalTrigger","modal","BasicFormField","render"],"sourceRoot":""}