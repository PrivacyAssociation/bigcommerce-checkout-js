{"version":3,"file":"braintree-ach-payment-method-1ce30c7b.js","mappings":"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","sources":["webpack://checkout/./packages/braintree-integration/src/BraintreeAch/constants.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/hooks/useBraintreeAchInstruments.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/hooks/useBraintreeAchValidation.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/components/BraintreeAchFormFields.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/components/BraintreeAchMandateText.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/components/BraintreeAchPaymentForm.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeAch/BraintreeAchPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/hooks/useBraintreeFastlaneInstruments.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/components/BraintreeFastlaneCreditCardForm.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/components/BraintreeFastlaneInstrumentsForm.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/components/BraintreeFastlaneForm.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/index.ts","webpack://checkout/./packages/braintree-integration/src/BraintreeFastlane/BraintreeFastlanePaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeCreditCardsPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeLocalPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreePaypalPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/VisaCheckout/VisaCheckoutPaymentMethod.tsx","webpack://checkout/./packages/braintree-integration/src/BraintreeVenmo/BraintreeVenmoPaymentMethod.tsx","webpack://checkout/./packages/dom-utils/src/getAppliedStyles.ts","webpack://checkout/./packages/hosted-credit-card-integration/src/components/HostedCreditCardCodeField/HostedCreditCardCodeField.tsx","webpack://checkout/./packages/hosted-credit-card-integration/src/components/HostedCreditCardExpiryField.tsx","webpack://checkout/./packages/hosted-credit-card-integration/src/components/HostedCreditCardNameField.tsx","webpack://checkout/./packages/hosted-credit-card-integration/src/components/HostedCreditCardFieldset/HostedCreditCardFieldset.tsx","webpack://checkout/./packages/hosted-credit-card-integration/src/components/HostedCreditCardNumberField/HostedCreditCardNumberField.tsx","webpack://checkout/./packages/hosted-credit-card-integration/src/components/HostedCreditCardValidation/HostedCreditCardValidation.tsx","webpack://checkout/./packages/hosted-credit-card-integration/src/components/getHostedCreditCardValidationSchema/getHostedCreditCardValidationSchema.ts","webpack://checkout/./packages/hosted-credit-card-integration/src/components/getHostedInstrumentValidationSchema/getHostedInstrumentValidationSchema.ts","webpack://checkout/./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx","webpack://checkout/./packages/instrument-utils/src/creditCard/getCreditCardInputStyles/getCreditCardInputStyles.tsx","webpack://checkout/./packages/ui/src/form/DynamicFormField/MultiCheckboxControl.tsx","webpack://checkout/./packages/ui/src/form/DynamicFormField/CheckboxGroupFormField.tsx","webpack://checkout/./packages/ui/src/form/DynamicFormField/DynamicFormField.tsx","webpack://checkout/./packages/locale/src/withDate.tsx","webpack://checkout/./packages/ui/src/form/TextArea/TextArea.tsx","webpack://checkout/./packages/ui/src/form/DynamicFormField/DynamicInput.tsx","webpack://checkout/./packages/ui/src/form/RadioInput/RadioInput.tsx","webpack://checkout/./packages/ui/src/form/TextInputIframeContainer/TextInputIframeContainer.tsx","webpack://checkout/./packages/ui/src/icon/IconChevronDown.tsx","webpack://checkout/./packages/wallet-button-integration/src/normalizeWalletPaymentData.ts","webpack://checkout/./packages/payment-integration-api/src/PaymentMethodType.ts","webpack://checkout/./packages/payment-integration-api/src/getPaymentMethodName.ts","webpack://checkout/./packages/instrument-utils/src/storedInstrument/SignOutLink/SignOutLink.tsx","webpack://checkout/./packages/wallet-button-integration/src/PaymentView.tsx","webpack://checkout/./packages/wallet-button-integration/src/SignInView.tsx","webpack://checkout/./packages/wallet-button-integration/src/WalletButtonPaymentMethodComponent.tsx"],"sourcesContent":["import { type FormField } from '@bigcommerce/checkout-sdk';\n\nimport { DynamicFormFieldType } from '@bigcommerce/checkout/ui';\n\nexport enum BraintreeAchFieldType {\n    BusinessName = 'businessName',\n    AccountType = 'accountType',\n    AccountNumber = 'accountNumber',\n    RoutingNumber = 'routingNumber',\n    OwnershipType = 'ownershipType',\n    FirstName = 'firstName',\n    LastName = 'lastName',\n}\n\nexport enum OwnershipTypes {\n    Personal = 'Personal',\n    Business = 'Business',\n}\n\nexport enum AccountTypes {\n    Savings = 'Savings',\n    Checking = 'Checking',\n}\n\nconst accountTypeOptions = [\n    {\n        value: AccountTypes.Savings,\n        label: AccountTypes.Savings,\n    },\n    {\n        value: AccountTypes.Checking,\n        label: AccountTypes.Checking,\n    },\n];\n\nexport const ownershipTypeOptions = [\n    {\n        value: OwnershipTypes.Personal,\n        label: OwnershipTypes.Personal,\n    },\n    {\n        value: OwnershipTypes.Business,\n        label: OwnershipTypes.Business,\n    },\n];\n\nexport const defaultBraintreeAchFormFields: FormField[] = [\n    {\n        name: BraintreeAchFieldType.AccountType,\n        custom: false,\n        id: BraintreeAchFieldType.AccountType,\n        label: 'Account Type',\n        required: true,\n        fieldType: DynamicFormFieldType.DROPDOWM,\n        options: {\n            items: accountTypeOptions,\n        },\n    },\n    {\n        name: BraintreeAchFieldType.AccountNumber,\n        custom: false,\n        id: BraintreeAchFieldType.AccountNumber,\n        label: 'Account Number',\n        required: true,\n        max: 9,\n        min: 8,\n    },\n    {\n        name: BraintreeAchFieldType.RoutingNumber,\n        custom: false,\n        id: BraintreeAchFieldType.RoutingNumber,\n        label: 'Routing Number',\n        required: true,\n    },\n    {\n        name: BraintreeAchFieldType.OwnershipType,\n        custom: false,\n        id: BraintreeAchFieldType.OwnershipType,\n        label: 'Ownership Type',\n        required: true,\n        fieldType: DynamicFormFieldType.DROPDOWM,\n        options: {\n            items: ownershipTypeOptions,\n        },\n    },\n];\n\nexport const personalBraintreeAchFormFields: FormField[] = [\n    ...defaultBraintreeAchFormFields,\n    {\n        name: BraintreeAchFieldType.FirstName,\n        custom: false,\n        id: BraintreeAchFieldType.FirstName,\n        label: 'First Name',\n        required: true,\n    },\n    {\n        name: BraintreeAchFieldType.LastName,\n        custom: false,\n        id: BraintreeAchFieldType.LastName,\n        label: 'Last Name',\n        required: true,\n    },\n];\n\nexport const businessBraintreeAchFormFields: FormField[] = [\n    ...defaultBraintreeAchFormFields,\n    {\n        name: BraintreeAchFieldType.BusinessName,\n        custom: false,\n        id: BraintreeAchFieldType.BusinessName,\n        label: 'Business Name',\n        required: true,\n    },\n];\n","import { type AchInstrument, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { find } from 'lodash';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/contexts';\nimport { isAchInstrument } from '@bigcommerce/checkout/instrument-utils';\n\nconst useBraintreeAchInstruments = (method: PaymentMethod) => {\n    const [currentInstrument, setCurrentInstrument] = useState<AchInstrument | undefined>();\n\n    const { checkoutState } = useCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const instruments = checkoutState.data.getInstruments(method) || [];\n\n    const { paymentForm } = usePaymentFormContext();\n    const { setFieldValue } = paymentForm;\n\n    const accountInstruments = useMemo(() => instruments.filter(isAchInstrument), [instruments]);\n    const isInstrumentFeatureAvailable =\n        !customer?.isGuest && Boolean(method.config.isVaultingEnabled);\n    const shouldShowInstrumentFieldset =\n        isInstrumentFeatureAvailable && accountInstruments.length > 0;\n    const shouldCreateNewInstrument = shouldShowInstrumentFieldset && !currentInstrument;\n    const shouldConfirmInstrument =\n        shouldShowInstrumentFieldset &&\n        !!currentInstrument &&\n        !currentInstrument.trustedShippingAddress;\n\n    const getDefaultInstrument = useCallback((): AchInstrument | undefined => {\n        if (!accountInstruments.length) {\n            return;\n        }\n\n        const defaultAccountInstrument = accountInstruments.filter(\n            ({ defaultInstrument }) => defaultInstrument,\n        );\n\n        return defaultAccountInstrument[0] || accountInstruments[0];\n    }, [accountInstruments]);\n\n    useEffect(() => {\n        setCurrentInstrument(isInstrumentFeatureAvailable ? getDefaultInstrument() : undefined);\n    }, [isInstrumentFeatureAvailable, getDefaultInstrument]);\n\n    useEffect(() => {\n        if (!shouldShowInstrumentFieldset) {\n            setFieldValue('instrumentId', '');\n        }\n    }, [setFieldValue, shouldShowInstrumentFieldset]);\n\n    const handleSelectInstrument = useCallback(\n        (id: string) => {\n            setCurrentInstrument(find(accountInstruments, { bigpayToken: id }));\n            setFieldValue('instrumentId', id);\n            setFieldValue('shouldSetAsDefaultInstrument', false);\n        },\n        [accountInstruments, setFieldValue],\n    );\n\n    const handleUseNewInstrument = useCallback(() => {\n        setCurrentInstrument(undefined);\n        setFieldValue('instrumentId', '');\n        setFieldValue('shouldSaveInstrument', false);\n        setFieldValue('shouldSetAsDefaultInstrument', false);\n    }, [setFieldValue]);\n\n    return {\n        accountInstruments,\n        currentInstrument,\n        handleSelectInstrument,\n        handleUseNewInstrument,\n        isInstrumentFeatureAvailable,\n        shouldShowInstrumentFieldset,\n        shouldCreateNewInstrument,\n        shouldConfirmInstrument,\n    };\n};\n\nexport default useBraintreeAchInstruments;\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { useCallback } from 'react';\nimport { object, string, type StringSchema } from 'yup';\n\nimport { useLocale, usePaymentFormContext } from '@bigcommerce/checkout/contexts';\nimport { type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\n\nimport {\n    BraintreeAchFieldType,\n    businessBraintreeAchFormFields,\n    OwnershipTypes,\n    personalBraintreeAchFormFields,\n} from '../constants';\n\nconst useBraintreeAchValidation = (method: PaymentMethod) => {\n    const { paymentForm } = usePaymentFormContext();\n    const { language } = useLocale();\n\n    const getValidationSchema = () => {\n        const ownershipType = paymentForm.getFieldValue('ownershipType');\n        const formFields =\n            ownershipType === OwnershipTypes.Business\n                ? businessBraintreeAchFormFields\n                : personalBraintreeAchFormFields;\n\n        const requiredFieldErrorTranslationIds: { [fieldName: string]: string } = {\n            [BraintreeAchFieldType.FirstName]: 'address.first_name',\n            [BraintreeAchFieldType.LastName]: 'address.last_name',\n            [BraintreeAchFieldType.AccountNumber]: 'payment.errors.account_number',\n            [BraintreeAchFieldType.RoutingNumber]: 'payment.errors.routing_number',\n            [BraintreeAchFieldType.BusinessName]: 'payment.errors.business_name',\n        };\n\n        return object(\n            formFields.reduce(\n                (schema, { id, required }) => {\n                    if (required) {\n                        if (requiredFieldErrorTranslationIds[id]) {\n                            schema[id] = string().required(\n                                language.translate(\n                                    `${requiredFieldErrorTranslationIds[id]}_required_error`,\n                                ),\n                            );\n\n                            if (id === BraintreeAchFieldType.AccountNumber) {\n                                schema[id] = schema[id].matches(\n                                    /^\\d+$/,\n                                    language.translate('payment.errors.only_numbers_error', {\n                                        label: language.translate('payment.account_number_label'),\n                                    }),\n                                );\n                            }\n\n                            if (id === BraintreeAchFieldType.RoutingNumber) {\n                                schema[id] = schema[id]\n                                    .matches(\n                                        /^\\d+$/,\n                                        language.translate('payment.errors.only_numbers_error', {\n                                            label: language.translate(\n                                                'payment.account_routing_label',\n                                            ),\n                                        }),\n                                    )\n                                    .min(\n                                        8,\n                                        language.translate('customer.min_error', {\n                                            label: language.translate(\n                                                'payment.account_routing_label',\n                                            ),\n                                            min: 8,\n                                        }),\n                                    )\n                                    .max(\n                                        9,\n                                        language.translate('customer.max_error', {\n                                            label: language.translate(\n                                                'payment.account_routing_label',\n                                            ),\n                                            max: 9,\n                                        }),\n                                    );\n                            }\n                        }\n                    }\n\n                    return schema;\n                },\n                // eslint-disable-next-line @typescript-eslint/prefer-reduce-type-parameter\n                {} as { [key: string]: StringSchema },\n            ),\n        );\n    };\n\n    const validateBraintreeAchForm = useCallback(\n        async (braintreeAchFormValues: PaymentFormValues): Promise<boolean> => {\n            const {\n                accountNumber,\n                businessName,\n                routingNumber,\n                ownershipType,\n                firstName,\n                lastName,\n            } = braintreeAchFormValues;\n\n            const validationSchema = getValidationSchema();\n\n            paymentForm.setValidationSchema(method, validationSchema);\n\n            const [\n                isValidAccountNumber,\n                isValidRoutingNumber,\n                isValidFirstName,\n                isValidLastName,\n                isValidBusinessName,\n            ] = await Promise.all([\n                await validationSchema.fields.accountNumber?.isValid(accountNumber),\n                await validationSchema.fields.routingNumber?.isValid(routingNumber),\n                await validationSchema.fields.firstName?.isValid(firstName),\n                await validationSchema.fields.lastName?.isValid(lastName),\n                await validationSchema.fields.businessName?.isValid(businessName),\n            ]);\n\n            const isValidDepositoryName =\n                ownershipType === OwnershipTypes.Business\n                    ? isValidBusinessName\n                    : isValidFirstName && isValidLastName;\n\n            return isValidRoutingNumber && isValidAccountNumber && isValidDepositoryName;\n        },\n        [getValidationSchema],\n    );\n\n    const resetFormValidation = useCallback(() => {\n        paymentForm.setValidationSchema(method, null);\n    }, [paymentForm, method]);\n\n    return {\n        validateBraintreeAchForm,\n        resetFormValidation,\n    };\n};\n\nexport default useBraintreeAchValidation;\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { useLocale, usePaymentFormContext } from '@bigcommerce/checkout/contexts';\nimport { DynamicFormField } from '@bigcommerce/checkout/ui';\n\nimport {\n    BraintreeAchFieldType,\n    businessBraintreeAchFormFields,\n    OwnershipTypes,\n    personalBraintreeAchFormFields,\n} from '../constants';\n\nconst isBraintreeAchFormFieldName = (fieldName: string): fieldName is BraintreeAchFieldType => {\n    return Object.values(BraintreeAchFieldType).includes(fieldName as BraintreeAchFieldType);\n};\n\nconst getTranslatedLabelByFieldName = (fieldName: string, language: LanguageService) => {\n    const braintreeAchFormLabelsMap = {\n        firstName: language.translate('address.first_name_label'),\n        lastName: language.translate('address.last_name_label'),\n        accountNumber: language.translate('payment.account_number_label'),\n        routingNumber: language.translate('payment.account_routing_label'),\n        businessName: language.translate('payment.business_name_label'),\n        ownershipType: language.translate('payment.ownership_type_label'),\n        accountType: language.translate('payment.account_type_label'),\n    };\n\n    return isBraintreeAchFormFieldName(fieldName)\n        ? braintreeAchFormLabelsMap[fieldName]\n        : fieldName;\n};\n\nconst BraintreeAchFormFields: FunctionComponent = () => {\n    const { language } = useLocale();\n    const { paymentForm } = usePaymentFormContext();\n    const { getFieldValue, setFieldValue } = paymentForm;\n\n    const ownershipTypeValue = getFieldValue(BraintreeAchFieldType.OwnershipType);\n    const fieldValues =\n        ownershipTypeValue === OwnershipTypes.Business\n            ? businessBraintreeAchFormFields\n            : personalBraintreeAchFormFields;\n\n    const handleChange = useCallback(\n        (fieldId: string) => (value: string) => {\n            setFieldValue(fieldId, value);\n        },\n        [setFieldValue],\n    );\n\n    return (\n        <>\n            {fieldValues.map((field) => (\n                <DynamicFormField\n                    extraClass={`dynamic-form-field--${field.id}`}\n                    field={field}\n                    key={field.id}\n                    label={getTranslatedLabelByFieldName(field.name, language)}\n                    onChange={handleChange(field.id)}\n                />\n            ))}\n        </>\n    );\n};\n\nexport default BraintreeAchFormFields;\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { useCheckout, useLocale, usePaymentFormContext } from '@bigcommerce/checkout/contexts';\nimport { CheckboxFormField } from '@bigcommerce/checkout/ui';\n\nimport { OwnershipTypes } from '../constants';\n\nexport interface BraintreeAchMandateTextProps {\n    isInstrumentFeatureAvailable?: boolean;\n    updateMandateText: (mandateText: string) => void;\n}\n\nconst BraintreeAchMandateText: FunctionComponent<BraintreeAchMandateTextProps> = ({\n    isInstrumentFeatureAvailable,\n    updateMandateText,\n}) => {\n    const { checkoutState } = useCheckout();\n    const { paymentForm } = usePaymentFormContext();\n    const { language } = useLocale();\n\n    const {\n        businessName,\n        accountType,\n        accountNumber,\n        routingNumber,\n        ownershipType,\n        firstName,\n        lastName,\n    } = paymentForm.getFormValues();\n\n    const fullName = `${String(firstName)} ${String(lastName)}`;\n\n    const depositoryName = ownershipType === OwnershipTypes.Business ? businessName : fullName;\n    const outstandingBalance = checkoutState.data.getCheckout()?.outstandingBalance;\n    const storeName = checkoutState.data.getConfig()?.storeProfile.storeName;\n    const symbol = checkoutState.data.getCart()?.currency.symbol;\n\n    const mandateTextTranslationKey = isInstrumentFeatureAvailable\n        ? 'payment.braintreeach_vaulting_mandate_text'\n        : 'payment.braintreeach_mandate_text';\n\n    const currentDate = new Date(Date.now()).toJSON().slice(0, 10); // yyyy-mm-dd\n    const formattedDate = currentDate.split('-').reverse().join('.'); // dd.mm.yyyy\n\n    const mandateTextTranslationProps = {\n        accountType: String(accountType).toLowerCase(),\n        accountNumber: String(accountNumber),\n        currentDate: formattedDate,\n        depositoryName: String(depositoryName),\n        routingNumber: String(routingNumber),\n        outstandingBalance: `${symbol || ''}${outstandingBalance || ''}`,\n        storeName: String(storeName),\n    };\n\n    const mandateText = language.translate(mandateTextTranslationKey, mandateTextTranslationProps);\n\n    useEffect(() => {\n        updateMandateText(mandateText);\n    }, [mandateText, updateMandateText]);\n\n    const handleChange = (value: boolean) => {\n        paymentForm.setFieldValue('orderConsent', value);\n    };\n\n    return (\n        <div className=\"mandate-text\" data-test=\"mandate-text\">\n            <CheckboxFormField\n                labelContent={mandateText}\n                name=\"orderConsent\"\n                onChange={handleChange}\n            />\n        </div>\n    );\n};\n\nexport default BraintreeAchMandateText;\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, useEffect, useState } from 'react';\n\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/contexts';\nimport {\n    AccountInstrumentFieldset,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { AccountTypes, OwnershipTypes } from '../constants';\nimport useBraintreeAchInstruments from '../hooks/useBraintreeAchInstruments';\nimport useBraintreeAchValidation from '../hooks/useBraintreeAchValidation';\n\nimport BraintreeAchFormFields from './BraintreeAchFormFields';\nimport BraintreeAchMandateText from './BraintreeAchMandateText';\n\nexport interface BraintreeAchPaymentFormProps {\n    method: PaymentMethod;\n    updateMandateText: (mandateText: string) => void;\n}\n\nconst BraintreeAchPaymentForm: FunctionComponent<BraintreeAchPaymentFormProps> = ({\n    method,\n    updateMandateText,\n}) => {\n    const [isValidForm, setIsValidForm] = useState(false);\n    const { checkoutState } = useCheckout();\n    const { paymentForm } = usePaymentFormContext();\n    const { disableSubmit, getFieldValue, getFormValues, setFieldValue } = paymentForm;\n    const {\n        accountInstruments,\n        currentInstrument,\n        handleSelectInstrument,\n        handleUseNewInstrument,\n        isInstrumentFeatureAvailable,\n        shouldShowInstrumentFieldset,\n        shouldCreateNewInstrument,\n        shouldConfirmInstrument,\n    } = useBraintreeAchInstruments(method);\n    const { validateBraintreeAchForm, resetFormValidation } = useBraintreeAchValidation(method);\n\n    const resetFormValues = () => {\n        const { firstName, lastName } = checkoutState.data.getBillingAddress() || {};\n\n        const defaultFormValues = {\n            ownershipType: OwnershipTypes.Personal,\n            accountType: AccountTypes.Savings,\n            accountNumber: '',\n            routingNumber: '',\n            businessName: '',\n            firstName: firstName || '',\n            lastName: lastName || '',\n            shouldSaveInstrument: false,\n            shouldSetAsDefaultInstrument: false,\n            instrumentId: currentInstrument?.bigpayToken || '',\n            orderConsent: false,\n        };\n\n        for (const [key, value] of Object.entries(defaultFormValues)) {\n            setFieldValue(key, value);\n        }\n    };\n\n    useEffect(() => {\n        resetFormValues();\n    }, [currentInstrument?.bigpayToken]);\n\n    const shouldShowForm =\n        !shouldShowInstrumentFieldset || shouldCreateNewInstrument || shouldConfirmInstrument;\n    const shouldShowMandateTextCheckbox = shouldShowForm && isValidForm && !shouldConfirmInstrument;\n\n    useEffect(() => {\n        if (shouldShowForm) {\n            const validate = async () => {\n                const braintreeAchFormValues = getFormValues();\n                const isValid = await validateBraintreeAchForm(braintreeAchFormValues);\n\n                if (!isValid && getFieldValue('orderConsent')) {\n                    setFieldValue('orderConsent', false);\n                }\n\n                setIsValidForm(isValid);\n            };\n\n            void validate();\n        } else {\n            resetFormValidation();\n        }\n    }, [\n        getFormValues,\n        setFieldValue,\n        setIsValidForm,\n        shouldShowForm,\n        validateBraintreeAchForm,\n        resetFormValidation,\n    ]);\n\n    useEffect(() => {\n        const mandateTextConfirmationCheckboxValue = getFieldValue('orderConsent');\n\n        const inValidForInstrumentConfirmation = shouldConfirmInstrument && !isValidForm;\n        const inValidForDefaultTransactions =\n            shouldShowMandateTextCheckbox && !mandateTextConfirmationCheckboxValue;\n\n        const shouldDisableSubmit = shouldShowForm\n            ? inValidForInstrumentConfirmation || inValidForDefaultTransactions\n            : false;\n\n        disableSubmit(method, shouldDisableSubmit);\n    }, [disableSubmit, getFieldValue, isValidForm, method, shouldShowMandateTextCheckbox]);\n\n    return (\n        <div className=\"checkout-ach-form\" data-test=\"checkout-ach-form\">\n            {shouldShowInstrumentFieldset && (\n                <div className=\"checkout-ach-form__instrument\">\n                    <AccountInstrumentFieldset\n                        instruments={accountInstruments}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewInstrument}\n                        selectedInstrument={currentInstrument}\n                    />\n                </div>\n            )}\n\n            {shouldConfirmInstrument && (\n                <p>\n                    <strong>\n                        <TranslatedString id=\"payment.bank_account_instrument_trusted_shipping_address_title_text\" />\n                    </strong>\n\n                    <br />\n\n                    <TranslatedString id=\"payment.bank_account_instrument_trusted_shipping_address_text\" />\n                </p>\n            )}\n\n            {shouldShowForm && <BraintreeAchFormFields />}\n\n            {isInstrumentFeatureAvailable && (\n                <StoreInstrumentFieldset\n                    instrumentId={currentInstrument?.bigpayToken}\n                    instruments={accountInstruments}\n                    isAccountInstrument\n                />\n            )}\n\n            {shouldShowMandateTextCheckbox && (\n                <BraintreeAchMandateText\n                    isInstrumentFeatureAvailable={isInstrumentFeatureAvailable}\n                    updateMandateText={updateMandateText}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default BraintreeAchPaymentForm;\n","import { createBraintreeAchPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/braintree';\nimport React, { type FunctionComponent, useEffect, useRef } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { FormContext, LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport BraintreeAchPaymentForm from './components/BraintreeAchPaymentForm';\n\nconst BraintreeAchPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    checkoutState,\n    onUnhandledError,\n    paymentForm,\n}) => {\n    const currentMandateTextRef = useRef('');\n    const updateMandateText = (currentMandateText: string) => {\n        currentMandateTextRef.current = currentMandateText;\n    };\n\n    useEffect(() => {\n        const initializePaymentOrThrow = async () => {\n            try {\n                await checkoutService.initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                    integrations: [createBraintreeAchPaymentStrategy],\n                    braintreeach: {\n                        getMandateText: () => currentMandateTextRef.current,\n                    },\n                });\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        void initializePaymentOrThrow();\n\n        return () => {\n            const deinitializePaymentOrThrow = async () => {\n                try {\n                    await checkoutService.deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            };\n\n            void deinitializePaymentOrThrow();\n        };\n    }, [checkoutService, method.gateway, method.id, onUnhandledError]);\n\n    useEffect(() => {\n        const loadInstrumentsOrThrow = async () => {\n            try {\n                await checkoutService.loadInstruments();\n            } catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        };\n\n        const { isGuest } = checkoutState.data.getCustomer() || {};\n\n        const shouldLoadInstruments = !isGuest && method.config.isVaultingEnabled;\n\n        if (shouldLoadInstruments) {\n            void loadInstrumentsOrThrow();\n        }\n    }, []);\n\n    const isLoading =\n        checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n\n    return (\n        <FormContext.Provider value={formContextProps}>\n            <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n                <BraintreeAchPaymentForm method={method} updateMandateText={updateMandateText} />\n            </LoadingOverlay>\n        </FormContext.Provider>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeAchPaymentMethod,\n    [{ id: 'braintreeach' }],\n);\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport { useState } from 'react';\n\nimport { useCheckout, usePaymentFormContext } from '@bigcommerce/checkout/contexts';\nimport { isPayPalFastlaneCustomer } from '@bigcommerce/checkout/paypal-fastlane-integration';\n\nexport const useBraintreeFastlaneInstruments = () => {\n    const [selectedInstrument, setSelectedInstrument] = useState<CardInstrument>();\n\n    const { getPaymentProviderCustomer } = useCheckout().checkoutState.data;\n    const paymentProviderCustomer = getPaymentProviderCustomer();\n    const paypalFastlaneCustomer = isPayPalFastlaneCustomer(paymentProviderCustomer)\n        ? paymentProviderCustomer\n        : {};\n\n    const { paymentForm } = usePaymentFormContext();\n\n    const handleSelectInstrument = (instrument: CardInstrument): void => {\n        setSelectedInstrument(instrument);\n        paymentForm.setFieldValue('instrumentId', instrument.bigpayToken);\n    };\n\n    return {\n        instruments: paypalFastlaneCustomer.instruments || [],\n        handleSelectInstrument,\n        selectedInstrument,\n    };\n};\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { type BraintreeFastlaneComponentRef } from '../BraintreeFastlanePaymentMethod';\n\nimport './BraintreeFastlaneCreditCardForm.scss';\n\ninterface BraintreeFastlaneCreditCardFormProps {\n    renderPayPalCardComponent?: BraintreeFastlaneComponentRef['renderPayPalCardComponent'];\n}\n\nconst BraintreeFastlaneCreditCardForm: FunctionComponent<BraintreeFastlaneCreditCardFormProps> = ({\n    renderPayPalCardComponent,\n}) => {\n    useEffect(() => {\n        if (typeof renderPayPalCardComponent === 'function') {\n            renderPayPalCardComponent('#braintree-fastlane-cc-form-container');\n        }\n    }, [renderPayPalCardComponent]);\n\n    return (\n        <div\n            className=\"braintree-fastlane-cc-form-container\"\n            data-test=\"braintree-fastlane-cc-form-container\"\n            id=\"braintree-fastlane-cc-form-container\"\n        />\n    );\n};\n\nexport default BraintreeFastlaneCreditCardForm;\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { PoweredByPayPalFastlaneLabel } from '@bigcommerce/checkout/paypal-fastlane-integration';\nimport { Button, ButtonSize, ButtonVariant, CreditCardIcon } from '@bigcommerce/checkout/ui';\n\nimport { type BraintreeFastlaneComponentRef } from '../BraintreeFastlanePaymentMethod';\n\nimport './BraintreeFastlaneInstrumentsForm.scss';\n\nfunction mapFromInstrumentCardType(type: string): string {\n    switch (type.toLowerCase()) {\n        case 'amex':\n        case 'american_express':\n            return 'american-express';\n\n        case 'diners':\n            return 'diners-club';\n\n        case 'master_card':\n            return 'mastercard';\n\n        default:\n            return type;\n    }\n}\n\ninterface BraintreeFastlaneInstrumentsFormProps {\n    onChange: BraintreeFastlaneComponentRef['showPayPalCardSelector'];\n    selectedInstrument: CardInstrument;\n    handleSelectInstrument(instrument: CardInstrument): void;\n}\n\nconst BraintreeFastlaneInstrumentsForm: FunctionComponent<\n    BraintreeFastlaneInstrumentsFormProps\n> = ({ onChange, handleSelectInstrument, selectedInstrument }) => {\n    const cardType = mapFromInstrumentCardType(selectedInstrument.brand).toLowerCase();\n\n    const handleChange = async () => {\n        if (typeof onChange === 'function') {\n            const result = await onChange();\n\n            if (result) {\n                handleSelectInstrument(result);\n            }\n        }\n    };\n\n    return (\n        <div\n            className=\"braintree-fastlane-instrument\"\n            data-test=\"braintree-fastlane-instrument-form\"\n        >\n            <div>\n                <div className=\"braintree-fastlane-instrument-details\">\n                    <CreditCardIcon cardType={cardType} />\n\n                    <div\n                        className=\"instrumentSelect-card\"\n                        data-test=\"braintree-fastlane-instrument-last4\"\n                    >\n                        {/* &#9679; is a  */}\n                        <span>&#9679;&#9679;&#9679;&#9679; {selectedInstrument.last4}</span>\n                    </div>\n                </div>\n                <div className=\"braintree-fastlane-instrument-branding\">\n                    <PoweredByPayPalFastlaneLabel />\n                </div>\n            </div>\n\n            <div className=\"braintree-fastlane-instrument-change-action\">\n                <Button\n                    onClick={handleChange}\n                    size={ButtonSize.Tiny}\n                    testId=\"braintree-fastlane-instrument-change\"\n                    variant={ButtonVariant.Secondary}\n                >\n                    <TranslatedString id=\"common.change_action\" />\n                </Button>\n            </div>\n        </div>\n    );\n};\n\nexport default BraintreeFastlaneInstrumentsForm;\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { type BraintreeFastlaneComponentRef } from '../BraintreeFastlanePaymentMethod';\nimport { useBraintreeFastlaneInstruments } from '../hooks/useBraintreeFastlaneInstruments';\n\nimport BraintreFastlaneCreditCardForm from './BraintreeFastlaneCreditCardForm';\nimport BraintreeFastlaneInstrumentsForm from './BraintreeFastlaneInstrumentsForm';\n\ninterface BraintreeFastlaneFormProps {\n    renderPayPalCardComponent?: BraintreeFastlaneComponentRef['renderPayPalCardComponent'];\n    showPayPalCardSelector?: BraintreeFastlaneComponentRef['showPayPalCardSelector'];\n}\n\nconst BraintreeFastlaneForm: FunctionComponent<BraintreeFastlaneFormProps> = ({\n    renderPayPalCardComponent,\n    showPayPalCardSelector,\n}) => {\n    const { instruments, handleSelectInstrument, selectedInstrument } =\n        useBraintreeFastlaneInstruments();\n\n    const shouldShowInstrumentsForm = instruments.length > 0;\n\n    useEffect(() => {\n        if (!selectedInstrument && instruments.length > 0) {\n            handleSelectInstrument(instruments[0]);\n        }\n    }, [instruments, selectedInstrument]);\n\n    return (\n        <div className=\"paymentMethod paymentMethod--creditCard\" id=\"braintree-fastlane\">\n            {shouldShowInstrumentsForm && (\n                <BraintreeFastlaneInstrumentsForm\n                    handleSelectInstrument={handleSelectInstrument}\n                    onChange={showPayPalCardSelector}\n                    selectedInstrument={selectedInstrument || instruments[0]}\n                />\n            )}\n\n            {!shouldShowInstrumentsForm && (\n                <BraintreFastlaneCreditCardForm\n                    renderPayPalCardComponent={renderPayPalCardComponent}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default BraintreeFastlaneForm;\n","import BraintreeFastlanePaymentMethod from './BraintreeFastlanePaymentMethod';\n\nexport default BraintreeFastlanePaymentMethod;\n","import { type CardInstrument } from '@bigcommerce/checkout-sdk';\nimport { createBraintreeFastlanePaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/braintree';\nimport React, { type FunctionComponent, useEffect, useRef } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { FormContext, LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport BraintreeFastlaneForm from './components/BraintreeFastlaneForm';\n\nimport './BraintreeFastlanePaymentMethod.scss';\n\nexport interface BraintreeFastlaneComponentRef {\n    renderPayPalCardComponent?: (container: string) => void;\n    showPayPalCardSelector?: () => Promise<CardInstrument | undefined>;\n}\n\nconst BraintreeFastlanePaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    checkoutState,\n    onUnhandledError,\n    paymentForm,\n}) => {\n    const paypalFastlaneComponentRef = useRef<BraintreeFastlaneComponentRef>({});\n\n    const { isLoadingPaymentMethod, isInitializingPayment } = checkoutState.statuses;\n\n    const initializePaymentOrThrow = async () => {\n        try {\n            await checkoutService.initializePayment({\n                methodId: method.id,\n                integrations: [createBraintreeFastlanePaymentStrategy],\n                braintreefastlane: {\n                    onInit: (renderPayPalCardComponent) => {\n                        paypalFastlaneComponentRef.current.renderPayPalCardComponent =\n                            renderPayPalCardComponent;\n                    },\n                    onChange: (showPayPalCardSelector) => {\n                        paypalFastlaneComponentRef.current.showPayPalCardSelector =\n                            showPayPalCardSelector;\n                    },\n                    onError: (error: Error) => {\n                        onUnhandledError(error);\n                    },\n                },\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    };\n\n    const deinitializePaymentOrThrow = async () => {\n        try {\n            await checkoutService.deinitializePayment({\n                methodId: method.id,\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    };\n\n    useEffect(() => {\n        void initializePaymentOrThrow();\n\n        return () => {\n            void deinitializePaymentOrThrow();\n        };\n    }, []);\n\n    const isLoading = isInitializingPayment() || isLoadingPaymentMethod(method.id);\n\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n\n    return (\n        <FormContext.Provider value={formContextProps}>\n            <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n                <BraintreeFastlaneForm\n                    renderPayPalCardComponent={\n                        paypalFastlaneComponentRef?.current?.renderPayPalCardComponent\n                    }\n                    showPayPalCardSelector={\n                        paypalFastlaneComponentRef.current?.showPayPalCardSelector\n                    }\n                />\n            </LoadingOverlay>\n        </FormContext.Provider>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeFastlanePaymentMethod,\n    [{ id: 'braintreeacceleratedcheckout' }],\n);\n","import { type CardInstrument, type LegacyHostedFormOptions } from '@bigcommerce/checkout-sdk';\nimport { createBraintreeCreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/braintree';\nimport { compact, forIn } from 'lodash';\nimport React, {\n    createRef,\n    type FunctionComponent,\n    type ReactNode,\n    type RefObject,\n    useCallback,\n    useRef,\n    useState,\n} from 'react';\n\nimport {\n    CreditCardPaymentMethodComponent,\n    type CreditCardPaymentMethodProps,\n} from '@bigcommerce/checkout/credit-card-integration';\nimport {\n    getHostedCreditCardValidationSchema,\n    getHostedInstrumentValidationSchema,\n    HostedCreditCardFieldset,\n    HostedCreditCardValidation,\n} from '@bigcommerce/checkout/hosted-credit-card-integration';\nimport {\n    CreditCardCustomerCodeField,\n    CreditCardInputStylesType,\n    getCreditCardInputStyles,\n    isInstrumentCardCodeRequiredSelector,\n    isInstrumentCardNumberRequiredSelector,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { Modal } from '@bigcommerce/checkout/ui';\n\ninterface BraintreeCreditCardPaymentMethodRef {\n    threeDSecureContentRef: RefObject<HTMLDivElement>;\n    cancelThreeDSecureVerification?(): void;\n}\n\nconst BraintreeCreditCardsPaymentMethod: FunctionComponent<PaymentMethodProps> = (props) => {\n    const { checkoutService, checkoutState, paymentForm, language, method, onUnhandledError } =\n        props;\n    const { isHostedFormEnabled } = method.config;\n\n    const [threeDSecureContent, setThreeDSecureContent] = useState<HTMLElement>();\n    const [focusedFieldType, setFocusedFieldType] = useState<string>();\n\n    const ref = useRef<BraintreeCreditCardPaymentMethodRef>({\n        threeDSecureContentRef: createRef(),\n    });\n\n    const { cardCode, showCardHolderName, requireCustomerCode } = method.config;\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n    const isInstrumentCardCodeRequiredProp = isInstrumentCardCodeRequiredSelector(checkoutState);\n    const isInstrumentCardNumberRequiredProp =\n        isInstrumentCardNumberRequiredSelector(checkoutState);\n\n    const isCardCodeRequired = cardCode || cardCode === null;\n    const isCardHolderNameRequired = showCardHolderName ?? true;\n\n    const getHostedFieldId: (name: string) => string = useCallback(\n        (name) => {\n            return `${compact([method.gateway, method.id]).join('-')}-${name}`;\n        },\n        [method],\n    );\n\n    const getHostedFormOptions: (\n        selectedInstrument?: CardInstrument,\n    ) => Promise<LegacyHostedFormOptions> = useCallback(\n        async (selectedInstrument) => {\n            const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n\n            const isInstrumentCardNumberRequired = selectedInstrument\n                ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n                : false;\n            const isInstrumentCardCodeRequired = selectedInstrument\n                ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n                : false;\n\n            // Info: to generate valid nonce for vaulted instrument with untrusted shipping address, all hosted fields must be rendered\n            const shouldRenderHostedFields =\n                isInstrumentCardNumberRequired || isInstrumentCardCodeRequired;\n\n            let styleContainerId;\n\n            if (selectedInstrument && shouldRenderHostedFields) {\n                styleContainerId = getHostedFieldId('ccCvv');\n            }\n\n            if (!selectedInstrument) {\n                styleContainerId = getHostedFieldId('ccNumber');\n            }\n\n            return {\n                fields: selectedInstrument\n                    ? {\n                          cardCodeVerification:\n                              isInstrumentCardCodeRequired && selectedInstrument\n                                  ? {\n                                        accessibilityLabel: language.translate(\n                                            'payment.credit_card_cvv_label',\n                                        ),\n                                        containerId: getHostedFieldId('ccCvv'),\n                                        instrumentId: selectedInstrument.bigpayToken,\n                                    }\n                                  : undefined,\n                          cardNumberVerification:\n                              isInstrumentCardNumberRequired && selectedInstrument\n                                  ? {\n                                        accessibilityLabel: language.translate(\n                                            'payment.credit_card_number_label',\n                                        ),\n                                        containerId: getHostedFieldId('ccNumber'),\n                                        instrumentId: selectedInstrument.bigpayToken,\n                                    }\n                                  : undefined,\n                      }\n                    : {\n                          cardCode: isCardCodeRequired\n                              ? {\n                                    accessibilityLabel: language.translate(\n                                        'payment.credit_card_cvv_label',\n                                    ),\n                                    containerId: getHostedFieldId('ccCvv'),\n                                }\n                              : undefined,\n                          cardExpiry: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_expiration_label',\n                              ),\n                              containerId: getHostedFieldId('ccExpiry'),\n                              placeholder: language.translate(\n                                  'payment.credit_card_expiration_placeholder_text',\n                              ),\n                          },\n                          cardName: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_name_label',\n                              ),\n                              containerId: getHostedFieldId('ccName'),\n                          },\n                          cardNumber: {\n                              accessibilityLabel: language.translate(\n                                  'payment.credit_card_number_label',\n                              ),\n                              containerId: getHostedFieldId('ccNumber'),\n                          },\n                      },\n                styles: styleContainerId\n                    ? {\n                          default: await getCreditCardInputStyles(styleContainerId, styleProps),\n                          error: await getCreditCardInputStyles(\n                              styleContainerId,\n                              styleProps,\n                              CreditCardInputStylesType.Error,\n                          ),\n                          focus: await getCreditCardInputStyles(\n                              styleContainerId,\n                              styleProps,\n                              CreditCardInputStylesType.Focus,\n                          ),\n                      }\n                    : {},\n                onBlur: ({ fieldType }) => {\n                    if (focusedFieldType === fieldType) {\n                        setFocusedFieldType(undefined);\n                    }\n                },\n                onCardTypeChange: ({ cardType }) => {\n                    setFieldValue('hostedForm.cardType', cardType);\n                },\n                onEnter: () => {\n                    setSubmitted(true);\n                    submitForm();\n                },\n                onFocus: ({ fieldType }) => {\n                    setFocusedFieldType(fieldType);\n                },\n                onValidate: ({ errors = {} }) => {\n                    forIn(errors, (fieldErrors, fieldType) => {\n                        const errorKey = `hostedForm.errors.${fieldType}`;\n\n                        setFieldValue(\n                            errorKey,\n                            fieldErrors && fieldErrors[0].type ? fieldErrors[0].type : '',\n                        );\n\n                        if (fieldErrors && fieldErrors[0]) {\n                            setFieldTouched(errorKey);\n                        }\n                    });\n                },\n            };\n        },\n        [\n            focusedFieldType,\n            getHostedFieldId,\n            isCardCodeRequired,\n            isCardHolderNameRequired,\n            isInstrumentCardCodeRequiredProp,\n            isInstrumentCardNumberRequiredProp,\n            language,\n            method,\n            setFieldValue,\n            setFieldTouched,\n            setFocusedFieldType,\n            setSubmitted,\n            submitForm,\n        ],\n    );\n\n    const getHostedStoredCardValidationFieldset: (\n        selectedInstrument?: CardInstrument,\n    ) => ReactNode = useCallback(\n        (selectedInstrument) => {\n            const isInstrumentCardNumberRequired = selectedInstrument\n                ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n                : false;\n            const isInstrumentCardCodeRequired = selectedInstrument\n                ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n                : false;\n\n            return (\n                <HostedCreditCardValidation\n                    cardCodeId={\n                        isInstrumentCardCodeRequired ? getHostedFieldId('ccCvv') : undefined\n                    }\n                    cardNumberId={\n                        isInstrumentCardNumberRequired ? getHostedFieldId('ccNumber') : undefined\n                    }\n                    focusedFieldType={focusedFieldType}\n                />\n            );\n        },\n        [\n            focusedFieldType,\n            getHostedFieldId,\n            isInstrumentCardCodeRequiredProp,\n            isInstrumentCardNumberRequiredProp,\n            method,\n        ],\n    );\n\n    const initializePayment = checkoutService.initializePayment;\n\n    const initializeBraintreePayment: CreditCardPaymentMethodProps['initializePayment'] =\n        useCallback(\n            async (options, selectedInstrument) => {\n                return initializePayment({\n                    ...options,\n                    integrations: [createBraintreeCreditCardPaymentStrategy],\n                    braintree: {\n                        threeDSecure: {\n                            addFrame(\n                                error: Error | undefined,\n                                content: HTMLIFrameElement,\n                                cancel: () => Promise<unknown> | undefined,\n                            ) {\n                                if (error) {\n                                    return onUnhandledError(error);\n                                }\n\n                                setThreeDSecureContent(content);\n                                ref.current.cancelThreeDSecureVerification = cancel;\n                            },\n                            removeFrame() {\n                                setThreeDSecureContent(undefined);\n                                ref.current.cancelThreeDSecureVerification = undefined;\n                            },\n                        },\n                        onPaymentError(error: Error) {\n                            if (error.message === 'THREEDS_VERIFICATION_FAILED') {\n                                onUnhandledError?.(\n                                    new Error(\n                                        language.translate(\n                                            'payment.errors.three_d_secure_payment_failed',\n                                        ),\n                                    ),\n                                );\n                            } else {\n                                onUnhandledError?.(error);\n                            }\n                        },\n                        form: isHostedFormEnabled\n                            ? await getHostedFormOptions(selectedInstrument)\n                            : undefined,\n                    },\n                });\n            },\n            [getHostedFormOptions, initializePayment, onUnhandledError],\n        );\n\n    const appendThreeDSecureContent = useCallback(() => {\n        if (ref.current.threeDSecureContentRef.current && threeDSecureContent) {\n            ref.current.threeDSecureContentRef.current.appendChild(threeDSecureContent);\n        }\n    }, [threeDSecureContent]);\n\n    const cancelThreeDSecureModalFlow = useCallback(() => {\n        setThreeDSecureContent(undefined);\n\n        if (ref.current.cancelThreeDSecureVerification) {\n            ref.current.cancelThreeDSecureVerification();\n            ref.current.cancelThreeDSecureVerification = undefined;\n        }\n    }, []);\n\n    if (!method.config.isHostedFormEnabled) {\n        return (\n            <CreditCardPaymentMethodComponent\n                {...props}\n                deinitializePayment={checkoutService.deinitializePayment}\n                initializePayment={initializeBraintreePayment}\n            />\n        );\n    }\n\n    return (\n        <>\n            <CreditCardPaymentMethodComponent\n                {...props}\n                cardFieldset={\n                    <HostedCreditCardFieldset\n                        additionalFields={\n                            requireCustomerCode && (\n                                <CreditCardCustomerCodeField name=\"ccCustomerCode\" />\n                            )\n                        }\n                        cardCodeId={isCardCodeRequired ? getHostedFieldId('ccCvv') : undefined}\n                        cardExpiryId={getHostedFieldId('ccExpiry')}\n                        cardNameId={getHostedFieldId('ccName')}\n                        cardNumberId={getHostedFieldId('ccNumber')}\n                        focusedFieldType={focusedFieldType}\n                    />\n                }\n                cardValidationSchema={getHostedCreditCardValidationSchema({ language })}\n                deinitializePayment={checkoutService.deinitializePayment}\n                getHostedFormOptions={getHostedFormOptions}\n                getStoredCardValidationFieldset={getHostedStoredCardValidationFieldset}\n                initializePayment={initializeBraintreePayment}\n                storedCardValidationSchema={getHostedInstrumentValidationSchema({\n                    language,\n                    isCardExpiryRequired: true,\n                })}\n            />\n\n            <Modal\n                additionalBodyClassName=\"modal-body--center\"\n                closeButtonLabel={<TranslatedString id=\"common.close_action\" />}\n                isOpen={!!threeDSecureContent}\n                onAfterOpen={appendThreeDSecureContent}\n                onRequestClose={cancelThreeDSecureModalFlow}\n            >\n                <div ref={ref.current.threeDSecureContentRef} />\n            </Modal>\n        </>\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeCreditCardsPaymentMethod,\n    [{ id: 'braintree' }],\n);\n","import { createBraintreeLocalMethodsPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/braintree';\nimport React, { type FunctionComponent, useEffect } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst BraintreeLocalPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    paymentForm,\n    language,\n    onUnhandledError,\n}) => {\n    const methodId = method.id;\n\n    const initializePayment = async () => {\n        try {\n            await checkoutService.initializePayment({\n                gatewayId: method.gateway,\n                methodId: method.id,\n                integrations: [createBraintreeLocalMethodsPaymentStrategy],\n                braintreelocalmethods: {\n                    container: '#checkout-payment-continue',\n                    buttonText: language.translate('payment.continue_with_brand', {\n                        brandName: methodId,\n                    }),\n                    onRenderButton: () => {\n                        paymentForm.hidePaymentSubmitButton(method, true);\n                    },\n                    submitForm: () => {\n                        paymentForm.setSubmitted(true);\n                        paymentForm.submitForm();\n                    },\n                    onError: (error: Error) => {\n                        paymentForm.disableSubmit(method, true);\n                        onUnhandledError(error);\n                    },\n                },\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    };\n\n    const deinitializePayment = async () => {\n        try {\n            await checkoutService.deinitializePayment({\n                gatewayId: method.gateway,\n                methodId: method.id,\n            });\n        } catch (error) {\n            if (error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    };\n\n    useEffect(() => {\n        void initializePayment();\n\n        return () => {\n            void deinitializePayment();\n        };\n    }, []);\n\n    return <></>;\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeLocalPaymentMethod,\n    [{ gateway: 'braintreelocalmethods' }],\n);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport { createBraintreePaypalPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/braintree';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst BraintreePaypalPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    ...rest\n}) => {\n    const initializeBraintreePaypalPaymentMethod = useCallback(\n        (defaultOptions: PaymentInitializeOptions) => {\n            const { onUnhandledError, language, method, paymentForm } = rest;\n\n            return checkoutService.initializePayment({\n                ...defaultOptions,\n                integrations: [createBraintreePaypalPaymentStrategy],\n                braintree: {\n                    containerId: '#checkout-payment-continue',\n                    submitForm: () => {\n                        paymentForm.setSubmitted(true);\n                        paymentForm.submitForm();\n                    },\n                    onError: (error: Error) => {\n                        if (error.message === 'INSTRUMENT_DECLINED') {\n                            onUnhandledError?.(\n                                new Error(language.translate('payment.errors.instrument_declined')),\n                            );\n                        } else {\n                            onUnhandledError?.(error);\n                        }\n                    },\n                    onRenderButton: () => {\n                        paymentForm.hidePaymentSubmitButton(method, true);\n                    },\n                },\n            });\n        },\n        [rest, checkoutService],\n    );\n\n    return (\n        <HostedPaymentComponent\n            {...rest}\n            checkoutService={checkoutService}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={initializeBraintreePaypalPaymentMethod}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreePaypalPaymentMethod,\n    [{ id: 'braintreepaypal' }, { id: 'braintreepaypalcredit' }],\n);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport { createBraintreeVisaCheckoutPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/braintree';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport {\n    type CheckoutButtonResolveId,\n    PaymentMethodId,\n    type PaymentMethodProps,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\nimport { WalletButtonPaymentMethodComponent } from '@bigcommerce/checkout/wallet-button-integration';\n\nconst VisaCheckoutPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    method,\n    onUnhandledError,\n    ...rest\n}) => {\n    const initializeVisaCheckoutPayment = useCallback(\n        (defaultOptions: PaymentInitializeOptions) => {\n            const reinitializePayment = async (options: PaymentInitializeOptions) => {\n                try {\n                    await checkoutService.deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n\n                    await checkoutService.initializePayment({\n                        ...options,\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                        integrations: [createBraintreeVisaCheckoutPaymentStrategy],\n                    });\n                } catch (error) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            };\n\n            const mergedOptions = {\n                ...defaultOptions,\n                integrations: [createBraintreeVisaCheckoutPaymentStrategy],\n                braintreevisacheckout: {\n                    onError: onUnhandledError,\n                    onPaymentSelect: () => reinitializePayment(mergedOptions),\n                },\n            };\n\n            return checkoutService.initializePayment(mergedOptions);\n        },\n        [checkoutService, method, onUnhandledError],\n    );\n\n    return (\n        <WalletButtonPaymentMethodComponent\n            {...rest}\n            buttonId=\"visaCheckoutWalletButton\"\n            deinitializePayment={checkoutService.deinitializePayment}\n            editButtonClassName=\"v-button\"\n            initializePayment={initializeVisaCheckoutPayment}\n            method={method}\n            shouldShowEditButton\n            signInButtonClassName=\"v-button\"\n            signOutCustomer={checkoutService.signOutCustomer}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, CheckoutButtonResolveId>(\n    VisaCheckoutPaymentMethod,\n    [{ id: PaymentMethodId.BraintreeVisaCheckout }],\n);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport { createBraintreeVenmoPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/braintree';\nimport React, { type FunctionComponent } from 'react';\n\nimport { HostedPaymentComponent } from '@bigcommerce/checkout/hosted-payment-integration';\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nconst BraintreeVenmoPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    language,\n    method,\n    paymentForm,\n}) => {\n    const initializeBraintreeVenmoPayment = async (options: PaymentInitializeOptions) => {\n        return checkoutService.initializePayment({\n            ...options,\n            integrations: [createBraintreeVenmoPaymentStrategy],\n        });\n    };\n\n    return (\n        <HostedPaymentComponent\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={initializeBraintreeVenmoPayment}\n            language={language}\n            method={method}\n            paymentForm={paymentForm}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    BraintreeVenmoPaymentMethod,\n    [{ id: 'braintreevenmo' }],\n);\n","import { kebabCase } from 'lodash';\n\nexport default function getAppliedStyles(\n    element: HTMLElement,\n    properties: string[],\n    pseudoElementSelector?: string,\n): { [key: string]: string } {\n    const declaration = window.getComputedStyle(element, pseudoElementSelector);\n\n    return properties.reduce(\n        (result, propertyName) => ({\n            ...result,\n            [propertyName]: declaration.getPropertyValue(kebabCase(propertyName)),\n        }),\n        {},\n    );\n}\n","import React, { type FunctionComponent, useCallback, useMemo } from 'react';\n\nimport { CreditCardCodeTooltip } from '@bigcommerce/checkout/instrument-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport {\n    FormField,\n    IconHelp,\n    IconLock,\n    TextInputIframeContainer,\n    TooltipTrigger,\n} from '@bigcommerce/checkout/ui';\n\nexport interface HostedCreditCardCodeFieldProps {\n    appearFocused: boolean;\n    id?: string;\n    name: string;\n}\n\nconst HostedCreditCardCodeField: FunctionComponent<HostedCreditCardCodeFieldProps> = ({\n    appearFocused,\n    id,\n    name,\n}) => {\n    const renderInput = useCallback(\n        () => (\n            <>\n                <TextInputIframeContainer\n                    additionalClassName=\"has-icon\"\n                    appearFocused={appearFocused}\n                    id={id}\n                />\n\n                <IconLock />\n            </>\n        ),\n        [id, appearFocused],\n    );\n\n    const labelContent = useMemo(\n        () => (\n            <>\n                <TranslatedString id=\"payment.credit_card_cvv_label\" />\n\n                <TooltipTrigger placement=\"top-start\" tooltip={<CreditCardCodeTooltip />}>\n                    <span className=\"has-tip\">\n                        <IconHelp />\n                    </span>\n                </TooltipTrigger>\n            </>\n        ),\n        [],\n    );\n\n    return (\n        <FormField\n            additionalClassName=\"form-ccFields-field--ccCvv\"\n            input={renderInput}\n            labelContent={labelContent}\n            name={name}\n        />\n    );\n};\n\nexport default HostedCreditCardCodeField;\n","import React, { type FunctionComponent, useCallback } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { FormField, TextInputIframeContainer } from '@bigcommerce/checkout/ui';\n\nexport interface HostedCreditCardExpiryFieldProps {\n    appearFocused: boolean;\n    id: string;\n    name: string;\n}\n\nconst HostedCreditCardExpiryField: FunctionComponent<HostedCreditCardExpiryFieldProps> = ({\n    appearFocused,\n    id,\n    name,\n}) => {\n    const renderInput = useCallback(\n        () => <TextInputIframeContainer appearFocused={appearFocused} id={id} />,\n        [id, appearFocused],\n    );\n\n    return (\n        <FormField\n            additionalClassName=\"form-field--ccExpiry\"\n            input={renderInput}\n            labelContent={<TranslatedString id=\"payment.credit_card_expiration_label\" />}\n            name={name}\n        />\n    );\n};\n\nexport default HostedCreditCardExpiryField;\n","import React, { type FunctionComponent, useCallback } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { FormField, TextInputIframeContainer } from '@bigcommerce/checkout/ui';\n\nexport interface HostedCreditCardNameFieldProps {\n    appearFocused: boolean;\n    id?: string;\n    name: string;\n}\n\nconst HostedCreditCardNameField: FunctionComponent<HostedCreditCardNameFieldProps> = ({\n    appearFocused,\n    id,\n    name,\n}) => {\n    const renderInput = useCallback(\n        () => <TextInputIframeContainer appearFocused={appearFocused} id={id} />,\n        [id, appearFocused],\n    );\n\n    return (\n        <FormField\n            additionalClassName=\"form-field--ccName\"\n            input={renderInput}\n            labelContent={<TranslatedString id=\"payment.credit_card_name_label\" />}\n            name={name}\n        />\n    );\n};\n\nexport default HostedCreditCardNameField;\n","import classNames from 'classnames';\nimport React, { type FunctionComponent, type ReactNode } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { Fieldset, Legend } from '@bigcommerce/checkout/ui';\n\nimport {\n    HostedCreditCardCodeField,\n    HostedCreditCardExpiryField,\n    HostedCreditCardNameField,\n    HostedCreditCardNumberField,\n} from '../';\n\nexport interface HostedCreditCardFieldsetProps {\n    additionalFields?: ReactNode;\n    cardCodeId?: string;\n    cardExpiryId: string;\n    cardNameId?: string;\n    cardNumberId: string;\n    focusedFieldType?: string;\n}\n\nconst HostedCreditCardFieldset: FunctionComponent<HostedCreditCardFieldsetProps> = ({\n    additionalFields,\n    cardCodeId,\n    cardExpiryId,\n    cardNameId,\n    cardNumberId,\n    focusedFieldType,\n}) => (\n    <Fieldset\n        legend={\n            <Legend hidden>\n                <TranslatedString id=\"payment.credit_card_text\" />\n            </Legend>\n        }\n    >\n        <div\n            className={classNames('form-ccFields', {\n                'form-ccFields--without-card-name': !cardNameId,\n                'form-ccFields--without-card-code': !cardCodeId,\n            })}\n        >\n            <HostedCreditCardNumberField\n                appearFocused={focusedFieldType === 'cardNumber'}\n                id={cardNumberId}\n                name=\"hostedForm.errors.cardNumber\"\n            />\n\n            <HostedCreditCardExpiryField\n                appearFocused={focusedFieldType === 'cardExpiry'}\n                id={cardExpiryId}\n                name=\"hostedForm.errors.cardExpiry\"\n            />\n\n            {Boolean(cardNameId) && (\n                <HostedCreditCardNameField\n                    appearFocused={focusedFieldType === 'cardName'}\n                    id={cardNameId}\n                    name=\"hostedForm.errors.cardName\"\n                />\n            )}\n\n            {Boolean(cardCodeId) && (\n                <HostedCreditCardCodeField\n                    appearFocused={focusedFieldType === 'cardCode'}\n                    id={cardCodeId}\n                    name=\"hostedForm.errors.cardCode\"\n                />\n            )}\n\n            {additionalFields}\n        </div>\n    </Fieldset>\n);\n\nexport default HostedCreditCardFieldset;\n","import React, { type FunctionComponent, useCallback } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { FormField, IconLock, TextInputIframeContainer } from '@bigcommerce/checkout/ui';\n\nexport interface HostedCreditCardNumberFieldProps {\n    appearFocused: boolean;\n    id: string;\n    name: string;\n}\n\nconst HostedCreditCardNumberField: FunctionComponent<HostedCreditCardNumberFieldProps> = ({\n    appearFocused,\n    id,\n    name,\n}) => {\n    const renderInput = useCallback(\n        () => (\n            <>\n                <TextInputIframeContainer\n                    additionalClassName=\"has-icon\"\n                    appearFocused={appearFocused}\n                    id={id}\n                />\n\n                <IconLock />\n            </>\n        ),\n        [id, appearFocused],\n    );\n\n    return (\n        <FormField\n            additionalClassName=\"form-field--ccNumber\"\n            input={renderInput}\n            labelContent={<TranslatedString id=\"payment.credit_card_number_label\" />}\n            name={name}\n        />\n    );\n};\n\nexport default HostedCreditCardNumberField;\n","import React, { type FunctionComponent } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport {\n    HostedCreditCardCodeField,\n    HostedCreditCardExpiryField,\n    HostedCreditCardNumberField,\n} from '../';\n\nexport interface HostedCreditCardValidationProps {\n    cardCodeId?: string;\n    cardNumberId?: string;\n    cardExpiryId?: string;\n    focusedFieldType?: string;\n}\n\nconst HostedCreditCardValidation: FunctionComponent<HostedCreditCardValidationProps> = ({\n    cardCodeId,\n    cardNumberId,\n    cardExpiryId,\n    focusedFieldType,\n}) => (\n    <>\n        {cardNumberId && (\n            <p>\n                <strong>\n                    <TranslatedString id=\"payment.instrument_trusted_shipping_address_title_text\" />\n                </strong>\n\n                <br />\n\n                <TranslatedString id=\"payment.instrument_trusted_shipping_address_text\" />\n            </p>\n        )}\n\n        <div className=\"form-ccFields\">\n            {cardNumberId && (\n                <HostedCreditCardNumberField\n                    appearFocused={focusedFieldType === 'cardNumber'}\n                    id={cardNumberId}\n                    name=\"hostedForm.errors.cardNumberVerification\"\n                />\n            )}\n\n            {cardCodeId && (\n                <HostedCreditCardCodeField\n                    appearFocused={focusedFieldType === 'cardCode'}\n                    id={cardCodeId}\n                    name=\"hostedForm.errors.cardCodeVerification\"\n                />\n            )}\n\n            {cardExpiryId && (\n                <HostedCreditCardExpiryField\n                    appearFocused={focusedFieldType === 'cardExpiry'}\n                    id={cardExpiryId}\n                    name=\"hostedForm.errors.cardExpiryVerification\"\n                />\n            )}\n        </div>\n    </>\n);\n\nexport default HostedCreditCardValidation;\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { object, type ObjectSchema, string } from 'yup';\n\nexport interface HostedCreditCardValidationSchemaOptions {\n    language: LanguageService;\n}\n\nexport interface HostedCreditCardValidationSchemaShape {\n    hostedForm: {\n        errors: {\n            cardCode: string;\n            cardExpiry: string;\n            cardName: string;\n            cardNumber: string;\n        };\n    };\n}\n\nexport default memoize(function getHostedCreditCardValidationSchema({\n    language,\n}: HostedCreditCardValidationSchemaOptions): ObjectSchema<HostedCreditCardValidationSchemaShape> {\n    return object().shape<HostedCreditCardValidationSchemaShape>({\n        hostedForm: object()\n            .required()\n            .shape<HostedCreditCardValidationSchemaShape['hostedForm']>({\n                errors: object()\n                    .required()\n                    .shape<HostedCreditCardValidationSchemaShape['hostedForm']['errors']>({\n                        cardCode: string()\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_cvv_required_error',\n                                ),\n                                test: (value) => value !== 'required',\n                            })\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_cvv_invalid_error',\n                                ),\n                                test: (value) => value !== 'invalid_card_code',\n                            }),\n\n                        cardExpiry: string()\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_expiration_required_error',\n                                ),\n                                test: (value) => value !== 'required',\n                            })\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_expiration_invalid_error',\n                                ),\n                                test: (value) => value !== 'invalid_card_expiry',\n                            }),\n\n                        cardName: string().test({\n                            message: language.translate('payment.credit_card_name_required_error'),\n                            test: (value) => value !== 'required',\n                        }),\n\n                        cardNumber: string()\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_number_required_error',\n                                ),\n                                test: (value) => value !== 'required',\n                            })\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_number_invalid_error',\n                                ),\n                                test: (value) => value !== 'invalid_card_number',\n                            }),\n                    }),\n            }),\n    });\n});\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { object, type ObjectSchema, string } from 'yup';\n\nexport interface HostedInstrumentValidationSchemaOptions {\n    language: LanguageService;\n    isCardExpiryRequired?: boolean;\n}\n\nexport interface HostedInstrumentValidationSchemaShape {\n    hostedForm: {\n        errors: {\n            cardCodeVerification: string;\n            cardNumberVerification: string;\n        };\n    };\n    instrumentId: string;\n}\n\nexport default memoize(function getHostedInstrumentValidationSchema({\n    language,\n    isCardExpiryRequired = false,\n}: HostedInstrumentValidationSchemaOptions): ObjectSchema<HostedInstrumentValidationSchemaShape> {\n    return object().shape<HostedInstrumentValidationSchemaShape>({\n        instrumentId: string().required(),\n\n        hostedForm: object()\n            .required()\n            .shape<HostedInstrumentValidationSchemaShape['hostedForm']>({\n                errors: object()\n                    .required()\n                    .shape<HostedInstrumentValidationSchemaShape['hostedForm']['errors']>({\n                        cardCodeVerification: string()\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_cvv_required_error',\n                                ),\n                                test: (value) => value !== 'required',\n                            })\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_cvv_invalid_error',\n                                ),\n                                test: (value) => value !== 'invalid_card_code',\n                            }),\n\n                        cardNumberVerification: string()\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_number_required_error',\n                                ),\n                                test: (value) => value !== 'required',\n                            })\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_number_invalid_error',\n                                ),\n                                test: (value) => value !== 'invalid_card_number',\n                            })\n                            .test({\n                                message: language.translate(\n                                    'payment.credit_card_number_mismatch_error',\n                                ),\n                                test: (value) => value !== 'mismatched_card_number',\n                            }),\n                        ...(isCardExpiryRequired\n                            ? {\n                                  cardExpiryVerification: string()\n                                      .test({\n                                          message: language.translate(\n                                              'payment.credit_card_expiration_required_error',\n                                          ),\n                                          test: (value) => value !== 'required',\n                                      })\n                                      .test({\n                                          message: language.translate(\n                                              'payment.credit_card_expiration_invalid_error',\n                                          ),\n                                          test: (value) => value !== 'invalid_card_expiry',\n                                      }),\n                              }\n                            : {}),\n                    }),\n            }),\n    });\n});\n","import {\n    type AccountInstrument,\n    type CheckoutSelectors,\n    type CheckoutService,\n    type LanguageService,\n    type PaymentInitializeOptions,\n    type PaymentInstrument,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport { find, noop } from 'lodash';\nimport React, { type ReactNode, useCallback, useEffect, useState } from 'react';\n\nimport {\n    AccountInstrumentFieldset,\n    isAccountInstrument,\n    isInstrumentFeatureAvailable,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { type PaymentFormService } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nexport interface HostedPaymentComponentProps {\n    checkoutService: CheckoutService;\n    checkoutState: CheckoutSelectors;\n    description?: ReactNode;\n    isInitializing?: boolean;\n    isUsingMultiShipping?: boolean;\n    language: LanguageService;\n    method: PaymentMethod;\n    paymentForm: PaymentFormService;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n    onUnhandledError?(error: Error): void;\n}\n\ninterface HostedPaymentComponentDerivedProps {\n    instruments: AccountInstrument[];\n    isInstrumentFeatureAvailable: boolean;\n    isLoadingInstruments: boolean;\n    isNewAddress: boolean;\n    isPaymentDataRequired: boolean;\n    loadInstruments(): Promise<CheckoutSelectors>;\n}\n\nfunction getHostedPaymentMethodDerivedProps(\n    props: HostedPaymentComponentProps,\n): HostedPaymentComponentDerivedProps {\n    const filterAccountInstruments = memoizeOne((instruments: PaymentInstrument[] = []) =>\n        instruments.filter(isAccountInstrument),\n    );\n    const filterTrustedInstruments = memoizeOne((instruments: AccountInstrument[] = []) =>\n        instruments.filter(({ trustedShippingAddress }) => trustedShippingAddress),\n    );\n    const { checkoutService, checkoutState, isUsingMultiShipping = false, method } = props;\n\n    const {\n        data: {\n            getCart,\n            getConfig,\n            getCustomer,\n            getInstruments,\n            isPaymentDataRequired,\n            isPaymentDataSubmitted,\n        },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const cart = getCart();\n    const config = getConfig();\n    const customer = getCustomer();\n\n    if (!config || !cart || !customer) {\n        throw new Error('Unable to get checkout');\n    }\n\n    const currentMethodInstruments = filterAccountInstruments(getInstruments(method));\n    const trustedInstruments = filterTrustedInstruments(currentMethodInstruments);\n\n    return {\n        instruments: trustedInstruments,\n        isNewAddress: trustedInstruments.length === 0 && currentMethodInstruments.length > 0,\n        isInstrumentFeatureAvailable:\n            !isPaymentDataSubmitted(method.id, method.gateway) &&\n            isInstrumentFeatureAvailable({\n                config,\n                customer,\n                isUsingMultiShipping,\n                paymentMethod: method,\n            }),\n        isLoadingInstruments: isLoadingInstruments(),\n        isPaymentDataRequired: isPaymentDataRequired(),\n        loadInstruments: checkoutService.loadInstruments,\n    };\n}\n\nconst HostedPaymentMethodComponent: React.FC<HostedPaymentComponentProps> = (props) => {\n    const {\n        description,\n        isInitializing = false,\n        initializePayment,\n        method,\n        onUnhandledError = noop,\n        deinitializePayment,\n    } = props;\n\n    const [isAddingNewInstrument, setIsAddingNewInstrument] = useState(false);\n    const [selectedInstrument, setSelectedInstrument] = useState<AccountInstrument | undefined>();\n\n    const derivedProps = getHostedPaymentMethodDerivedProps(props);\n    const {\n        isLoadingInstruments,\n        instruments,\n        isNewAddress,\n        isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp,\n        loadInstruments,\n    } = derivedProps;\n\n    const getDefaultInstrument = useCallback((): AccountInstrument | undefined => {\n        if (isAddingNewInstrument || !instruments.length) {\n            return;\n        }\n\n        return find(instruments, { defaultInstrument: true }) || instruments[0];\n    }, [isAddingNewInstrument, instruments]);\n\n    const handleUseNewInstrument = useCallback(() => {\n        setIsAddingNewInstrument(true);\n        setSelectedInstrument(undefined);\n    }, []);\n\n    const handleSelectInstrument = useCallback(\n        (id: string) => {\n            setIsAddingNewInstrument(false);\n            setSelectedInstrument(find(instruments, { bigpayToken: id }));\n        },\n        [instruments],\n    );\n\n    useEffect(() => {\n        const initializePaymentAsync = async () => {\n            try {\n                await initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n\n                if (isInstrumentFeatureAvailableProp) {\n                    await loadInstruments();\n                }\n            } catch (error) {\n                onUnhandledError(error);\n            }\n        };\n\n        void initializePaymentAsync();\n\n        return () => {\n            const deinitializePaymentAsync = async () => {\n                try {\n                    await deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    onUnhandledError(error);\n                }\n            };\n\n            void deinitializePaymentAsync();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const currentSelectedInstrument = selectedInstrument || getDefaultInstrument();\n    const isLoading = isInitializing || isLoadingInstruments;\n    const shouldShowInstrumentFieldset =\n        isInstrumentFeatureAvailableProp && (instruments.length > 0 || isNewAddress);\n\n    if (!description && !isInstrumentFeatureAvailableProp) {\n        return null;\n    }\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n            <div className=\"paymentMethod paymentMethod--hosted\">\n                {description}\n\n                {shouldShowInstrumentFieldset && (\n                    <AccountInstrumentFieldset\n                        instruments={instruments}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewInstrument}\n                        selectedInstrument={currentSelectedInstrument}\n                    />\n                )}\n\n                {isInstrumentFeatureAvailableProp && (\n                    <StoreInstrumentFieldset\n                        instrumentId={\n                            currentSelectedInstrument && currentSelectedInstrument.bigpayToken\n                        }\n                        instruments={instruments}\n                        isAccountInstrument={true}\n                    />\n                )}\n            </div>\n        </LoadingOverlay>\n    );\n};\n\nexport default HostedPaymentMethodComponent;\n","import { noop } from 'lodash';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { getAppliedStyles } from '@bigcommerce/checkout/dom-utils';\nimport { FormContext, FormFieldContainer, TextInput } from '@bigcommerce/checkout/ui';\n\nexport enum CreditCardInputStylesType {\n    Default = 'default',\n    Error = 'error',\n    Focus = 'focus',\n}\n\nexport default function getCreditCardInputStyles(\n    containerId: string,\n    properties: string[],\n    type: CreditCardInputStylesType = CreditCardInputStylesType.Default,\n): Promise<{ [key: string]: string }> {\n    const container = document.createElement('div');\n    const parentContainer = document.getElementById(containerId);\n\n    if (!parentContainer) {\n        throw new Error(\n            'Unable to retrieve input styles as the provided container ID is not valid.',\n        );\n    }\n\n    parentContainer.appendChild(container);\n\n    return new Promise((resolve) => {\n        const callbackRef = (element: HTMLInputElement | null) => {\n            if (!element) {\n                return;\n            }\n\n            resolve(getAppliedStyles(element, properties));\n\n            ReactDOM.unmountComponentAtNode(container);\n\n            if (container.parentElement) {\n                container.parentElement.removeChild(container);\n            }\n        };\n\n        ReactDOM.render(\n            <FormContext.Provider value={{ isSubmitted: true, setSubmitted: noop }}>\n                <FormFieldContainer hasError={type === CreditCardInputStylesType.Error}>\n                    <TextInput\n                        appearFocused={type === CreditCardInputStylesType.Focus}\n                        ref={callbackRef}\n                    />\n                </FormFieldContainer>\n            </FormContext.Provider>,\n            container,\n        );\n    });\n}\n","/* istanbul ignore file */\n\nimport React, { type FunctionComponent, memo, type MouseEvent, useCallback } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport './MultiCheckboxControl.scss';\n\nexport interface MultiCheckboxControlProps {\n    testId?: string;\n    onSelectedAll(): void;\n    onSelectedNone(): void;\n}\n\nconst MultiCheckboxControl: FunctionComponent<MultiCheckboxControlProps> = ({\n    testId,\n    onSelectedAll,\n    onSelectedNone,\n}) => {\n    const handleSelectAllClick = useCallback(\n        (event: MouseEvent) => {\n            event.preventDefault();\n            onSelectedAll();\n        },\n        [onSelectedAll],\n    );\n\n    const handleSelectNoneClick = useCallback(\n        (event: MouseEvent) => {\n            event.preventDefault();\n            onSelectedNone();\n        },\n        [onSelectedNone],\n    );\n\n    return (\n        <ul className=\"multiCheckbox--controls body-regular\">\n            <li className=\"multiCheckbox--control\">\n                <TranslatedString id=\"address.select\" />\n            </li>\n\n            <li className=\"multiCheckbox--control\">\n                <a\n                    data-test={`${testId}Checkbox-all-button`}\n                    href=\"#\"\n                    onClick={handleSelectAllClick}\n                >\n                    <TranslatedString id=\"address.select_all\" />\n                </a>\n            </li>\n\n            <li className=\"multiCheckbox--control\">\n                <a\n                    data-test={`${testId}Checkbox-none-button`}\n                    href=\"#\"\n                    onClick={handleSelectNoneClick}\n                >\n                    <TranslatedString id=\"address.select_none\" />\n                </a>\n            </li>\n        </ul>\n    );\n};\n\nexport default memo(MultiCheckboxControl);\n","import { type FormFieldItem } from '@bigcommerce/checkout-sdk';\nimport { FieldArray, type FieldArrayRenderProps, getIn } from 'formik';\nimport { difference, kebabCase, noop, pick } from 'lodash';\nimport React, {\n    type ChangeEvent,\n    type FunctionComponent,\n    memo,\n    type ReactNode,\n    useCallback,\n} from 'react';\n\nimport { FormFieldContainer } from '../FormFieldContainer';\nimport { FormFieldError } from '../FormFieldError';\n\nimport DynamicFormFieldType from './DynamicFormFieldType';\nimport DynamicInput from './DynamicInput';\nimport MultiCheckboxControl from './MultiCheckboxControl';\n\nexport interface CheckboxGroupFormFieldProps {\n    id: string;\n    label: ReactNode;\n    name: string;\n    options: FormFieldItem[];\n    onChange?(values: string[]): void;\n}\n\ntype MultiCheckboxFormFieldProps = CheckboxGroupFormFieldProps &\n    Pick<FieldArrayRenderProps, 'push' | 'remove' | 'pop' | 'form'>;\n\nconst MultiCheckboxFormField: FunctionComponent<MultiCheckboxFormFieldProps> = ({\n    form: { values, errors },\n    id,\n    label,\n    name,\n    onChange = noop,\n    options,\n    push,\n    remove,\n}) => {\n    const handleSelectAll = useCallback(() => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        const checkedValues: string[] = getIn(values, name) || [];\n\n        difference(\n            options.map(({ value }) => value),\n            checkedValues,\n        ).forEach((val) => push(val));\n\n        onChange(getIn(values, name));\n    }, [name, onChange, options, push, values]);\n\n    const handleSelectNone = useCallback(() => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        const checkedValues: string[] = getIn(values, name) || [];\n\n        checkedValues.forEach(() => remove(0));\n\n        onChange(getIn(values, name));\n    }, [name, onChange, remove, values]);\n\n    const handleInputChange = useCallback(\n        (event: ChangeEvent<HTMLInputElement>) => {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            const checkedValues: string[] = getIn(values, name) || [];\n            const { value, checked } = event.target;\n\n            if (checked) {\n                push(value);\n            } else {\n                remove(checkedValues.indexOf(value));\n            }\n\n            onChange(getIn(values, name));\n        },\n        [name, onChange, push, remove, values],\n    );\n\n    return (\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        <FormFieldContainer hasError={getIn(errors, name) && getIn(errors, name).length}>\n            {label}\n\n            {options.length > 1 && (\n                <MultiCheckboxControl\n                    onSelectedAll={handleSelectAll}\n                    onSelectedNone={handleSelectNone}\n                    testId={id}\n                />\n            )}\n\n            <DynamicInput\n                fieldType={DynamicFormFieldType.CHECKBOX}\n                id={id}\n                name={name}\n                onChange={handleInputChange}\n                options={options}\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                value={getIn(values, name) || []}\n            />\n\n            <FormFieldError\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n                errorId={`${id ?? name}-field-error-message`}\n                name={name}\n                testId={`${kebabCase(name)}-field-error-message`}\n            />\n        </FormFieldContainer>\n    );\n};\n\nconst CheckboxGroupFormField: FunctionComponent<CheckboxGroupFormFieldProps> = ({\n    id,\n    label,\n    name,\n    onChange,\n    options,\n}) => {\n    const renderField = useCallback(\n        (renderProps: FieldArrayRenderProps) => (\n            <MultiCheckboxFormField\n                id={id}\n                label={label}\n                name={name}\n                onChange={onChange}\n                options={options}\n                {...pick(renderProps, ['form', 'pop', 'push', 'remove'])}\n            />\n        ),\n        [id, label, name, onChange, options],\n    );\n\n    return <FieldArray name={name} render={renderField} />;\n};\n\nexport default memo(CheckboxGroupFormField);\n","import { type FormField as FormFieldType } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport { type FieldProps } from 'formik';\nimport { includes } from 'lodash';\nimport React, { type FunctionComponent, memo, type ReactNode, useCallback, useMemo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { FormField } from '../FormField';\nimport { Label } from '../Label';\n\nimport CheckboxGroupFormField from './CheckboxGroupFormField';\nimport DynamicFormFieldType from './DynamicFormFieldType';\nimport DynamicInput from './DynamicInput';\n\nexport interface DynamicFormFieldOption {\n    code: string;\n    name: string;\n}\n\nexport interface DynamicFormFieldProps {\n    field: FormFieldType;\n    inputId?: string;\n    extraClass?: string;\n    autocomplete?: string;\n    parentFieldName?: string;\n    placeholder?: string;\n    label?: ReactNode;\n    isFloatingLabelEnabled?: boolean;\n    onChange?(value: string | string[]): void;\n}\n\nconst DynamicFormField: FunctionComponent<DynamicFormFieldProps> = ({\n    field: {\n        fieldType,\n        type,\n        secret,\n        name,\n        label: fieldLabel,\n        required,\n        options,\n        max,\n        min,\n        maxLength,\n    },\n    parentFieldName,\n    onChange,\n    placeholder,\n    inputId,\n    autocomplete,\n    label,\n    extraClass,\n    isFloatingLabelEnabled,\n}) => {\n    const fieldInputId = inputId || name;\n    const fieldName = parentFieldName ? `${parentFieldName}.${name}` : name;\n    const isFloatingLabelSupportedFieldType = Boolean(\n        isFloatingLabelEnabled &&\n            (includes(['text', 'password', 'dropdown', 'date', 'multiline'], fieldType) ||\n                !fieldType),\n    );\n    const labelComponent = useMemo(() => {\n        let labelClassName = 'body-medium';\n\n        if (isFloatingLabelSupportedFieldType) {\n            labelClassName = 'floating-form-field-label';\n        }\n\n        return (\n            <Label\n                additionalClassName={labelClassName}\n                htmlFor={fieldInputId}\n                id={`${fieldInputId}-label`}\n                isFloatingLabelEnabled={isFloatingLabelSupportedFieldType}\n            >\n                {label || fieldLabel}\n                {!required && (\n                    <>\n                        {' '}\n                        <small className=\"optimizedCheckout-contentSecondary\">\n                            <TranslatedString id=\"common.optional_text\" />\n                        </small>\n                    </>\n                )}\n            </Label>\n        );\n    }, [fieldInputId, isFloatingLabelSupportedFieldType, label, fieldLabel, required]);\n\n    const dynamicFormFieldType = useMemo((): DynamicFormFieldType => {\n        if (fieldType === 'text') {\n            if (type === 'integer') {\n                return DynamicFormFieldType.NUMBER;\n            }\n\n            if (includes(name, 'phone') || includes(name, 'tel')) {\n                return DynamicFormFieldType.TELEPHONE;\n            }\n\n            return secret ? DynamicFormFieldType.PASSWORD : DynamicFormFieldType.TEXT;\n        }\n\n        return fieldType as DynamicFormFieldType;\n    }, [fieldType, type, secret, name]);\n\n    const renderInput = useCallback(\n        ({ field }: FieldProps<string>) => (\n            <DynamicInput\n                {...field}\n                aria-labelledby={`${fieldInputId}-label ${fieldInputId}-field-error-message`}\n                autoComplete={autocomplete}\n                fieldType={dynamicFormFieldType}\n                id={fieldInputId}\n                isFloatingLabelEnabled={isFloatingLabelSupportedFieldType}\n                max={max}\n                maxLength={maxLength || undefined}\n                min={min}\n                options={options && options.items}\n                placeholder={placeholder || (options && options.helperLabel)}\n                rows={options?.rows}\n            />\n        ),\n        [\n            fieldInputId,\n            autocomplete,\n            dynamicFormFieldType,\n            isFloatingLabelSupportedFieldType,\n            max,\n            maxLength,\n            min,\n            options,\n            placeholder,\n        ],\n    );\n\n    return (\n        <div\n            className={classNames(\n                'dynamic-form-field',\n                { 'floating-form-field': isFloatingLabelSupportedFieldType },\n                extraClass,\n            )}\n        >\n            {fieldType === DynamicFormFieldType.CHECKBOX ? (\n                <CheckboxGroupFormField\n                    id={fieldInputId}\n                    label={labelComponent}\n                    name={fieldName}\n                    onChange={onChange}\n                    options={(options && options.items) || []}\n                />\n            ) : (\n                <FormField\n                    id={fieldInputId}\n                    input={renderInput}\n                    isFloatingLabelEnabled={isFloatingLabelSupportedFieldType}\n                    label={labelComponent}\n                    name={fieldName}\n                    onChange={onChange}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default memo(DynamicFormField);\n","import { LocaleContext } from '@bigcommerce/checkout/contexts';\nimport { createInjectHoc, type InjectHoc } from '@bigcommerce/checkout/legacy-hoc';\n\nexport interface WithDateProps {\n    date: {\n        inputFormat: string;\n    };\n}\n\nconst withDate: InjectHoc<WithDateProps> = createInjectHoc(LocaleContext, {\n    displayNamePrefix: 'withDate',\n    pickProps: (value, key) => key === 'date' && !!value,\n});\n\nexport default withDate;\n","import classNames from 'classnames';\nimport React, { forwardRef, type Ref, type TextareaHTMLAttributes } from 'react';\n\nexport interface TextAreaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {\n    additionalClassName?: string;\n    testId?: string;\n    isFloatingLabelEnabled?: boolean;\n}\n\nconst TextArea = forwardRef(\n    (\n        { additionalClassName, testId, className, isFloatingLabelEnabled, ...rest }: TextAreaProps,\n        ref: Ref<HTMLTextAreaElement>,\n    ) => {\n        return (\n            <textarea\n                {...rest}\n                className={\n                    className ||\n                    classNames(\n                        { 'floating-textarea': isFloatingLabelEnabled },\n                        'form-input',\n                        'optimizedCheckout-form-input',\n                        additionalClassName,\n                        'body-regular',\n                    )\n                }\n                data-test={testId}\n                ref={ref}\n            />\n        );\n    },\n);\n\nexport default TextArea;\n","import { type FormFieldItem } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport { isDate, noop } from 'lodash';\nimport React, { type FunctionComponent, lazy, memo, Suspense, useCallback } from 'react';\n\nimport { withDate, type WithDateProps } from '@bigcommerce/checkout/locale';\n\nimport { IconChevronDown } from '../../icon';\nimport { CheckboxInput } from '../CheckboxInput';\nimport { type InputProps } from '../Input';\nimport { RadioInput } from '../RadioInput';\nimport { TextArea } from '../TextArea';\nimport { TextInput } from '../TextInput';\n\nimport DynamicFormFieldType from './DynamicFormFieldType';\n\nconst ReactDatePicker = lazy(\n    () =>\n        import(\n            /* webpackChunkName: \"react-datepicker\" */\n            'react-datepicker'\n        ),\n);\n\nexport interface DynamicInputProps extends InputProps {\n    id: string;\n    additionalClassName?: string;\n    value?: string | string[];\n    rows?: number;\n    fieldType?: DynamicFormFieldType;\n    options?: FormFieldItem[];\n    isFloatingLabelEnabled?: boolean;\n    inputDateFormat?: string;\n}\n\nconst DynamicInput: FunctionComponent<DynamicInputProps & WithDateProps> = ({\n    fieldType,\n    id,\n    name,\n    onChange = noop,\n    options,\n    placeholder,\n    value,\n    isFloatingLabelEnabled,\n    date,\n    inputDateFormat,\n    ...rest\n}) => {\n    const inputFormat = inputDateFormat || date.inputFormat || '';\n\n    const handleDateChange = useCallback(\n        (dateValue: string, event: any) =>\n            onChange({\n                ...event,\n                target: {\n                    name,\n                    value: dateValue,\n                },\n            }),\n        [onChange, name],\n    );\n\n    switch (fieldType) {\n        case DynamicFormFieldType.DROPDOWM:\n            return (\n                <>\n                    <div\n                        className={classNames(\n                            { 'dropdown-chevron': !isFloatingLabelEnabled },\n                            { 'floating-select-chevron': isFloatingLabelEnabled },\n                        )}\n                    >\n                        <IconChevronDown />\n                    </div>\n                    <select\n                        {...(rest as any)}\n                        className={classNames(\n                            { 'floating-select': isFloatingLabelEnabled },\n                            'form-select optimizedCheckout-form-select',\n                            { 'floating-form-field-input': isFloatingLabelEnabled },\n                        )}\n                        data-test={`${id}-select`}\n                        id={id}\n                        name={name}\n                        onChange={onChange}\n                        value={value ?? ''}\n                    >\n                        {!!placeholder && <option value=\"\">{placeholder}</option>}\n                        {options &&\n                            options.map(({ label, value: optionValue }) => (\n                                <option key={optionValue} value={optionValue}>\n                                    {label}\n                                </option>\n                            ))}\n                    </select>\n                </>\n            );\n\n        case DynamicFormFieldType.RADIO:\n            if (!options || !options.length) {\n                return null;\n            }\n\n            return (\n                <>\n                    {options.map(({ label, value: optionValue }) => (\n                        <RadioInput\n                            {...rest}\n                            checked={optionValue === value}\n                            id={`${id}-${optionValue}`}\n                            key={optionValue}\n                            label={label}\n                            name={name}\n                            onChange={onChange}\n                            testId={`${id}-${optionValue}-radio`}\n                            value={optionValue}\n                        />\n                    ))}\n                </>\n            );\n\n        case DynamicFormFieldType.CHECKBOX:\n            if (!options || !options.length) {\n                return null;\n            }\n\n            return (\n                <>\n                    {options.map(({ label, value: optionValue }) => (\n                        <CheckboxInput\n                            {...rest}\n                            checked={Array.isArray(value) ? value.includes(optionValue) : false}\n                            id={`${id}-${optionValue}`}\n                            key={optionValue}\n                            label={label}\n                            name={name}\n                            onChange={onChange}\n                            testId={`${id}-${optionValue}-checkbox`}\n                            value={optionValue}\n                        />\n                    ))}\n                </>\n            );\n\n        case DynamicFormFieldType.DATE:\n            return (\n                <Suspense>\n                    <ReactDatePicker\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        {...(rest as any)}\n                        autoComplete=\"off\"\n                        // FIXME: we can avoid this by simply using onChangeRaw, but it's not being triggered properly\n                        // https://github.com/Hacker0x01/react-datepicker/issues/1357\n                        // onChangeRaw={ rest.onChange }\n                        calendarClassName=\"optimizedCheckout-contentPrimary\"\n                        className={classNames('form-input optimizedCheckout-form-input', {\n                            'floating-input floating-form-field-input': isFloatingLabelEnabled,\n                        })}\n                        dateFormat={inputFormat}\n                        maxDate={rest.max ? new Date(`${rest.max}T00:00:00Z`) : undefined}\n                        minDate={rest.min ? new Date(`${rest.min}T00:00:00Z`) : undefined}\n                        name={name}\n                        onChange={handleDateChange}\n                        placeholderText={inputFormat.toUpperCase()}\n                        popperClassName=\"optimizedCheckout-contentPrimary\"\n                        selected={isDate(value) ? value : undefined}\n                    />\n                </Suspense>\n            );\n\n        case DynamicFormFieldType.MULTILINE:\n            return (\n                <TextArea\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    {...(rest as any)}\n                    id={id}\n                    isFloatingLabelEnabled={isFloatingLabelEnabled}\n                    name={name}\n                    onChange={onChange}\n                    testId={`${id}-text`}\n                    type={fieldType}\n                    value={value}\n                />\n            );\n\n        default:\n            return (\n                <TextInput\n                    {...rest}\n                    id={id}\n                    isFloatingLabelEnabled={isFloatingLabelEnabled}\n                    name={name}\n                    onChange={onChange}\n                    placeholder={placeholder}\n                    testId={`${id}-${\n                        fieldType === DynamicFormFieldType.PASSWORD ? 'password' : 'text'\n                    }`}\n                    type={fieldType}\n                    value={value}\n                />\n            );\n    }\n};\n\nexport default memo(withDate(DynamicInput));\n","import classNames from 'classnames';\nimport React, { forwardRef, type ReactNode, type Ref } from 'react';\n\nimport Input, { type InputProps } from '../Input/Input';\nimport Label from '../Label/Label';\n\nexport interface RadioInputProps extends InputProps {\n    additionalClassName?: string;\n    label: ReactNode;\n    value: string;\n    checked: boolean;\n}\n\nconst RadioInput = forwardRef(\n    (\n        { additionalClassName, label, value, checked, id, ...rest }: RadioInputProps,\n        ref: Ref<HTMLInputElement>,\n    ) => (\n        <>\n            <Input\n                {...rest}\n                checked={checked}\n                className={classNames(\n                    'form-radio',\n                    'optimizedCheckout-form-radio',\n                    additionalClassName,\n                )}\n                id={id}\n                ref={ref}\n                type=\"radio\"\n                value={value}\n            />\n            <Label additionalClassName=\"body-regular\" htmlFor={id}>\n                {label}\n            </Label>\n        </>\n    ),\n);\n\nexport default RadioInput;\n","import classNames from 'classnames';\nimport React, { type FunctionComponent, type HTMLAttributes } from 'react';\n\nexport interface TextInputIframeContainerProps extends HTMLAttributes<HTMLDivElement> {\n    additionalClassName?: string;\n    appearFocused?: boolean;\n    testId?: string;\n}\n\nconst TextInputIframeContainer: FunctionComponent<TextInputIframeContainerProps> = ({\n    additionalClassName,\n    appearFocused,\n    testId,\n    ...props\n}) => (\n    <div\n        {...props}\n        className={classNames(\n            'form-input',\n            'optimizedCheckout-form-input',\n            { 'form-input--focus': appearFocused },\n            { 'optimizedCheckout-form-input--focus': appearFocused },\n            additionalClassName,\n        )}\n        data-test={testId}\n    />\n);\n\nexport default TextInputIframeContainer;\n","import React, { type FunctionComponent, memo } from 'react';\n\nimport IconContainer, { type IconProps } from './IconContainer';\n\nconst IconChevronDownSvg: FunctionComponent = () => (\n    <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\" />\n    </svg>\n);\n\nconst IconChevronDown: FunctionComponent<IconProps> = (props) => (\n    <IconContainer {...props}>\n        <IconChevronDownSvg />\n    </IconContainer>\n);\n\nexport default memo(IconChevronDown);\n","import { number } from 'card-validator';\n\nimport { type WalletButtonInitializationData } from './types';\n\ninterface WalletPaymentData {\n    accountMask: string;\n    cardType: string;\n    expiryMonth?: string;\n    expiryYear?: string;\n}\n\nconst formatAccountMask = (accountMask = '', padding = '****'): string =>\n    accountMask.includes('*') ? accountMask : `${padding} ${accountMask}`;\n\nconst isWalletButtonInitializationData = (\n    object: unknown,\n): object is WalletButtonInitializationData => {\n    if (typeof object === 'object' && object !== null) {\n        if (\n            'card_information' in object &&\n            typeof object.card_information === 'object' &&\n            object.card_information !== null &&\n            'number' in object.card_information &&\n            'type' in object.card_information\n        ) {\n            return true;\n        }\n\n        if (\n            'cardData' in object &&\n            typeof object.cardData === 'object' &&\n            object.cardData !== null &&\n            'accountMask' in object.cardData &&\n            'cardType' in object.cardData &&\n            'expMonth' in object.cardData &&\n            'expYear' in object.cardData\n        ) {\n            return true;\n        }\n\n        if ('accountNum' in object && 'accountMask' in object && 'expDate' in object) {\n            return true;\n        }\n    }\n\n    return false;\n};\n\n// For some odd reason, `initializationData` is a schema-less object. So in\n// order to use it safely, we have to normalize it first.\nconst normalizeWalletPaymentData = (data: unknown): WalletPaymentData | undefined => {\n    if (isWalletButtonInitializationData(data)) {\n        if (data.card_information) {\n            return {\n                accountMask: formatAccountMask(data.card_information.number),\n                cardType: data.card_information.type,\n            };\n        }\n\n        if (data.cardData) {\n            return {\n                accountMask: formatAccountMask(data.cardData.accountMask),\n                cardType: data.cardData.cardType,\n                expiryMonth: data.cardData.expMonth,\n                expiryYear: data.cardData.expYear,\n            };\n        }\n\n        if (data.accountNum) {\n            const { card } = number(data.accountNum);\n\n            return {\n                accountMask: formatAccountMask(data.accountMask),\n                expiryMonth: data.expDate && data.expDate.substr(0, 2),\n                expiryYear: data.expDate && data.expDate.substr(2, 2),\n                cardType: card ? card.niceType : '',\n            };\n        }\n    }\n\n    return undefined;\n};\n\nexport default normalizeWalletPaymentData;\n","enum PaymentMethodType {\n    ApplePay = 'applepay',\n    Barclaycard = 'barclaycard',\n    CreditCard = 'credit-card',\n    GooglePay = 'googlepay',\n    PayWithGoogle = 'paywithgoogle',\n    MultiOption = 'multi-option',\n    Paypal = 'paypal',\n    PaypalCredit = 'paypal-credit',\n    PaypalVenmo = 'paypal-venmo',\n    VisaCheckout = 'visa-checkout',\n}\n\nexport default PaymentMethodType;\n","import { type LanguageService, type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport { capitalize, get } from 'lodash';\n\nimport PaymentMethodId from './PaymentMethodId';\nimport PaymentMethodType from './PaymentMethodType';\n\n/**\n * Always return the translated name of a payment method unless it is a\n * multi-option payment method or it doesn't have any translation. It's possible\n * to translate the gateway name of multi-option methods, i.e.: AfterPay.\n * However, because the options provided by the gateway can vary a lot, i.e.:\n * \"Pay by Installment\", therefore it's not feasible to do the translation on\n * the UI level.\n */\nexport default function getPaymentMethodName(\n    language: LanguageService,\n): (method: PaymentMethod) => string {\n    return (method) => {\n        let name = getTranslatedPaymentMethodName(language)(method);\n\n        if (!name || method.method === PaymentMethodType.MultiOption) {\n            name = method.config.displayName;\n        }\n\n        if (!name) {\n            name = capitalize(\n                get(method, 'initializationData.paymentData.cardData.digital_wallet_type') ||\n                    method.method ||\n                    method.id,\n            );\n        }\n\n        return name;\n    };\n}\n\nexport function getTranslatedPaymentMethodName(\n    language: LanguageService,\n): (method: PaymentMethod) => string | undefined {\n    return (method) => {\n        const translations: { [key: string]: string } = {\n            [PaymentMethodId.Affirm]: language.translate('payment.affirm_name_text'),\n            [PaymentMethodId.Afterpay]: language.translate('payment.afterpay_name_text'),\n            [PaymentMethodId.AmazonPay]: language.translate('payment.amazon_name_text'),\n            [PaymentMethodId.Bolt]: language.translate('payment.bolt_name_text'),\n            [PaymentMethodId.Clearpay]: language.translate('payment.clearpay_name_text'),\n            [PaymentMethodType.GooglePay]: language.translate('payment.google_pay_name_text'),\n            [PaymentMethodId.Klarna]: language.translate('payment.klarna_name_text'),\n            [PaymentMethodType.Paypal]: language.translate('payment.paypal_name_text'),\n            [PaymentMethodType.PaypalCredit]: language.translate('payment.paypal_credit_name_text'),\n            [PaymentMethodType.VisaCheckout]: language.translate('payment.vco_name_text'),\n        };\n\n        return translations[method.id] || translations[method.method];\n    };\n}\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent } from 'react';\n\nimport { useLocale } from '@bigcommerce/checkout/contexts';\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { getPaymentMethodName } from '@bigcommerce/checkout/payment-integration-api';\n\nexport interface SignOutLinkProps {\n    method: PaymentMethod;\n    onSignOut(): void;\n}\n\nconst SignOutLink: FunctionComponent<SignOutLinkProps> = ({ method, onSignOut }) => {\n    const { language } = useLocale();\n\n    return (\n        <div className=\"signout-link\">\n            <TranslatedString id=\"remote.sign_out_before_action\" />{' '}\n            {\n                // eslint-disable-next-line jsx-a11y/anchor-is-valid\n                <a href=\"#\" onClick={preventDefault(onSignOut)}>\n                    <TranslatedString\n                        data={{ providerName: getPaymentMethodName(language)(method) }}\n                        id=\"remote.sign_out_action\"\n                    />\n                </a>\n            }{' '}\n            <TranslatedString id=\"remote.sign_out_after_action\" />\n        </div>\n    );\n};\n\nexport default SignOutLink;\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type ReactNode } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { SignOutLink } from '@bigcommerce/checkout/instrument-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nexport interface PaymentViewProps {\n    accountMask?: string;\n    cardName?: string;\n    cardType?: string;\n    expiryMonth?: string;\n    expiryYear?: string;\n    shouldShowEditButton?: boolean;\n    editButtonClassName?: string;\n    editButtonLabel?: ReactNode;\n    buttonId: string;\n    method: PaymentMethod;\n    onSignOut: () => void;\n}\n\nconst PaymentView: React.FC<PaymentViewProps> = ({\n    accountMask,\n    cardName,\n    cardType,\n    expiryMonth,\n    expiryYear,\n    shouldShowEditButton,\n    editButtonClassName,\n    editButtonLabel,\n    buttonId,\n    method,\n    onSignOut,\n}) => {\n    return (\n        <>\n            {!!cardName && (\n                <p data-test=\"payment-method-wallet-card-name\">\n                    <strong>\n                        <TranslatedString id=\"payment.credit_card_name_label\" />:\n                    </strong>{' '}\n                    {cardName}\n                </p>\n            )}\n\n            {!!accountMask && !!cardType && (\n                <p data-test=\"payment-method-wallet-card-type\">\n                    <strong>{`${cardType}:`}</strong> {accountMask}\n                </p>\n            )}\n\n            {!!expiryMonth && !!expiryYear && (\n                <p data-test=\"payment-method-wallet-card-expiry\">\n                    <strong>\n                        <TranslatedString id=\"payment.credit_card_expiration_date_label\" />:\n                    </strong>{' '}\n                    {`${expiryMonth}/${expiryYear}`}\n                </p>\n            )}\n\n            {!!shouldShowEditButton && (\n                <p>\n                    {\n                        // eslint-disable-next-line jsx-a11y/anchor-is-valid\n                        <a\n                            className={editButtonClassName}\n                            href=\"#\"\n                            id={buttonId}\n                            onClick={preventDefault()}\n                        >\n                            {editButtonLabel || (\n                                <TranslatedString id=\"remote.select_different_card_action\" />\n                            )}\n                        </a>\n                    }\n                </p>\n            )}\n\n            <SignOutLink method={method} onSignOut={onSignOut} />\n        </>\n    );\n};\n\nexport default PaymentView;\n","import { type PaymentMethod } from '@bigcommerce/checkout-sdk';\nimport React, { type ReactNode } from 'react';\n\nimport { useLocale } from '@bigcommerce/checkout/contexts';\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { getPaymentMethodName } from '@bigcommerce/checkout/payment-integration-api';\n\nexport interface SignInViewProps {\n    buttonId: string;\n    method: PaymentMethod;\n    signInButtonClassName?: string;\n    signInButtonLabel?: ReactNode;\n}\n\nconst SignInView: React.FC<SignInViewProps> = ({\n    buttonId,\n    method,\n    signInButtonClassName,\n    signInButtonLabel,\n}) => {\n    const { language } = useLocale();\n\n    return (\n        // eslint-disable-next-line jsx-a11y/anchor-is-valid\n        <a className={signInButtonClassName} href=\"#\" id={buttonId} onClick={preventDefault()}>\n            {signInButtonLabel || (\n                <TranslatedString\n                    data={{ providerName: getPaymentMethodName(language)(method) }}\n                    id=\"remote.sign_in_action\"\n                />\n            )}\n        </a>\n    );\n};\n\nexport default SignInView;\n","import {\n    type CheckoutSelectors,\n    type CustomerRequestOptions,\n    type PaymentInitializeOptions,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { noop, some } from 'lodash';\nimport React, { type ReactNode, useCallback, useEffect } from 'react';\n\nimport { useCheckout } from '@bigcommerce/checkout/contexts';\nimport { type PaymentFormService } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport normalizeWalletPaymentData from './normalizeWalletPaymentData';\nimport PaymentView from './PaymentView';\nimport SignInView from './SignInView';\n\nexport interface WalletButtonPaymentMethodProps {\n    paymentForm: PaymentFormService;\n    buttonId: string;\n    editButtonClassName?: string;\n    editButtonLabel?: ReactNode;\n    isInitializing?: boolean;\n    method: PaymentMethod;\n    shouldShowEditButton?: boolean;\n    signInButtonClassName?: string;\n    signInButtonLabel?: ReactNode;\n    signOutCustomer(options: CustomerRequestOptions): Promise<CheckoutSelectors>;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n    onSignOut?(): void;\n    onSignOutError?(error: Error): void;\n    onUnhandledError?(error: Error): void;\n}\n\nconst WalletButtonPaymentMethodComponent: React.FC<WalletButtonPaymentMethodProps> = ({\n    paymentForm,\n    buttonId,\n    editButtonClassName,\n    editButtonLabel,\n    isInitializing = false,\n    method,\n    shouldShowEditButton,\n    signInButtonClassName,\n    signInButtonLabel,\n    signOutCustomer,\n    deinitializePayment,\n    initializePayment,\n    onSignOut = noop,\n    onSignOutError = noop,\n    onUnhandledError = noop,\n}) => {\n    const {\n        checkoutState: {\n            data: { getBillingAddress, getCheckout, isPaymentDataRequired },\n        },\n    } = useCheckout();\n\n    const billingAddress = getBillingAddress();\n    const checkout = getCheckout();\n\n    if (!billingAddress || !checkout) {\n        throw new Error('Unable to get checkout');\n    }\n\n    const walletPaymentData = normalizeWalletPaymentData(method.initializationData);\n    const isPaymentSelected = some(checkout.payments, { providerId: method.id });\n    // FIXME: I'm not sure how this would work for non-English names.\n    const cardName =\n        walletPaymentData && [billingAddress.firstName, billingAddress.lastName].join(' ');\n\n    const toggleSubmit = () => {\n        const { disableSubmit } = paymentForm;\n        const currentIsPaymentDataRequired = isPaymentDataRequired();\n\n        if (\n            normalizeWalletPaymentData(method.initializationData) ||\n            !currentIsPaymentDataRequired\n        ) {\n            disableSubmit(method, false);\n        } else {\n            disableSubmit(method, true);\n        }\n    };\n\n    const handleSignOut = useCallback(async () => {\n        try {\n            await signOutCustomer({ methodId: method.id });\n            onSignOut();\n            window.location.reload();\n        } catch (error) {\n            onSignOutError(error);\n        }\n    }, [signOutCustomer, method.id, onSignOut, onSignOutError]);\n\n    useEffect(() => {\n        const initializePaymentAsync = async () => {\n            toggleSubmit();\n\n            try {\n                await initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n            } catch (error) {\n                onUnhandledError(error);\n            }\n        };\n\n        void initializePaymentAsync();\n\n        return () => {\n            const deinitializePaymentAsync = async () => {\n                const { disableSubmit } = paymentForm;\n\n                disableSubmit(method, false);\n\n                try {\n                    await deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    onUnhandledError(error);\n                }\n            };\n\n            void deinitializePaymentAsync();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        toggleSubmit();\n    });\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isInitializing}>\n            <div className=\"paymentMethod paymentMethod--walletButton\">\n                {isPaymentSelected ? (\n                    <PaymentView\n                        {...walletPaymentData}\n                        buttonId={buttonId}\n                        cardName={cardName}\n                        editButtonClassName={editButtonClassName}\n                        editButtonLabel={editButtonLabel}\n                        method={method}\n                        onSignOut={handleSignOut}\n                        shouldShowEditButton={shouldShowEditButton}\n                    />\n                ) : (\n                    <SignInView\n                        buttonId={buttonId}\n                        method={method}\n                        signInButtonClassName={signInButtonClassName}\n                        signInButtonLabel={signInButtonLabel}\n                    />\n                )}\n            </div>\n        </LoadingOverlay>\n    );\n};\n\nexport default WalletButtonPaymentMethodComponent;\n"],"names":["BraintreeAchFieldType","OwnershipTypes","AccountTypes","accountTypeOptions","value","Savings","label","Checking","ownershipTypeOptions","Personal","Business","defaultBraintreeAchFormFields","name","AccountType","custom","id","required","fieldType","DynamicFormFieldType","DROPDOWM","options","items","AccountNumber","max","min","RoutingNumber","OwnershipType","personalBraintreeAchFormFields","FirstName","LastName","businessBraintreeAchFormFields","BusinessName","method","currentInstrument","setCurrentInstrument","useState","checkoutState","customer","data","getCustomer","instruments","getInstruments","paymentForm","setFieldValue","accountInstruments","useMemo","filter","isAchInstrument","isInstrumentFeatureAvailable","isGuest","Boolean","config","isVaultingEnabled","shouldShowInstrumentFieldset","length","shouldCreateNewInstrument","shouldConfirmInstrument","trustedShippingAddress","getDefaultInstrument","useCallback","defaultInstrument","useEffect","undefined","handleSelectInstrument","find","bigpayToken","handleUseNewInstrument","language","useLocale","getValidationSchema","formFields","getFieldValue","requiredFieldErrorTranslationIds","reduce","schema","translate","matches","validateBraintreeAchForm","braintreeAchFormValues","accountNumber","businessName","routingNumber","ownershipType","firstName","lastName","validationSchema","setValidationSchema","isValidAccountNumber","isValidRoutingNumber","isValidFirstName","isValidLastName","isValidBusinessName","Promise","all","fields","isValid","isValidDepositoryName","resetFormValidation","getTranslatedLabelByFieldName","fieldName","braintreeAchFormLabelsMap","accountType","Object","values","includes","isBraintreeAchFormFieldName","fieldValues","handleChange","fieldId","map","field","DynamicFormField","extraClass","key","onChange","updateMandateText","getFormValues","fullName","String","depositoryName","outstandingBalance","getCheckout","storeName","getConfig","storeProfile","symbol","getCart","currency","mandateTextTranslationKey","formattedDate","Date","now","toJSON","slice","split","reverse","join","mandateTextTranslationProps","toLowerCase","currentDate","mandateText","className","CheckboxFormField","labelContent","isValidForm","setIsValidForm","disableSubmit","getBillingAddress","defaultFormValues","shouldSaveInstrument","shouldSetAsDefaultInstrument","instrumentId","orderConsent","entries","resetFormValues","shouldShowForm","shouldShowMandateTextCheckbox","validate","mandateTextConfirmationCheckboxValue","AccountInstrumentFieldset","A","onSelectInstrument","onUseNewInstrument","selectedInstrument","TranslatedString","StoreInstrumentFieldset","isAccountInstrument","toResolvableComponent","checkoutService","onUnhandledError","currentMandateTextRef","useRef","initializePayment","gatewayId","gateway","methodId","integrations","braintreeach","getMandateText","current","error","Error","deinitializePayment","loadInstruments","isLoading","statuses","isLoadingInstruments","isLoadingPaymentMethod","formContextProps","isSubmitted","setSubmitted","FormContext","Provider","LoadingOverlay","hideContentWhenLoading","currentMandateText","renderPayPalCardComponent","cardType","type","mapFromInstrumentCardType","brand","CreditCardIcon","last4","PoweredByPayPalFastlaneLabel","Button","onClick","result","size","Tiny","testId","variant","Secondary","showPayPalCardSelector","setSelectedInstrument","getPaymentProviderCustomer","paymentProviderCustomer","paypalFastlaneCustomer","instrument","useBraintreeFastlaneInstruments","shouldShowInstrumentsForm","paypalFastlaneComponentRef","isInitializingPayment","braintreefastlane","onInit","onError","props","isHostedFormEnabled","threeDSecureContent","setThreeDSecureContent","focusedFieldType","setFocusedFieldType","ref","threeDSecureContentRef","createRef","cardCode","showCardHolderName","requireCustomerCode","setFieldTouched","submitForm","isInstrumentCardCodeRequiredProp","isInstrumentCardCodeRequiredSelector","isInstrumentCardNumberRequiredProp","isInstrumentCardNumberRequiredSelector","isCardCodeRequired","isCardHolderNameRequired","getHostedFieldId","compact","getHostedFormOptions","styleProps","isInstrumentCardNumberRequired","isInstrumentCardCodeRequired","styleContainerId","cardCodeVerification","accessibilityLabel","containerId","cardNumberVerification","cardExpiry","placeholder","cardName","cardNumber","styles","default","getCreditCardInputStyles","focus","Focus","onBlur","onCardTypeChange","onEnter","onFocus","onValidate","errors","forIn","fieldErrors","errorKey","getHostedStoredCardValidationFieldset","HostedCreditCardValidation","cardCodeId","cardNumberId","initializeBraintreePayment","braintree","threeDSecure","addFrame","content","cancel","cancelThreeDSecureVerification","removeFrame","onPaymentError","message","form","appendThreeDSecureContent","appendChild","cancelThreeDSecureModalFlow","cardFieldset","HostedCreditCardFieldset","additionalFields","CreditCardCustomerCodeField","cardExpiryId","cardNameId","cardValidationSchema","getHostedCreditCardValidationSchema","getStoredCardValidationFieldset","storedCardValidationSchema","getHostedInstrumentValidationSchema","isCardExpiryRequired","Modal","additionalBodyClassName","closeButtonLabel","isOpen","onAfterOpen","onRequestClose","braintreelocalmethods","container","buttonText","brandName","onRenderButton","hidePaymentSubmitButton","rest","initializeBraintreePaypalPaymentMethod","defaultOptions","HostedPaymentComponent","initializeVisaCheckoutPayment","mergedOptions","braintreevisacheckout","onPaymentSelect","reinitializePayment","WalletButtonPaymentMethodComponent","buttonId","editButtonClassName","shouldShowEditButton","signInButtonClassName","signOutCustomer","PaymentMethodId","BraintreeVisaCheckout","getAppliedStyles","element","properties","pseudoElementSelector","declaration","window","getComputedStyle","propertyName","getPropertyValue","kebabCase","appearFocused","renderInput","additionalClassName","placement","tooltip","input","TextInputIframeContainer","FormField","Fieldset","legend","Legend","hidden","HostedCreditCardNumberField","HostedCreditCardExpiryField","HostedCreditCardCodeField","shape","hostedForm","test","cardExpiryVerification","description","isInitializing","noop","isAddingNewInstrument","setIsAddingNewInstrument","derivedProps","filterAccountInstruments","filterTrustedInstruments","isUsingMultiShipping","isPaymentDataRequired","isPaymentDataSubmitted","cart","currentMethodInstruments","trustedInstruments","isNewAddress","paymentMethod","getHostedPaymentMethodDerivedProps","isInstrumentFeatureAvailableProp","currentSelectedInstrument","CreditCardInputStylesType","Default","document","createElement","parentContainer","getElementById","resolve","hasError","parentElement","removeChild","memo","onSelectedAll","onSelectedNone","handleSelectAllClick","event","preventDefault","handleSelectNoneClick","href","MultiCheckboxFormField","push","remove","handleSelectAll","checkedValues","difference","forEach","val","handleSelectNone","handleInputChange","checked","target","indexOf","FormFieldContainer","DynamicInput","CHECKBOX","FormFieldError","errorId","renderField","renderProps","pick","render","secret","fieldLabel","maxLength","parentFieldName","inputId","autocomplete","isFloatingLabelEnabled","fieldInputId","isFloatingLabelSupportedFieldType","labelComponent","labelClassName","Label","htmlFor","dynamicFormFieldType","NUMBER","TELEPHONE","PASSWORD","TEXT","autoComplete","helperLabel","rows","LocaleContext","displayNamePrefix","pickProps","forwardRef","ReactDatePicker","lazy","date","inputDateFormat","inputFormat","handleDateChange","dateValue","IconChevronDown","optionValue","RADIO","RadioInput","CheckboxInput","Array","isArray","DATE","Suspense","calendarClassName","dateFormat","maxDate","minDate","placeholderText","toUpperCase","popperClassName","selected","isDate","MULTILINE","TextInput","IconChevronDownSvg","height","viewBox","width","xmlns","d","formatAccountMask","accountMask","padding","object","card_information","cardData","isWalletButtonInitializationData","number","expiryMonth","expMonth","expiryYear","expYear","accountNum","card","expDate","substr","niceType","PaymentMethodType","getPaymentMethodName","translations","Affirm","Afterpay","AmazonPay","Bolt","Clearpay","GooglePay","Klarna","Paypal","PaypalCredit","VisaCheckout","getTranslatedPaymentMethodName","MultiOption","displayName","capitalize","get","onSignOut","providerName","editButtonLabel","signInButtonLabel","onSignOutError","billingAddress","checkout","walletPaymentData","initializationData","isPaymentSelected","some","payments","providerId","toggleSubmit","currentIsPaymentDataRequired","handleSignOut","location","reload"],"sourceRoot":""}