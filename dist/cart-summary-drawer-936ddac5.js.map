{"version":3,"file":"cart-summary-drawer-936ddac5.js","mappings":"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","sources":["webpack://checkout/./packages/core/src/app/cart/CartSummaryDrawer.tsx","webpack://checkout/./packages/core/src/app/order/getLineItemsCount.ts","webpack://checkout/./packages/ui/src/icon/IconCloseWithBorder.tsx","webpack://checkout/./packages/core/src/app/order/OrderModalSummarySubheader.tsx","webpack://checkout/./packages/core/src/app/order/OrderSummaryModal.tsx","webpack://checkout/./packages/core/src/app/order/OrderSummaryDrawer.tsx","webpack://checkout/./packages/core/src/app/ui/modal/ModalTrigger.tsx"],"sourcesContent":["import React, { type FunctionComponent, memo } from 'react';\n\nimport { withCheckout } from '../checkout';\nimport OrderSummaryDrawer from '../order/OrderSummaryDrawer';\n\nimport { type WithCheckoutCartSummaryProps } from './CartSummary';\nimport EditLink from './EditLink';\nimport mapToCartSummaryProps from './mapToCartSummaryProps';\nimport withRedeemable from './withRedeemable';\n\nconst CartSummaryDrawer: FunctionComponent<\n    WithCheckoutCartSummaryProps & {\n        isMultiShippingMode: boolean;\n    }\n    > = ({ cartUrl, isMultiShippingMode, isBuyNowCart, ...props }) =>\n    withRedeemable(OrderSummaryDrawer)({\n        ...props,\n        isBuyNowCart,\n        cartUrl,\n        headerLink: isBuyNowCart ? <div /> : (\n            <EditLink\n                className=\"modal-header-link cart-modal-link\"\n                isMultiShippingMode={isMultiShippingMode}\n                url={cartUrl}\n            />\n        ),\n    });\n\nexport default withCheckout(mapToCartSummaryProps)(memo(CartSummaryDrawer));\n","import { type LineItemMap } from '@bigcommerce/checkout-sdk';\n\nexport default function getLineItemsCount({\n    physicalItems,\n    digitalItems,\n    giftCertificates,\n    customItems,\n}: LineItemMap): number {\n    return (\n        physicalItems.length +\n        digitalItems.length +\n        giftCertificates.length +\n        (customItems || []).length\n    );\n}\n","import React, { type FunctionComponent, memo } from 'react';\n\nimport IconContainer, { type IconProps } from './IconContainer';\n\nconst IconCloseWithBorderSvg: FunctionComponent = () => (\n    <svg fill=\"none\" height=\"37\" viewBox=\"0 0 38 37\" width=\"38\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n            d=\"M38 18.5C38 28.7173 29.7173 37 19.5 37C9.28273 37 1 28.7173 1 18.5C1 8.28273 9.28273 0 19.5 0C29.7173 0 38 8.28273 38 18.5Z\"\n            fill=\"#F3F3F3\"\n        />\n        <path\n            clipRule=\"evenodd\"\n            d=\"M24.6671 24.6674L12.9998 13.0002L14.4141 11.5859L26.0813 23.2532L24.6671 24.6674Z\"\n            fill=\"black\"\n            fillRule=\"evenodd\"\n        />\n        <path\n            clipRule=\"evenodd\"\n            d=\"M25.6674 13.0004L14.0002 24.6676L12.5859 23.2534L24.2532 11.5862L25.6674 13.0004Z\"\n            fill=\"black\"\n            fillRule=\"evenodd\"\n        />\n    </svg>\n);\n\nconst IconCloseWithBorder: FunctionComponent<IconProps> = (props) => (\n    <IconContainer {...props}>\n        <IconCloseWithBorderSvg />\n    </IconContainer>\n);\n\nexport default memo(IconCloseWithBorder);\n","import { type LineItemMap } from '@bigcommerce/checkout-sdk';\nimport React, { type FunctionComponent, memo, type ReactNode } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport getItemsCount from './getItemsCount';\n\nexport interface OrderModalSummarySubheaderProps {\n    items: LineItemMap\n    amountWithCurrency: ReactNode;\n    shopperCurrencyCode: string;\n    storeCurrencyCode: string;\n}\n\nconst OrderModalSummarySubheader: FunctionComponent<OrderModalSummarySubheaderProps> = ({\n    items,\n    shopperCurrencyCode,\n    storeCurrencyCode,\n    amountWithCurrency,\n}) => {\n    const itemsCount = getItemsCount(items);\n    const hasDifferentCurrency = shopperCurrencyCode !== storeCurrencyCode;\n    const itemsText = itemsCount === 1 ? 'cart.item' : 'cart.items';\n\n    return <>\n        {itemsCount} <TranslatedString id={itemsText} /> | {amountWithCurrency} {\n            hasDifferentCurrency && <span>({shopperCurrencyCode})</span>\n        }\n    </>;\n};\n\nexport default memo(OrderModalSummarySubheader);\n","import {\n    type LineItemMap,\n    type ShopperCurrency as ShopperCurrencyType,\n    type StoreCurrency,\n} from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport React, { cloneElement, type FunctionComponent, isValidElement, type ReactNode } from 'react';\n\nimport { useCheckout, useLocale, useThemeContext } from '@bigcommerce/checkout/contexts';\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedHtml, TranslatedString } from '@bigcommerce/checkout/locale';\nimport { Button, IconCloseWithBorder } from '@bigcommerce/checkout/ui';\n\nimport { isExperimentEnabled } from '../common/utility';\nimport { NewOrderSummarySubtotals } from '../coupon';\nimport { ShopperCurrency } from '../currency';\nimport { Modal, ModalHeader } from '../ui/modal';\nimport { isMobileView } from '../ui/responsive';\n\nimport OrderModalSummarySubheader from './OrderModalSummarySubheader';\nimport OrderSummaryItems from './OrderSummaryItems';\nimport OrderSummaryPrice from './OrderSummaryPrice';\nimport OrderSummarySection from './OrderSummarySection';\nimport OrderSummarySubtotals, { type OrderSummarySubtotalsProps } from './OrderSummarySubtotals';\nimport OrderSummaryTotal from './OrderSummaryTotal';\n\nexport interface OrderSummaryDrawerProps {\n    children: ReactNode;\n    additionalLineItems?: ReactNode;\n    items: LineItemMap;\n    total: number;\n    storeCurrency: StoreCurrency;\n    shopperCurrency: ShopperCurrencyType;\n    isOpen: boolean;\n    headerLink?: ReactNode & React.HTMLProps<HTMLDivElement>;\n    onRequestClose?(): void;\n    onAfterOpen?(): void;\n}\n\nconst OrderSummaryModal: FunctionComponent<\n    OrderSummaryDrawerProps & OrderSummarySubtotalsProps\n> = ({\n    additionalLineItems,\n    isTaxIncluded,\n    taxes,\n    onRequestClose,\n    onAfterOpen,\n    storeCurrency,\n    shopperCurrency,\n    isOpen,\n    headerLink,\n    items,\n    total,\n    ...orderSummarySubtotalsProps\n}) => {\n    const { currency } = useLocale();\n    const { checkoutState } = useCheckout();\n    const { themeV2 } = useThemeContext();\n    const { checkoutSettings } = checkoutState.data.getConfig() ?? {};\n    const checkout = checkoutState.data.getCheckout();\n    const order = checkoutState.data.getOrder();\n\n    const isMultiCouponEnabled = isExperimentEnabled(checkoutSettings, 'CHECKOUT-9674.multi_coupon_cart_checkout', false);\n    const isMultiCouponEnabledForCheckout = isMultiCouponEnabled && !!checkout;\n    const isMultiCouponEnabledForOrder = isMultiCouponEnabled && !checkout && !!order;\n\n    if (!currency) {\n        return null;\n    }\n\n    let totalDiscount;\n    \n    if (isMultiCouponEnabledForCheckout) {\n        totalDiscount = checkout.totalDiscount;\n    }\n\n    if (isMultiCouponEnabledForOrder) {\n        totalDiscount = order.totalDiscount;\n    }\n   \n    const displayInclusiveTax = isTaxIncluded && taxes && taxes.length > 0;\n    const isTotalDiscountVisible = Boolean(totalDiscount && totalDiscount > 0);\n\n    const subHeaderText = <OrderModalSummarySubheader\n        amountWithCurrency={<ShopperCurrency amount={total} />}\n        items={items}\n        shopperCurrencyCode={shopperCurrency.code}\n        storeCurrencyCode={storeCurrency.code}\n    />;\n\n    const continueButton = isMobileView() && <Button\n        className='cart-modal-continue'\n        data-test=\"manage-instrument-cancel-button\"\n        onClick={preventDefault(onRequestClose)}>\n            <TranslatedString id=\"cart.return_to_checkout\" />\n    </Button>;\n\n    return <Modal\n        additionalBodyClassName=\"cart-modal-body optimizedCheckout-orderSummary\"\n        additionalHeaderClassName=\"cart-modal-header optimizedCheckout-orderSummary with-continue-button\"\n        additionalModalClassName={classNames(\"optimizedCheckout-cart-modal\", { \"themeV2\": themeV2 })}\n        footer={continueButton}\n        header={renderHeader({\n            headerLink,\n            subHeaderText,\n            onRequestClose,\n        })}\n        isOpen={isOpen}\n        onAfterOpen={onAfterOpen}\n        onRequestClose={onRequestClose}\n    >\n        <OrderSummarySection>\n            <OrderSummaryItems displayLineItemsCount={false} items={items} />\n        </OrderSummarySection>\n        {isMultiCouponEnabledForCheckout || isMultiCouponEnabledForOrder\n            ? <NewOrderSummarySubtotals\n                fees={orderSummarySubtotalsProps.fees}\n                giftWrappingAmount={orderSummarySubtotalsProps.giftWrappingAmount}\n                handlingAmount={orderSummarySubtotalsProps.handlingAmount}\n                isOrderConfirmation={!!isMultiCouponEnabledForOrder}\n                isTaxIncluded={isTaxIncluded}\n                storeCreditAmount={orderSummarySubtotalsProps.storeCreditAmount}\n                taxes={taxes}\n            />\n            : <OrderSummarySection>\n                    <OrderSummarySubtotals isTaxIncluded={isTaxIncluded} taxes={taxes} {...orderSummarySubtotalsProps} />\n                    {additionalLineItems}\n            </OrderSummarySection>\n        }\n        <OrderSummarySection>\n            <OrderSummaryTotal\n                orderAmount={total}\n                shopperCurrencyCode={shopperCurrency.code}\n                storeCurrencyCode={storeCurrency.code}\n            />\n            {(isTotalDiscountVisible && totalDiscount) &&\n                <div className=\"total-savings\">\n                    <TranslatedHtml\n                        data={{ totalDiscount: currency.toCustomerCurrency(totalDiscount) }}\n                        id=\"redeemable.total_savings_text\"\n                    />\n                </div>\n            }\n        </OrderSummarySection>\n        {displayInclusiveTax && <OrderSummarySection>\n                <h5\n                    className=\"cart-taxItem cart-taxItem--subtotal optimizedCheckout-contentPrimary\"\n                    data-test=\"tax-text\"\n                >\n                    <TranslatedString\n                        id=\"tax.inclusive_label\"\n                    />\n                </h5>\n                {(taxes || []).map((tax, index) => (\n                    <OrderSummaryPrice\n                        amount={tax.amount}\n                        key={index}\n                        label={tax.name}\n                        testId=\"cart-taxes\"\n                    />\n                ))}\n            </OrderSummarySection>}\n    </Modal>\n};\n\nconst renderHeader: FunctionComponent<{\n    headerLink?: ReactNode & React.HTMLProps<HTMLDivElement>;\n    subHeaderText: ReactNode;\n    onRequestClose?(): void;\n}> = ({ onRequestClose, headerLink, subHeaderText }) => {\n    let newHeaderLink;\n\n    if (isValidElement(headerLink)) {\n        newHeaderLink = cloneElement(headerLink, { className: 'modal-header-link cart-modal-link test' });\n    }\n\n    return <>\n        {newHeaderLink ?? headerLink}\n        <ModalHeader additionalClassName=\"cart-modal-title\">\n            <div>\n                <TranslatedString id=\"cart.cart_heading\" />\n                <div className='cart-heading-subheader'>{subHeaderText}</div>\n            </div>\n        </ModalHeader>\n        <a className=\"cart-modal-close\" href=\"#\" onClick={preventDefault(onRequestClose)}>\n            <span className=\"is-srOnly\">\n                <TranslatedString id=\"common.close_action\" />\n            </span>\n            <IconCloseWithBorder />\n        </a>\n    </>\n};\n\nexport default OrderSummaryModal;\n","import {\n    type LineItemMap,\n    type ShopperCurrency as ShopperCurrencyType,\n    type StoreCurrency,\n} from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport React, { type FunctionComponent, memo, type ReactNode, useCallback, useMemo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { ShopperCurrency } from '../currency';\nimport { IconGiftCertificate } from '../ui/icon';\nimport { ModalTrigger } from '../ui/modal';\n\nimport getItemsCount from './getItemsCount';\nimport getLineItemsCount from './getLineItemsCount';\nimport OrderSummaryModal from './OrderSummaryModal';\nimport { type OrderSummarySubtotalsProps } from './OrderSummarySubtotals';\nimport removeBundledItems from './removeBundledItems';\n\nexport interface OrderSummaryDrawerProps {\n    lineItems: LineItemMap;\n    total: number;\n    headerLink: ReactNode;\n    storeCurrency: StoreCurrency;\n    shopperCurrency: ShopperCurrencyType;\n    additionalLineItems?: ReactNode;\n}\n\nconst OrderSummaryDrawer: FunctionComponent<\n    OrderSummaryDrawerProps & OrderSummarySubtotalsProps\n> = ({\n    additionalLineItems,\n    coupons,\n    discountAmount,\n    giftCertificates,\n    handlingAmount,\n    headerLink,\n    isTaxIncluded,\n    lineItems,\n    onRemovedCoupon,\n    onRemovedGiftCertificate,\n    shippingAmount,\n    shippingAmountBeforeDiscount,\n    shopperCurrency,\n    storeCreditAmount,\n    giftWrappingAmount,\n    storeCurrency,\n    subtotalAmount,\n    taxes,\n    total,\n    fees,\n}) => {\n    const nonBundledLineItems = useMemo(() => removeBundledItems(lineItems), [lineItems]);\n\n    const renderModal = useCallback(\n        (props: any) => (\n            <OrderSummaryModal\n                {...props}\n                additionalLineItems={additionalLineItems}\n                coupons={coupons}\n                discountAmount={discountAmount}\n                fees={fees}\n                giftCertificates={giftCertificates}\n                giftWrappingAmount={giftWrappingAmount}\n                handlingAmount={handlingAmount}\n                headerLink={headerLink}\n                isTaxIncluded={isTaxIncluded}\n                items={nonBundledLineItems}\n                onRemovedCoupon={onRemovedCoupon}\n                onRemovedGiftCertificate={onRemovedGiftCertificate}\n                shippingAmount={shippingAmount}\n                shippingAmountBeforeDiscount={shippingAmountBeforeDiscount}\n                shopperCurrency={shopperCurrency}\n                storeCreditAmount={storeCreditAmount}\n                storeCurrency={storeCurrency}\n                subtotalAmount={subtotalAmount}\n                taxes={taxes}\n                total={total}\n            />\n        ),\n        [\n            additionalLineItems,\n            coupons,\n            discountAmount,\n            giftCertificates,\n            handlingAmount,\n            headerLink,\n            isTaxIncluded,\n            nonBundledLineItems,\n            onRemovedCoupon,\n            onRemovedGiftCertificate,\n            giftWrappingAmount,\n            shippingAmount,\n            shippingAmountBeforeDiscount,\n            shopperCurrency,\n            storeCreditAmount,\n            storeCurrency,\n            subtotalAmount,\n            taxes,\n            total,\n            fees,\n        ],\n    );\n\n    return (\n        <ModalTrigger modal={renderModal}>\n            {({ onClick, onKeyPress }) => (\n                <div\n                    className=\"cartDrawer optimizedCheckout-orderSummary\"\n                    onClick={onClick}\n                    onKeyPress={onKeyPress}\n                    tabIndex={0}\n                >\n                    <figure\n                        className={classNames('cartDrawer-figure', {\n                            'cartDrawer-figure--stack': getLineItemsCount(nonBundledLineItems) > 1,\n                        })}\n                    >\n                        <div className=\"cartDrawer-imageWrapper\">{getImage(nonBundledLineItems)}</div>\n                    </figure>\n                    <div className=\"cartDrawer-body\">\n                        <h3 className=\"cartDrawer-items optimizedCheckout-headingPrimary\">\n                            <TranslatedString\n                                data={{ count: getItemsCount(nonBundledLineItems) }}\n                                id=\"cart.item_count_text\"\n                            />\n                        </h3>\n                        <a>\n                            <TranslatedString id=\"cart.show_details_action\" />\n                        </a>\n                    </div>\n                    <div className=\"cartDrawer-actions\">\n                        <h3 className=\"cartDrawer-total optimizedCheckout-headingPrimary\">\n                            <ShopperCurrency amount={total} />\n                        </h3>\n                    </div>\n                </div>\n            )}\n        </ModalTrigger>\n    );\n};\n\nfunction getImage(lineItems: LineItemMap): ReactNode {\n    const productWithImage = lineItems.physicalItems[0] || lineItems.digitalItems[0];\n\n    if (productWithImage && productWithImage.imageUrl) {\n        return (\n            <img\n                alt={productWithImage.name}\n                data-test=\"cart-item-image\"\n                src={productWithImage.imageUrl}\n            />\n        );\n    }\n\n    if (lineItems.giftCertificates.length) {\n        return <IconGiftCertificate />;\n    }\n}\n\nexport default memo(OrderSummaryDrawer);\n","import React, {\n    type KeyboardEvent,\n    type KeyboardEventHandler,\n    type MouseEventHandler,\n    type ReactElement,\n    type ReactNode,\n    useEffect,\n    useRef,\n    useState,\n} from 'react';\n\nexport interface ModalTriggerProps {\n    children(props: { onClick: MouseEventHandler; onKeyPress: KeyboardEventHandler<HTMLDivElement> }): ReactNode;\n    modal(props: ModalTriggerModalProps): ReactNode;\n}\n\nexport interface ModalTriggerModalProps {\n    isOpen: boolean;\n    onRequestClose(): void;\n}\n\nconst ModalTrigger = ({ children, modal }: ModalTriggerProps): ReactElement => {\n    const [isOpen, setIsOpen] = useState(false);\n    const canHandleEventRef = useRef(false);\n\n    useEffect(() => {\n        canHandleEventRef.current = true;\n\n        return () => {\n            canHandleEventRef.current = false;\n        };\n    }, []);\n\n    const handleOpen = (): void => {\n        if (!canHandleEventRef.current) {\n            return;\n        }\n\n        setIsOpen(true);\n    };\n\n    const handleClose = (): void => {\n        if (!canHandleEventRef.current) {\n            return;\n        }\n\n        setIsOpen(false);\n    };\n\n    const handleKeyOpen = (keyboardEvent: KeyboardEvent<HTMLElement>): void => {\n        if (keyboardEvent.key === 'Enter') {\n            handleOpen();\n        }\n    };\n\n    return (\n        <>\n            {children({\n                onClick: handleOpen,\n                onKeyPress: handleKeyOpen,\n            })}\n\n            {modal({\n                isOpen,\n                onRequestClose: handleClose,\n            })}\n        </>\n    );\n};\n\nexport default ModalTrigger;\n"],"names":["memo","cartUrl","isMultiShippingMode","isBuyNowCart","props","headerLink","className","url","getLineItemsCount","physicalItems","digitalItems","giftCertificates","customItems","length","IconCloseWithBorderSvg","fill","height","viewBox","width","xmlns","d","clipRule","fillRule","IconContainer","items","shopperCurrencyCode","storeCurrencyCode","amountWithCurrency","itemsCount","getItemsCount","hasDifferentCurrency","itemsText","TranslatedString","id","renderHeader","onRequestClose","subHeaderText","newHeaderLink","isValidElement","cloneElement","ModalHeader","additionalClassName","href","onClick","preventDefault","additionalLineItems","isTaxIncluded","taxes","onAfterOpen","storeCurrency","shopperCurrency","isOpen","total","orderSummarySubtotalsProps","currency","useLocale","checkoutState","themeV2","checkoutSettings","data","getConfig","checkout","getCheckout","order","getOrder","isMultiCouponEnabled","isExperimentEnabled","isMultiCouponEnabledForCheckout","isMultiCouponEnabledForOrder","totalDiscount","displayInclusiveTax","isTotalDiscountVisible","Boolean","ShopperCurrency","amount","code","continueButton","isMobileView","Button","Modal","additionalBodyClassName","additionalHeaderClassName","additionalModalClassName","footer","header","OrderSummarySection","OrderSummaryItems","displayLineItemsCount","NewOrderSummarySubtotals","fees","giftWrappingAmount","handlingAmount","isOrderConfirmation","storeCreditAmount","OrderSummarySubtotals","OrderSummaryTotal","orderAmount","TranslatedHtml","toCustomerCurrency","map","tax","index","OrderSummaryPrice","key","label","name","testId","coupons","discountAmount","lineItems","onRemovedCoupon","onRemovedGiftCertificate","shippingAmount","shippingAmountBeforeDiscount","subtotalAmount","nonBundledLineItems","useMemo","removeBundledItems","renderModal","useCallback","ModalTrigger","modal","onKeyPress","tabIndex","productWithImage","imageUrl","alt","src","IconGiftCertificate","getImage","count","children","setIsOpen","useState","canHandleEventRef","useRef","useEffect","current","handleOpen","keyboardEvent"],"sourceRoot":""}