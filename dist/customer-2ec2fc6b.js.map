{"version":3,"file":"customer-2ec2fc6b.js","mappings":"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","sources":["webpack://checkout/./packages/core/src/app/customer/validationPatterns.ts","webpack://checkout/./packages/core/src/app/customer/getEmailValidationSchema.ts","webpack://checkout/./packages/core/src/app/customer/getCreateCustomerValidationSchema.ts","webpack://checkout/./packages/core/src/app/customer/CreateAccountForm.tsx","webpack://checkout/./packages/locale/src/TranslatedLink.tsx","webpack://checkout/./packages/core/src/app/customer/EmailField.tsx","webpack://checkout/./packages/core/src/app/customer/EmailLoginForm.tsx","webpack://checkout/./packages/core/src/app/customer/CheckoutButtonList.tsx","webpack://checkout/./packages/paypal-fastlane-integration/src/is-fastlane-window.ts","webpack://checkout/./packages/paypal-fastlane-integration/src/PayPalFastlaneWatermark.tsx","webpack://checkout/./packages/core/src/app/privacyPolicy/PrivacyPolicyField.tsx","webpack://checkout/./packages/core/src/app/privacyPolicy/getPrivacyPolicyValidationSchema.ts","webpack://checkout/./packages/core/src/app/customer/SubscribeField.tsx","webpack://checkout/./packages/core/src/app/customer/GuestForm.tsx","webpack://checkout/./packages/core/src/app/customer/StripeGuestForm.tsx","webpack://checkout/./packages/core/src/app/customer/GuestFormContainer.tsx","webpack://checkout/./packages/core/src/app/ui/icon/IconEye.tsx","webpack://checkout/./packages/core/src/app/ui/icon/IconEyeSlash.tsx","webpack://checkout/./packages/core/src/app/customer/PasswordField.tsx","webpack://checkout/./packages/core/src/app/customer/RedirectToStorefrontLogin.tsx","webpack://checkout/./packages/core/src/app/customer/LoginForm.tsx","webpack://checkout/./packages/core/src/app/customer/mapErrorMessage.ts","webpack://checkout/./packages/core/src/app/customer/useCustomer.ts","webpack://checkout/./packages/core/src/app/customer/Customer.tsx","webpack://checkout/./packages/core/src/app/customer/mapCreateAccountFromFormValues.ts","webpack://checkout/./packages/core/src/app/payment/getProviderWithCustomCheckout.ts","webpack://checkout/./packages/dom-utils/src/getAppliedStyles.ts","webpack://checkout/./packages/dom-utils/src/parseAnchor.ts","webpack://checkout/./packages/ui/src/button/Button.tsx"],"sourcesContent":["// NOTE: This is a legacy regex used to create accounts, more flexible than the current used one\n// we need to keep this regex for login validation as accounts might have been created using this regex\nexport const EMAIL_REGEXP =\n    /^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { object, type ObjectSchema, string } from 'yup';\n\nimport { EMAIL_REGEXP } from './validationPatterns';\n\nexport interface EmailValidationSchemaOptions {\n    language: LanguageService;\n}\n\nexport default function getEmailValidationSchema({\n    language,\n}: EmailValidationSchemaOptions): ObjectSchema<{ email: string }> {\n    return object({\n        email: string()\n            .max(256)\n            .matches(EMAIL_REGEXP, language.translate('customer.email_invalid_error'))\n            .required(language.translate('customer.email_required_error')),\n    });\n}\n","import { type FormField, type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { object, type ObjectSchema, string } from 'yup';\n\nimport {\n    type CustomFormFieldValues,\n    getCustomFormFieldsValidationSchema,\n    type TranslateValidationErrorFunction,\n} from '../formFields';\n\nimport getEmailValidationSchema from './getEmailValidationSchema';\nimport { type PasswordRequirements } from './getPasswordRequirements';\n\nexport type CreateAccountFormValues = {\n    firstName: string;\n    lastName: string;\n    email: string;\n    password: string;\n    acceptsMarketingEmails?: string[];\n    token?: string;\n} & CustomFormFieldValues;\n\nexport interface CreateCustomerValidationSchema {\n    formFields: FormField[];\n    language: LanguageService;\n    passwordRequirements: PasswordRequirements;\n}\n\n/* istanbul ignore next */ // Currently no limitation on new customer's name\nfunction getTranslateCreateCustomerError(\n    language?: LanguageService,\n): TranslateValidationErrorFunction {\n    return (type, { label, min, max }) => {\n        if (!language) {\n            return;\n        }\n\n        if (type === 'required') {\n            return language.translate('customer.required_error', { label });\n        }\n\n        if (type === 'max' && max) {\n            return language.translate('customer.max_error', { label, max });\n        }\n\n        if (type === 'min' && min) {\n            return language.translate('customer.min_error', { label, min });\n        }\n\n        if (type === 'invalid') {\n            return language.translate('customer.invalid_characters_error', { label });\n        }\n    };\n}\n\nexport default memoize(function getCreateCustomerValidationSchema({\n    formFields,\n    language,\n    passwordRequirements: { description, numeric, alpha, minLength },\n}: CreateCustomerValidationSchema): ObjectSchema<CreateAccountFormValues> {\n    return object({\n        firstName: string().required(language.translate('address.first_name_required_error')),\n        lastName: string().required(language.translate('address.last_name_required_error')),\n        password: string()\n            .required(language.translate('customer.password_required_error') || description)\n            .matches(\n                numeric,\n                language.translate('customer.password_number_required_error') || description,\n            )\n            .matches(\n                alpha,\n                language.translate('customer.password_letter_required_error') || description,\n            )\n            .min(\n                minLength,\n                language.translate('customer.password_under_minimum_length_error') || description,\n            )\n            .max(100, language.translate('customer.password_over_maximum_length_error')),\n    })\n        .concat(getEmailValidationSchema({ language }))\n        .concat(\n            getCustomFormFieldsValidationSchema({\n                formFields,\n                translate: getTranslateCreateCustomerError(language),\n            }),\n        );\n});\n","/* istanbul ignore file */\n\n// TODO: CHECKOUT-9010 Cover 'Customer registration failure due to using an existing email' in functional tests repo\nimport { type FormField } from '@bigcommerce/checkout-sdk';\nimport { type FormikProps, withFormik } from 'formik';\nimport { noop } from 'lodash';\nimport React, { type FunctionComponent, useMemo } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString, withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { DynamicFormField } from '@bigcommerce/checkout/ui';\n\nimport { isRequestError } from '../common/error';\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { Fieldset, Form } from '../ui/form';\n\nimport getCreateCustomerValidationSchema, {\n    type CreateAccountFormValues,\n} from './getCreateCustomerValidationSchema';\nimport getPasswordRequirements from './getPasswordRequirements';\n\nimport './CreateAccountForm.scss';\n\nexport interface CreateAccountFormProps {\n    formFields: FormField[];\n    createAccountError?: Error;\n    isCreatingAccount?: boolean;\n    isExecutingPaymentMethodCheckout?: boolean;\n    requiresMarketingConsent: boolean;\n    defaultShouldSubscribe: boolean;\n    isFloatingLabelEnabled?: boolean;\n    onCancel?(): void;\n    onSubmit(values: CreateAccountFormValues): void;\n}\n\nfunction getAcceptsMarketingEmailsDefault(defaultShouldSubscribe: boolean, requiresMarketingConsent: boolean): string[] {\n    if (defaultShouldSubscribe) {\n        return ['1'];\n    }\n\n    return requiresMarketingConsent ? [] : ['0'];\n}\n\nfunction transformFormFieldsData(formFields: FormField[], defaultShouldSubscribe: boolean): FormField[] {\n    return formFields.map(field => {\n        if (field.name === 'acceptsMarketingEmails') {\n            const { options } = field;\n            const items = options?.items || [];\n\n            const updatedItems = items.map(item => {\n                return {\n                    value: defaultShouldSubscribe ? '1' : item.value,\n                    label: item.label,\n                }\n            });\n\n            return {\n                ...field,\n                options: {\n                    items: updatedItems,\n                }\n            }\n        }\n\n        return field;\n    });\n}\n\nconst CreateAccountForm: FunctionComponent<\n    CreateAccountFormProps & WithLanguageProps & FormikProps<CreateAccountFormValues>\n> = ({ formFields, createAccountError, isCreatingAccount, isExecutingPaymentMethodCheckout, onCancel, isFloatingLabelEnabled, defaultShouldSubscribe }) => {\n    const createAccountErrorMessage = useMemo(() => {\n        if (!createAccountError) {\n            return;\n        }\n\n        if (isRequestError(createAccountError) && createAccountError.status === 409) {\n            const splitMessage = createAccountError.message.split(':');\n\n            if (splitMessage.length > 1) {\n                return (\n                    <TranslatedString\n                        data={{ email: splitMessage[1].trim() }}\n                        id=\"customer.email_in_use_text\"\n                    />\n                );\n            }\n\n            return <TranslatedString id=\"customer.unknown_email_in_use_text\" />;\n        }\n\n        return createAccountError.message;\n    }, [createAccountError]);\n\n    const fields = transformFormFieldsData(formFields, defaultShouldSubscribe);\n\n    return (\n        <Form\n            className=\"checkout-form\"\n            id=\"checkout-customer-returning\"\n            testId=\"checkout-customer-returning\"\n        >\n            <Fieldset>\n                {createAccountErrorMessage && (\n                    <Alert type={AlertType.Error}>{createAccountErrorMessage}</Alert>\n                )}\n                <div className=\"create-account-form\">\n                    {fields.map((field) => (\n                        <DynamicFormField\n                            autocomplete={field.name}\n                            extraClass={`dynamic-form-field--${field.name}`}\n                            field={field}\n                            isFloatingLabelEnabled={isFloatingLabelEnabled}\n                            key={field.id}\n                            parentFieldName={field.custom ? 'customFields' : undefined}\n                        />\n                    ))}\n                </div>\n            </Fieldset>\n\n            <div className=\"form-actions\">\n                <Button\n                    className=\"body-bold\"\n                    disabled={isCreatingAccount || isExecutingPaymentMethodCheckout}\n                    id=\"checkout-customer-create\"\n                    isLoading={isCreatingAccount || isExecutingPaymentMethodCheckout}\n                    testId=\"customer-continue-create\"\n                    type=\"submit\"\n                    variant={ButtonVariant.Primary}\n                >\n                    <TranslatedString id=\"customer.create_account_action\" />\n                </Button>\n\n                <a\n                    className=\"button optimizedCheckout-buttonSecondary body-bold\"\n                    data-test=\"customer-cancel-button\"\n                    href=\"#\"\n                    id=\"checkout-customer-cancel\"\n                    onClick={preventDefault(onCancel)}\n                >\n                    <TranslatedString id=\"common.cancel_action\" />\n                </a>\n            </div>\n        </Form>\n    );\n};\n\nexport default withLanguage(\n    withFormik<CreateAccountFormProps & WithLanguageProps, CreateAccountFormValues>({\n        handleSubmit: (values, { props: { onSubmit = noop } }) => {\n            onSubmit(values);\n        },\n        mapPropsToValues: ({ defaultShouldSubscribe, requiresMarketingConsent }) => ({\n            firstName: '',\n            lastName: '',\n            email: '',\n            password: '',\n            customFields: {},\n            acceptsMarketingEmails: getAcceptsMarketingEmailsDefault(defaultShouldSubscribe, requiresMarketingConsent),\n        }),\n        validationSchema: ({\n            language,\n            formFields,\n        }: CreateAccountFormProps & WithLanguageProps) => {\n            const passwordRequirements = formFields.find(\n                ({ requirements }) => requirements,\n            )?.requirements;\n\n            if (!passwordRequirements) {\n                throw new Error('Password requirements missing');\n            }\n\n            const schema = getCreateCustomerValidationSchema({\n                language,\n                formFields,\n                passwordRequirements: getPasswordRequirements(passwordRequirements),\n            });\n\n            return schema;\n        },\n    })(CreateAccountForm),\n);\n","import React, { type FunctionComponent, type MouseEventHandler } from 'react';\n\nimport { useLocale } from '@bigcommerce/checkout/contexts';\nimport { parseAnchor, preventDefault } from '@bigcommerce/checkout/dom-utils';\n\nimport { type TranslatedStringProps } from './TranslatedString';\n\nexport type TranslatedLinkProps = TranslatedStringProps & {\n    testId?: string;\n    onClick: MouseEventHandler;\n};\n\nconst TranslatedLink: FunctionComponent<TranslatedLinkProps> = ({ data, id, onClick, testId }) => {\n    const { language } = useLocale();\n    const translatedString = language.translate(id, data);\n    const parsedString = parseAnchor(translatedString);\n\n    return parsedString.length ? (\n        <>\n            {parsedString[0]}\n            <a data-test={testId} href=\"#\" onClick={preventDefault(onClick)}>\n                {parsedString[1]}\n            </a>\n            {parsedString[2]}\n        </>\n    ) : (\n        <>{translatedString}</>\n    );\n};\n\nexport default TranslatedLink;\n","import { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback, useMemo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { FormField, TextInput } from '../ui/form';\n\nexport interface EmailFieldProps {\n    isFloatingLabelEnabled?: boolean;\n    onChange?(value: string): void;\n}\n\nconst EmailField: FunctionComponent<EmailFieldProps> = ({ onChange, isFloatingLabelEnabled }) => {\n    const renderInput = useCallback(\n        (props: FieldProps) => (\n            <TextInput\n                {...props.field}\n                autoComplete={props.field.name}\n                id={props.field.name}\n                isFloatingLabelEnabled={isFloatingLabelEnabled}\n                type=\"email\"\n            />\n        ),\n        [isFloatingLabelEnabled],\n    );\n\n    const labelContent = useMemo(() => <TranslatedString id=\"customer.email_label\" />, []);\n\n    return (\n        <FormField\n            input={renderInput}\n            isFloatingLabelEnabled={isFloatingLabelEnabled}\n            labelContent={labelContent}\n            name=\"email\"\n            onChange={onChange}\n        />\n    );\n};\n\nexport default memo(EmailField);\n","import { type SignInEmail } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport { type FormikProps, withFormik } from 'formik';\nimport { noop } from 'lodash';\nimport React, { type FunctionComponent, memo, useMemo } from 'react';\n\nimport { useThemeContext } from '@bigcommerce/checkout/contexts';\nimport {\n    TranslatedHtml,\n    TranslatedLink,\n    TranslatedString,\n    withLanguage,\n    type WithLanguageProps,\n} from '@bigcommerce/checkout/locale';\nimport { LoadingSpinner } from '@bigcommerce/checkout/ui';\n\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { Form } from '../ui/form';\nimport { Modal, ModalHeader } from '../ui/modal';\n\nimport EmailField from './EmailField';\nimport getEmailValidationSchema from './getEmailValidationSchema';\n\nexport interface EmailLoginFormProps {\n    email?: string;\n    isOpen: boolean;\n    isSendingEmail?: boolean;\n    emailHasBeenRequested?: boolean;\n    sentEmail?: SignInEmail;\n    sentEmailError?: any;\n    isFloatingLabelEnabled?: boolean;\n    onRequestClose?(): void;\n    onSendLoginEmail?(values: EmailLoginFormValues): void;\n}\n\nexport interface EmailLoginFormValues {\n    email: string;\n}\n\nconst EmailLoginForm: FunctionComponent<\n    EmailLoginFormProps & WithLanguageProps & FormikProps<EmailLoginFormValues>\n> = ({\n    email,\n    isOpen,\n    isSendingEmail = false,\n    emailHasBeenRequested,\n    onRequestClose = noop,\n    sentEmailError,\n    sentEmail,\n    submitForm,\n    isFloatingLabelEnabled,\n    values: { email: formEmail },\n}) => {\n    const { themeV2 } = useThemeContext();\n\n    const modalHeaderStringId = useMemo(() => {\n        if (emailHasBeenRequested) {\n            if (sentEmailError) {\n                return 'common.error_heading';\n            }\n\n            return 'login_email.sent_header';\n        }\n\n        if (email) {\n            return 'login_email.header_with_email';\n        }\n\n        return 'login_email.header';\n    }, [emailHasBeenRequested, sentEmailError, email]);\n\n    const okButton = useMemo(\n        () => (\n            <div className=\"modal-footer\">\n                <Button onClick={onRequestClose}>\n                    <TranslatedString id=\"common.ok_action\" />\n                </Button>\n            </div>\n        ),\n        [onRequestClose],\n    );\n\n    const footer = useMemo(() => {\n        if (sentEmailError && sentEmailError.status === 429) {\n            return okButton;\n        }\n\n        if (emailHasBeenRequested && !sentEmailError) {\n            if (isSendingEmail) {\n                return <LoadingSpinner isLoading />;\n            }\n\n            if (sentEmail && sentEmail.sent_email === 'reset_password') {\n                return okButton;\n            }\n\n            return (\n                <p>\n                    <TranslatedLink id=\"login_email.resend_link\" onClick={submitForm} />\n                    <TranslatedLink id=\"login_email.use_password_link\" onClick={onRequestClose} />\n                </p>\n            );\n        }\n\n        return (\n            <div className=\"modal-footer\">\n                <Button\n                    className=\"optimizedCheckout-buttonSecondary\"\n                    onClick={onRequestClose}\n                    type=\"button\"\n                >\n                    <TranslatedString id=\"common.cancel_action\" />\n                </Button>\n                <Button isLoading={isSendingEmail} type=\"submit\" variant={ButtonVariant.Primary}>\n                    <TranslatedString id=\"login_email.send\" />\n                </Button>\n            </div>\n        );\n    }, [\n        sentEmailError,\n        emailHasBeenRequested,\n        okButton,\n        submitForm,\n        isSendingEmail,\n        onRequestClose,\n        sentEmail,\n    ]);\n\n    const error = useMemo(() => {\n        if (!sentEmailError) {\n            return null;\n        }\n\n        const { status } = sentEmailError;\n\n        return (\n            <Alert type={AlertType.Error}>\n                {status === 429 ? (\n                    <TranslatedString id=\"login_email.error_temporary_disabled\" />\n                ) : (\n                    <TranslatedString\n                        id={\n                            status === 404\n                                ? 'login_email.error_not_found'\n                                : 'login_email.error_server'\n                        }\n                    />\n                )}\n            </Alert>\n        );\n    }, [sentEmailError]);\n\n    const form = useMemo(() => {\n        if (sentEmailError && sentEmailError.status === 429) {\n            return null;\n        }\n\n        if (emailHasBeenRequested && sentEmail && !sentEmailError) {\n            const { expiry, sent_email } = sentEmail;\n\n            return (\n                <p>\n                    <TranslatedHtml\n                        data={{\n                            minutes: Math.round(expiry / 60),\n                        }}\n                        id={\n                            sent_email === 'sign_in'\n                                ? 'login_email.sent_text'\n                                : 'customer.reset_password_before_login_error'\n                        }\n                    />\n                </p>\n            );\n        }\n\n        if (emailHasBeenRequested && !sentEmail) {\n            return <EmailField isFloatingLabelEnabled={isFloatingLabelEnabled} />;\n        }\n\n        return (\n            <>\n                <p>\n                    <TranslatedString id=\"login_email.text\" />\n                </p>\n                <EmailField isFloatingLabelEnabled={isFloatingLabelEnabled} />\n            </>\n        );\n    }, [sentEmailError, emailHasBeenRequested, sentEmail, formEmail]);\n\n    return (\n        <Modal\n            additionalBodyClassName=\"modal--withText\"\n            additionalModalClassName={classNames(\"modal--medium\", { \"themeV2\": themeV2 })}\n            header={\n                <ModalHeader>\n                    <TranslatedString id={modalHeaderStringId} />\n                </ModalHeader>\n            }\n            isOpen={isOpen}\n            onRequestClose={onRequestClose}\n            shouldShowCloseButton={true}\n        >\n            <Form>\n                <LoadingSpinner isLoading={isSendingEmail && !email} />\n                {error}\n                {form}\n                {footer}\n            </Form>\n        </Modal>\n    );\n};\n\nexport default withLanguage(\n    withFormik<EmailLoginFormProps & WithLanguageProps, EmailLoginFormValues>({\n        mapPropsToValues: ({ email = '' }) => ({\n            email,\n        }),\n        handleSubmit: (values, { props: { onSendLoginEmail = noop } }) => {\n            onSendLoginEmail(values);\n        },\n        validationSchema: ({ language }: WithLanguageProps) =>\n            getEmailValidationSchema({ language }),\n    })(memo(EmailLoginForm)),\n);\n","import {\n    type CheckoutSelectors,\n    type CheckoutService,\n    type CustomerInitializeOptions,\n    type CustomerRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { noop } from 'lodash';\nimport React, { type FunctionComponent, lazy, memo } from 'react';\n\nimport { type CheckoutContextProps, useLocale } from '@bigcommerce/checkout/contexts';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { LazyContainer } from '@bigcommerce/checkout/ui';\n\nimport { withCheckout } from '../checkout';\n\nimport { getSupportedMethodIds } from './getSupportedMethods';\nimport resolveCheckoutButton from './resolveCheckoutButton';\n\nconst CheckoutButtonV1Resolver = lazy(() => import(/* webpackChunkName: \"wallet-button-v1-resolver\" */'./WalletButtonV1Resolver'));\n\nexport interface CheckoutButtonListProps {\n    hideText?: boolean;\n    isInitializing?: boolean;\n    methodIds?: string[];\n    checkEmbeddedSupport?(methodIds: string[]): void;\n    deinitialize(options: CustomerRequestOptions): void;\n    initialize(options: CustomerInitializeOptions): void;\n    onClick?(methodId: string): void;\n    onError?(error: Error): void;\n}\n\ninterface WithCheckoutCheckoutButtonListProps {\n    checkoutState: CheckoutSelectors;\n    checkoutService: CheckoutService;\n}\n\nconst CheckoutButtonList: FunctionComponent<WithCheckoutCheckoutButtonListProps & CheckoutButtonListProps> = ({\n    checkoutService,\n    checkoutState,\n    hideText = false,\n    isInitializing = false,\n    methodIds = [],\n    checkEmbeddedSupport,\n    deinitialize,\n    initialize,\n    onClick = noop,\n    onError,\n}) => {\n    const { language } = useLocale();\n    const supportedMethodIds = getSupportedMethodIds(methodIds);\n\n    if (supportedMethodIds.length === 0) {\n        return null;\n    }\n\n    if (checkEmbeddedSupport) {\n        try {\n            checkEmbeddedSupport(supportedMethodIds);\n        } catch (error) {\n            if (error instanceof Error && onError) {\n                onError(error);\n            } else {\n                throw error;\n            }\n\n            return null;\n        }\n    }\n\n    const renderButtons = () => {\n        return supportedMethodIds.map((methodId) => {\n            const ResolvedCheckoutButton = resolveCheckoutButton(\n                { id: methodId },\n            );\n\n            if (!ResolvedCheckoutButton) {\n                return <LazyContainer key={methodId}>\n                    <CheckoutButtonV1Resolver\n                        deinitialize={deinitialize}\n                        initialize={initialize}\n                        isShowingWalletButtonsOnTop={false}\n                        key={methodId}\n                        methodId={methodId}\n                        onClick={onClick}\n                        onError={onClick}\n                    />\n                </LazyContainer>\n            }\n\n            return <LazyContainer key={methodId}>\n                <ResolvedCheckoutButton\n                    checkoutService={checkoutService}\n                    checkoutState={checkoutState}\n                    containerId={`${methodId}CheckoutButton`}\n                    language={language}\n                    methodId={methodId}\n                    onUnhandledError={onClick}\n                    onWalletButtonClick={onClick}\n                />\n            </LazyContainer>;\n        });\n    };\n\n    return (\n        <>\n            {!isInitializing && !hideText && (\n                <p>\n                    <TranslatedString id=\"remote.continue_with_text\" />\n                </p>\n            )}\n\n            <div className=\"checkoutRemote\">\n                {renderButtons()}\n            </div>\n        </>\n    );\n};\n\nfunction mapToCheckoutButtonListProps({\n  checkoutState,\n  checkoutService,\n}: CheckoutContextProps): WithCheckoutCheckoutButtonListProps | null {\n    return {\n        checkoutService,\n        checkoutState,\n    };\n}\n\nexport default memo(withCheckout(mapToCheckoutButtonListProps)(CheckoutButtonList));\n","import { type FastlaneHostWindow } from './types';\n\nexport default function isFastlaneHostWindow(window: Window): window is FastlaneHostWindow {\n    /* eslint-disable no-prototype-builtins */\n    return window.hasOwnProperty('paypalFastlane') || window.hasOwnProperty('braintreeFastlane');\n}\n","import React, { type FunctionComponent, useEffect } from 'react';\n\nimport { useCheckout } from '@bigcommerce/checkout/contexts';\n\nimport isBraintreeFastlaneMethod from './is-braintree-fastlane-method';\nimport isFastlaneHostWindow from './is-fastlane-window';\nimport isPayPalFastlaneMethod from './is-paypal-fastlane-method';\nimport { type FastlanePrivacySettings } from './types';\n\nimport './PayPalFastlaneWatermark.scss';\n\nconst PayPalFastlaneWatermark: FunctionComponent = () => {\n    const { checkoutState } = useCheckout();\n    const { getPaymentMethod, getConfig } = checkoutState.data;\n    const providerWithCustomCheckout =\n        getConfig()?.checkoutSettings.providerWithCustomCheckout || '';\n\n    const paymentMethod =\n        !!providerWithCustomCheckout &&\n        isPayPalFastlaneMethod(providerWithCustomCheckout) &&\n        getPaymentMethod(providerWithCustomCheckout);\n\n    const shouldRenderFastlaneWatermark =\n        isFastlaneHostWindow(window) &&\n        !!paymentMethod &&\n        !!paymentMethod.initializationData?.isFastlanePrivacySettingEnabled;\n\n    useEffect(() => {\n        if (shouldRenderFastlaneWatermark && isFastlaneHostWindow(window)) {\n            const fastlane = isBraintreeFastlaneMethod(providerWithCustomCheckout)\n                ? window.braintreeFastlane\n                : window.paypalFastlane;\n\n            void fastlane\n                .FastlaneWatermarkComponent({\n                    includeAdditionalInfo: true,\n                })\n                .then((result: FastlanePrivacySettings) => {\n                    result.render('#paypalFastlaneWatermark');\n                });\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    if (shouldRenderFastlaneWatermark) {\n        return (\n            <div className=\"paypalFastlaneWatermark-container\">\n                <div data-test=\"paypalFastlaneWatermark\" id=\"paypalFastlaneWatermark\" />\n            </div>\n        );\n    }\n\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return <></>;\n};\n\nexport default PayPalFastlaneWatermark;\n","import React, { type FunctionComponent, memo } from 'react';\n\nimport { TranslatedHtml } from '@bigcommerce/checkout/locale';\n\nimport { CheckboxFormField, Fieldset } from '../ui/form';\n\nconst PrivacyPolicyCheckboxFieldLink: FunctionComponent<{ url: string }> = ({ url }) => (\n    <CheckboxFormField\n        labelContent={<TranslatedHtml data={{ url }} id=\"privacy_policy.label\" />}\n        name=\"privacyPolicy\"\n        testId=\"privacy-policy-checkbox\"\n    />\n);\n\nconst PrivacyPolicyFieldset: FunctionComponent<{ url: string }> = ({ url }) => (\n    <Fieldset additionalClassName=\"checkout-privacy-policy\">\n        <PrivacyPolicyCheckboxFieldLink url={url} />\n    </Fieldset>\n);\n\nconst PrivacyPolicyAutoConsent: FunctionComponent<{ url: string }> = ({ url }) => (\n    <p className='body-regular'>\n        <TranslatedHtml data={{ url }} id=\"privacy_policy_auto_consent.label\" />\n    </p>\n);\n\nconst PrivacyPolicyField: FunctionComponent<{ url: string; isExpressPrivacyPolicy: boolean }> = ({\n    url,\n    isExpressPrivacyPolicy,\n}) => {\n\n    if (isExpressPrivacyPolicy) {\n        return <PrivacyPolicyAutoConsent url={url} />;\n    }\n\n    return <PrivacyPolicyFieldset url={url} />;\n};\n\nexport default memo(PrivacyPolicyField);\n","import { type LanguageService } from '@bigcommerce/checkout-sdk';\nimport { boolean, type BooleanSchema, object, type ObjectSchema } from 'yup';\n\nexport interface PrivacyPolicyValidatonSchemaProps {\n    isRequired: boolean;\n    language: LanguageService;\n}\n\nexport default function getPrivacyPolicyValidationSchema({\n    isRequired,\n    language,\n}: PrivacyPolicyValidatonSchemaProps): ObjectSchema<{ privacyPolicy?: boolean }> {\n    const schemaFields: {\n        privacyPolicy?: BooleanSchema;\n    } = {};\n\n    if (isRequired) {\n        schemaFields.privacyPolicy = boolean().oneOf(\n            [true],\n            language.translate('privacy_policy.required_error'),\n        );\n    }\n\n    return object(schemaFields);\n}\n","import { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo } from 'react';\n\nimport { TranslatedHtml } from '@bigcommerce/checkout/locale';\n\nimport { Input, Label } from '../ui/form';\n\nexport type SubscribeFieldProps = FieldProps<boolean> & {\n    requiresMarketingConsent: boolean;\n};\n\nconst SubscribeField: FunctionComponent<SubscribeFieldProps> = ({\n    field,\n    requiresMarketingConsent,\n}) => {\n    return (\n        <>\n            <Input\n                {...field}\n                checked={field.value}\n                className=\"form-checkbox\"\n                id={field.name}\n                testId=\"should-subscribe-checkbox\"\n                type=\"checkbox\"\n                value={String(field.value)}\n            />\n\n            <Label\n                additionalClassName='body-regular'\n                htmlFor={field.name}\n            >\n                <TranslatedHtml\n                    id={\n                        requiresMarketingConsent\n                            ? 'customer.guest_marketing_consent'\n                            : 'customer.guest_subscribe_to_newsletter_text'\n                    }\n                />\n            </Label>\n        </>\n    );\n}\n\nexport default memo(SubscribeField);\n","import classNames from 'classnames';\nimport { type FieldProps, type FormikProps, withFormik } from 'formik';\nimport React, { type FunctionComponent, memo, type ReactNode, useCallback, useEffect } from 'react';\nimport { object, string } from 'yup';\n\nimport { useCheckout, useThemeContext } from '@bigcommerce/checkout/contexts';\nimport { TranslatedString, withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { PayPalFastlaneWatermark } from '@bigcommerce/checkout/paypal-fastlane-integration';\n\nimport { getPrivacyPolicyValidationSchema, PrivacyPolicyField } from '../privacyPolicy';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { BasicFormField, Fieldset, Form, Legend } from '../ui/form';\n\nimport EmailField from './EmailField';\nimport SubscribeField from './SubscribeField';\nimport { SubscribeSessionStorage } from './SubscribeSessionStorage';\n\nfunction getShouldSubscribeValue(requiresMarketingConsent: boolean, defaultShouldSubscribe: boolean) {\n    if (SubscribeSessionStorage.getSubscribeStatus()) {\n        return true;\n    }\n\n    return requiresMarketingConsent ? false : defaultShouldSubscribe\n}\n\nexport interface GuestFormProps {\n    canSubscribe: boolean;\n    checkoutButtons?: ReactNode;\n    continueAsGuestButtonLabelId: string;\n    requiresMarketingConsent: boolean;\n    defaultShouldSubscribe: boolean;\n    email?: string;\n    isLoading: boolean;\n    privacyPolicyUrl?: string;\n    isExpressPrivacyPolicy: boolean;\n    isFloatingLabelEnabled?: boolean;\n    shouldShowEmailWatermark: boolean;\n    onChangeEmail(email: string): void;\n    onContinueAsGuest(data: GuestFormValues): void;\n    onShowLogin(): void;\n}\n\nexport interface GuestFormValues {\n    email: string;\n    shouldSubscribe: boolean;\n}\n\nconst GuestForm: FunctionComponent<\n    GuestFormProps & WithLanguageProps & FormikProps<GuestFormValues>\n> = ({\n    canSubscribe,\n    checkoutButtons,\n    continueAsGuestButtonLabelId,\n    defaultShouldSubscribe,\n    isLoading,\n    onChangeEmail,\n    onShowLogin,\n    privacyPolicyUrl,\n    requiresMarketingConsent,\n    isExpressPrivacyPolicy,\n    isFloatingLabelEnabled,\n    shouldShowEmailWatermark,\n    setFieldValue,\n}) => {\n    const {\n        checkoutState: {\n            data: { getConfig }\n        }\n    } = useCheckout();\n    const { themeV2 } = useThemeContext();\n\n    const config = getConfig();\n\n    const renderField = useCallback(\n        (fieldProps: FieldProps<boolean>) => (\n            <SubscribeField {...fieldProps} requiresMarketingConsent={requiresMarketingConsent} />\n        ),\n        [requiresMarketingConsent],\n    );\n\n    useEffect(() => {\n        void setFieldValue(\n            'shouldSubscribe',\n            getShouldSubscribeValue(requiresMarketingConsent, defaultShouldSubscribe),\n            );\n    }, [requiresMarketingConsent, defaultShouldSubscribe]);\n\n    if (!config) {\n        return null;\n    }\n\n    const {\n        checkoutSettings: {\n            shouldRedirectToStorefrontForAuth,\n        },\n        links: {\n            checkoutLink,\n            loginLink,\n        }\n    } = config;\n\n    const handleLogin: () => void = () => {\n        if (shouldRedirectToStorefrontForAuth) {\n            window.location.assign(`${loginLink}?redirectTo=${checkoutLink}`);\n\n            return;\n        }\n\n        return onShowLogin();\n    }\n\n    return (\n        <Form\n            className=\"checkout-form\"\n            id=\"checkout-customer-guest\"\n            testId=\"checkout-customer-guest\"\n        >\n            <Fieldset\n                legend={\n                    <Legend hidden>\n                        <TranslatedString id=\"customer.guest_customer_text\" />\n                    </Legend>\n                }\n            >\n                {(themeV2 && !isLoading) && (\n                    <p className=\"customer-login-link body-regular\">\n                        <TranslatedString id=\"customer.login_text\" />{' '}\n                        <a\n                            data-test=\"customer-continue-button\"\n                            id=\"checkout-customer-login\"\n                            onClick={handleLogin}\n                            role=\"button\"\n                            tabIndex={0}\n                        >\n                            <TranslatedString id=\"customer.login_action\" />\n                        </a>\n                    </p>\n                )}\n\n                <div className=\"customerEmail-container\">\n                    <div className=\"customerEmail-body\">\n                        <EmailField isFloatingLabelEnabled={isFloatingLabelEnabled} onChange={onChangeEmail}/>\n\n                        {shouldShowEmailWatermark && <PayPalFastlaneWatermark />}\n\n                        {(canSubscribe || requiresMarketingConsent) && (\n                            <BasicFormField name=\"shouldSubscribe\" render={renderField} />\n                        )}\n                    </div>\n\n                    <div\n                        className={classNames('form-actions customerEmail-action', {\n                            'customerEmail-floating--enabled': isFloatingLabelEnabled,\n                        })}\n                    >\n                        <Button\n                            className='customerEmail-button body-bold'\n                            id=\"checkout-customer-continue\"\n                            isLoading={isLoading}\n                            testId=\"customer-continue-as-guest-button\"\n                            type=\"submit\"\n                            variant={ButtonVariant.Primary}\n                        >\n                            <TranslatedString id={continueAsGuestButtonLabelId} />\n                        </Button>\n                    </div>\n                </div>\n\n                {privacyPolicyUrl && (\n                    <PrivacyPolicyField isExpressPrivacyPolicy={isExpressPrivacyPolicy} url={privacyPolicyUrl} />\n                )}\n\n                {(!themeV2 && !isLoading) && (\n                    <p className='customer-login-link'>\n                        <TranslatedString id=\"customer.login_text\" />{' '}\n                        <a\n                            data-test=\"customer-continue-button\"\n                            id=\"checkout-customer-login\"\n                            onClick={handleLogin}\n                            role=\"button\"\n                            tabIndex={0}\n                        >\n                            <TranslatedString id=\"customer.login_action\" />\n                        </a>\n                    </p>\n                )}\n\n                {checkoutButtons}\n            </Fieldset>\n        </Form>\n    );\n};\n\nexport default withLanguage(\n    withFormik<GuestFormProps & WithLanguageProps, GuestFormValues>({\n        mapPropsToValues: ({\n            email = '',\n            defaultShouldSubscribe = false,\n            requiresMarketingConsent,\n        }) => ({\n            email,\n            shouldSubscribe: getShouldSubscribeValue(requiresMarketingConsent, defaultShouldSubscribe),\n            privacyPolicy: false,\n        }),\n        handleSubmit: (values, { props: { onContinueAsGuest } }) => {\n            onContinueAsGuest(values);\n        },\n        validationSchema: ({ language, privacyPolicyUrl, isExpressPrivacyPolicy }: GuestFormProps & WithLanguageProps) => {\n            const email = string()\n                .email(language.translate('customer.email_invalid_error'))\n                .max(256)\n                .required(language.translate('customer.email_required_error'));\n\n            const baseSchema = object({ email });\n\n            if (privacyPolicyUrl && !isExpressPrivacyPolicy) {\n                return baseSchema.concat(\n                    getPrivacyPolicyValidationSchema({\n                        isRequired: !!privacyPolicyUrl,\n                        language,\n                    }),\n                );\n            }\n\n            return baseSchema;\n        },\n    })(memo(GuestForm)),\n);\n","import { type CustomerInitializeOptions, type CustomerRequestOptions } from '@bigcommerce/checkout-sdk';\nimport { createStripeUPECustomerStrategy } from '@bigcommerce/checkout-sdk/integrations/stripe';\nimport { type FieldProps, type FormikProps, withFormik } from 'formik';\nimport React, { type FunctionComponent, memo, type ReactNode, useCallback, useEffect, useState } from 'react';\nimport { object } from 'yup';\n\nimport { getAppliedStyles } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString, withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\n\nimport type CheckoutStepStatus from '../checkout/CheckoutStepStatus';\nimport { getPrivacyPolicyValidationSchema, PrivacyPolicyField } from '../privacyPolicy';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { BasicFormField, Fieldset, Form, Legend } from '../ui/form';\n\nimport { type GuestFormValues } from './GuestForm';\nimport SubscribeField from './SubscribeField';\n\nexport interface StripeGuestFormProps {\n    canSubscribe: boolean;\n    checkoutButtons?: ReactNode;\n    step: CheckoutStepStatus;\n    continueAsGuestButtonLabelId: string;\n    email?: string;\n    isLoading: boolean;\n    isExpressPrivacyPolicy: boolean;\n    requiresMarketingConsent: boolean;\n    defaultShouldSubscribe: boolean;\n    privacyPolicyUrl?: string;\n    onChangeEmail(email: string): void;\n    onContinueAsGuest(data: GuestFormValues): void;\n    deinitialize(options: CustomerRequestOptions): void;\n    initialize(options: CustomerInitializeOptions): void;\n    onShowLogin(): void;\n}\n\nconst StripeGuestForm: FunctionComponent<StripeGuestFormProps & FormikProps<GuestFormValues>> = ({\n    continueAsGuestButtonLabelId,\n    isLoading,\n    initialize,\n    isExpressPrivacyPolicy,\n    deinitialize,\n    onChangeEmail,\n    onShowLogin,\n    onContinueAsGuest,\n    canSubscribe,\n    checkoutButtons,\n    defaultShouldSubscribe,\n    requiresMarketingConsent,\n    privacyPolicyUrl,\n    step,\n    status,\n    setFieldValue,\n}) => {\n\n    const [continueAsAGuestButton, setContinueAsAGuestButton] = useState(true);\n    const [emailValue, setEmailValue] = useState('');\n    const [authentication, setAuthentication] = useState(false);\n    const [isStripeLoading, setIsStripeLoading] = useState(true);\n    const [isNewAuth, setIsNewAuth] = useState(false);\n    const handleOnClickSubmitButton = () => {\n        onContinueAsGuest({\n            email: emailValue,\n            shouldSubscribe: !!status?.shouldSubscribe,\n        });\n    };\n    const setEmailCallback = useCallback((authenticated: boolean, email: string) => {\n        setFieldValue('email', email);\n        onChangeEmail(email);\n        setEmailValue(email);\n        setContinueAsAGuestButton(!email);\n        setAuthentication(authenticated);\n\n        if(!authenticated){\n            setIsNewAuth(true);\n        }\n    }, [setContinueAsAGuestButton, onChangeEmail]);\n\n    useEffect(() => {\n        if ((!step.isComplete || isNewAuth) && emailValue && authentication) {\n            handleOnClickSubmitButton();\n        }\n    }, [emailValue, authentication, isNewAuth]);\n\n    useEffect(() => {\n        if (status?.valSuccess) {\n            handleOnClickSubmitButton();\n        }\n    }, [status?.valSuccess]);\n\n    const handleLoading = useCallback((mounted: boolean) => {\n        setIsStripeLoading(mounted);\n    }, []);\n\n    const stripeDeinitialize = () => {\n        deinitialize({\n            methodId: 'stripeupe',\n        });\n    };\n\n    const stripeInitialize = () => {\n        initialize( {\n            methodId: 'stripeupe',\n            integrations: [createStripeUPECustomerStrategy],\n            stripeupe: {\n                container: 'stripeupeLink',\n                onEmailChange: setEmailCallback,\n                isLoading: handleLoading,\n                getStyles: getStripeStyles,\n                gatewayId: 'stripeupe',\n                methodId: 'card',\n            },\n        })};\n\n    useEffect(() => {\n        stripeInitialize();\n\n        return () => stripeDeinitialize();\n    }, []);\n\n    useEffect(() => {\n        void setFieldValue(\n            'shouldSubscribe',\n            requiresMarketingConsent ? false : defaultShouldSubscribe,\n        );\n    }, [requiresMarketingConsent, defaultShouldSubscribe]);\n\n    const getStylesFromElement = (\n        id: string,\n        properties: string[]) => {\n        const parentContainer = document.getElementById(id);\n\n        if (parentContainer) {\n            return getAppliedStyles(parentContainer, properties);\n        }\n\n            return undefined;\n\n    };\n\n    const containerId = 'stripe-card-component-field';\n\n    const getStripeStyles: () => (Record<string, string> | undefined) = useCallback( () => {\n        const formInput = getStylesFromElement(`${containerId}--input`, ['color', 'background-color', 'border-color', 'box-shadow']);\n        const formLabel = getStylesFromElement(`${containerId}--label`, ['color']);\n        const formError = getStylesFromElement(`${containerId}--error`, ['color']);\n\n        return formLabel && formInput && formError ? {\n            labelText: formLabel.color,\n            fieldText: formInput.color,\n            fieldPlaceholderText: formInput.color,\n            fieldErrorText: formError.color,\n            fieldBackground: formInput['background-color'],\n            fieldInnerShadow: formInput['box-shadow'],\n            fieldBorder: formInput['border-color'],\n        } : undefined;\n    }, [])\n\n    const renderCheckoutThemeStylesForStripeUPE = () => {\n        return (\n            <div\n                className=\"optimizedCheckout-form-input\"\n                id={ `${containerId}--input` }\n            >\n                <div\n                    className=\"form-field--error\"\n                >\n                    <div\n                        className=\"optimizedCheckout-form-label\"\n                        id={ `${containerId}--error` }\n                    />\n                </div>\n                <div\n                    className=\"optimizedCheckout-form-label\"\n                    id={ `${containerId}--label` }\n                />\n            </div>\n        );\n    };\n\n    const renderField = useCallback((fieldProps: FieldProps<boolean>) => (\n        <SubscribeField\n            { ...fieldProps }\n            requiresMarketingConsent={ requiresMarketingConsent }\n        />\n    ), [\n        requiresMarketingConsent,\n    ]);\n\n    const buttonText = authentication && !isNewAuth? 'customer.continue_as_stripe_customer_action' : continueAsGuestButtonLabelId;\n\n    return (\n        <>\n            <Form\n                className=\"checkout-form\"\n                id=\"checkout-customer-guest\"\n                testId=\"checkout-customer-guest\"\n            >\n                <div className=\"checkout-form\" style={ { display: isStripeLoading ? 'none' : undefined } }>\n                    <Fieldset\n                        legend={ !authentication &&\n                            <Legend hidden>\n                                <TranslatedString id=\"customer.guest_customer_text\"/>\n                            </Legend>\n                        }\n                    >\n                        <div className=\"customerEmail-container\">\n                            <div className=\"customerEmail-body\">\n                                <div id=\"stripeupeLink\"/>\n                                <br/>\n                                { (canSubscribe || requiresMarketingConsent) && <BasicFormField\n                                    name=\"shouldSubscribe\"\n                                    render={ renderField }\n                                /> }\n                            </div>\n\n                            <div className=\"form-actions customerEmail-action\">\n                                { (!authentication || (authentication && !isNewAuth )) && <Button\n                                    className=\"stripeCustomerEmail-button\"\n                                    disabled={ continueAsAGuestButton }\n                                    id=\"stripe-checkout-customer-continue\"\n                                    isLoading={ isLoading }\n                                    testId=\"stripe-customer-continue-as-guest-button\"\n                                    type=\"submit\"\n                                    variant={ ButtonVariant.Primary }\n                                >\n                                    <TranslatedString id={ buttonText }/>\n                                </Button> }\n                            </div>\n                        </div>\n\n                        {privacyPolicyUrl && (\n                            <PrivacyPolicyField isExpressPrivacyPolicy={isExpressPrivacyPolicy} url={privacyPolicyUrl} />\n                        )}\n\n                        {\n                            !isLoading && <p>\n                                <TranslatedString id=\"customer.login_text\"/>\n                                { ' ' }\n                                <a\n                                    data-test=\"customer-continue-button\"\n                                    id=\"checkout-customer-login\"\n                                    onClick={ onShowLogin }\n                                    role=\"button\"\n                                    tabIndex={0}\n                                >\n                                    <TranslatedString id=\"customer.login_action\"/>\n                                </a>\n                            </p>\n                        }\n                        { !authentication && checkoutButtons }\n                    </Fieldset>\n                </div>\n                { renderCheckoutThemeStylesForStripeUPE() }\n            </Form>\n        </>\n    );\n};\n\nexport default withLanguage(\n    withFormik<StripeGuestFormProps, GuestFormValues>({\n            mapPropsToValues: ({\n                email = '',\n                defaultShouldSubscribe = false,\n                requiresMarketingConsent,\n            }) => ({\n                email,\n                shouldSubscribe: requiresMarketingConsent ? false : defaultShouldSubscribe,\n                privacyPolicy: false,\n            }),\n            handleSubmit: ( values, { setStatus }) => {\n                setStatus({\n                    valSuccess: true,\n                    shouldSubscribe: values.shouldSubscribe,\n                  });\n            },\n            validationSchema: ({ language, privacyPolicyUrl, isExpressPrivacyPolicy }: StripeGuestFormProps & WithLanguageProps) => {\n                if (privacyPolicyUrl && !isExpressPrivacyPolicy) {\n                    return getPrivacyPolicyValidationSchema({\n                            isRequired: !!privacyPolicyUrl,\n                            language,\n                        })\n                }\n\n                return object({});\n            },\n        })(memo(StripeGuestForm))\n)\n\n","import { type Cart } from '@bigcommerce/checkout-sdk';\nimport React from 'react';\n\nimport { useCheckout } from '@bigcommerce/checkout/contexts';\nimport { shouldUseStripeLinkByMinimumAmount } from '@bigcommerce/checkout/instrument-utils';\nimport { PaymentMethodId } from '@bigcommerce/checkout/payment-integration-api';\nimport { isPayPalFastlaneMethod } from '@bigcommerce/checkout/paypal-fastlane-integration';\n\nimport type CheckoutStepStatus from '../checkout/CheckoutStepStatus';\nimport getProviderWithCustomCheckout from '../payment/getProviderWithCustomCheckout';\n\nimport CheckoutButtonList from './CheckoutButtonList';\nimport GuestForm, { type GuestFormValues } from './GuestForm';\nimport StripeGuestForm from './StripeGuestForm';\n\ninterface GuestFormContainerProps {\n    email?: string;\n    isFloatingLabelEnabled?: boolean;\n    isWalletButtonsOnTop: boolean;\n    isSubscribed: boolean;\n    step: CheckoutStepStatus;\n    checkEmbeddedSupport?(methodIds: string[]): void;\n    handleChangeEmail(email: string): void;\n    handleContinueAsGuest(formValues: GuestFormValues): void;\n    handleShowLogin(): void;\n    onWalletButtonClick?(methodName: string): void;\n    onUnhandledError?(error: Error): void;\n}\n\nfunction shouldRenderStripeForm(cart: Cart, providerWithCustomCheckout?: string) {\n    return providerWithCustomCheckout === PaymentMethodId.StripeUPE\n        && shouldUseStripeLinkByMinimumAmount(cart)\n}\n\nexport const GuestFormContainer: React.FC<GuestFormContainerProps> = ({\n    email,\n    isFloatingLabelEnabled,\n    isWalletButtonsOnTop,\n    isSubscribed,\n    step,\n    checkEmbeddedSupport,\n    handleChangeEmail,\n    handleContinueAsGuest,\n    handleShowLogin,\n    onWalletButtonClick,\n    onUnhandledError,\n}) => {\n    const { checkoutState, checkoutService } = useCheckout();\n    const {\n        data: {\n            isPaymentDataRequired,\n            getConfig,\n            getCart,\n        },\n        statuses: {\n            isInitializingCustomer,\n            isContinuingAsGuest,\n            isExecutingPaymentMethodCheckout\n        },\n    } = checkoutState;\n\n    const {\n        deinitializeCustomer,\n        initializeCustomer,\n    }  = checkoutService;\n\n    const config = getConfig();\n    const cart = getCart();\n    const isLoadingGuestForm = isContinuingAsGuest() || isExecutingPaymentMethodCheckout();\n\n    if (!config || !cart) {\n        return null;\n    }\n\n    const {\n        checkoutSettings: {\n            privacyPolicyUrl,\n            requiresMarketingConsent,\n            remoteCheckoutProviders: checkoutButtonIds,\n            providerWithCustomCheckout,\n            isExpressPrivacyPolicy,\n        },\n        shopperConfig: {\n            showNewsletterSignup: canSubscribe,\n        },\n    } = config;\n\n    const customCheckoutProvider = getProviderWithCustomCheckout(providerWithCustomCheckout);\n\n    const checkoutButtons = isWalletButtonsOnTop || !isPaymentDataRequired()\n        ? null\n        : <CheckoutButtonList\n            checkEmbeddedSupport={checkEmbeddedSupport}\n            deinitialize={deinitializeCustomer}\n            initialize={initializeCustomer}\n            isInitializing={isInitializingCustomer()}\n            methodIds={checkoutButtonIds}\n            onClick={onWalletButtonClick}\n            onError={onUnhandledError}\n        />;\n\n    if (shouldRenderStripeForm(cart, customCheckoutProvider)) {\n        return <StripeGuestForm\n            canSubscribe={canSubscribe}\n            checkoutButtons={checkoutButtons}\n            continueAsGuestButtonLabelId=\"customer.continue\"\n            defaultShouldSubscribe={isSubscribed}\n            deinitialize={deinitializeCustomer}\n            email={email}\n            initialize={initializeCustomer}\n            isExpressPrivacyPolicy={isExpressPrivacyPolicy}\n            isLoading={isContinuingAsGuest() || isInitializingCustomer() || isExecutingPaymentMethodCheckout()}\n            onChangeEmail={handleChangeEmail}\n            onContinueAsGuest={handleContinueAsGuest}\n            onShowLogin={handleShowLogin}\n            privacyPolicyUrl={privacyPolicyUrl}\n            requiresMarketingConsent={requiresMarketingConsent}\n            step={step}\n        />;\n    }\n\n    return <GuestForm\n        canSubscribe={canSubscribe}\n        checkoutButtons={checkoutButtons}\n        continueAsGuestButtonLabelId=\"customer.continue\"\n        defaultShouldSubscribe={isSubscribed}\n        email={email}\n        isExpressPrivacyPolicy={isExpressPrivacyPolicy}\n        isFloatingLabelEnabled={isFloatingLabelEnabled}\n        isLoading={isLoadingGuestForm}\n        onChangeEmail={handleChangeEmail}\n        onContinueAsGuest={handleContinueAsGuest}\n        onShowLogin={handleShowLogin}\n        privacyPolicyUrl={privacyPolicyUrl}\n        requiresMarketingConsent={requiresMarketingConsent}\n        shouldShowEmailWatermark={isPayPalFastlaneMethod(customCheckoutProvider)}\n    />\n};\n","import React, { type FunctionComponent, memo } from 'react';\n\nimport IconContainer, { type IconProps } from './IconContainer';\n\nconst IconEyeSvg: FunctionComponent = () => (\n    <svg viewBox=\"0 0 576 512\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z\" />\n    </svg>\n);\n\nconst IconEye: FunctionComponent<IconProps> = (props) => (\n    <IconContainer {...props}>\n        <IconEyeSvg />\n    </IconContainer>\n);\n\nexport default memo(IconEye);\n","import React, { type FunctionComponent, memo } from 'react';\n\nimport IconContainer, { type IconProps } from './IconContainer';\n\nconst IconEyeSlashSvg: FunctionComponent = () => (\n    <svg viewBox=\"0 0 640 512\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471zM296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47zm46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46zM320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1zm0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z\" />\n    </svg>\n);\n\nconst IconEyeSlash: FunctionComponent<IconProps> = (props) => (\n    <IconContainer {...props}>\n        <IconEyeSlashSvg />\n    </IconContainer>\n);\n\nexport default memo(IconEyeSlash);\n","import { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback, useMemo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { FormField, TextInput } from '../ui/form';\nimport Label from '../ui/form/Label';\nimport { IconEye, IconEyeSlash } from '../ui/icon';\nimport { Toggle } from '../ui/toggle';\n\ninterface WithFloatingLabel {\n    isFloatingLabelEnabled?: boolean;\n}\n\nconst PasswordField: FunctionComponent<WithFloatingLabel> = ({ isFloatingLabelEnabled = false }) => {\n    const renderInput = useCallback(\n        (props: FieldProps) => (\n            <Toggle openByDefault={false}>\n                {({ isOpen, toggle }) => (\n                    <div className=\"form-field-password\">\n                        <TextInput\n                            {...props.field}\n                            additionalClassName=\"form-input--withIcon\"\n                            id={props.field.name}\n                            isFloatingLabelEnabled={isFloatingLabelEnabled}\n                            type={isOpen ? 'text' : 'password'}\n                        />\n                        {isFloatingLabelEnabled && (\n                            <Label\n                                additionalClassName=\"floating-form-field-label\"\n                                htmlFor={props.field.name}\n                                id={`${props.field.name}-label`}\n                                isFloatingLabelEnabled={true}\n                            >\n                                <TranslatedString id=\"customer.password_label\" />\n                            </Label>\n                        )}\n                        <a\n                            className=\"form-toggle-password form-input-icon\"\n                            href=\"#\"\n                            onClick={toggle}\n                        >\n                            {isOpen ? <IconEye /> : <IconEyeSlash />}\n                        </a>\n                    </div>\n                )}\n            </Toggle>\n        ),\n        [isFloatingLabelEnabled],\n    );\n\n    const labelContent = useMemo(() => <TranslatedString id=\"customer.password_label\" />, []);\n\n    return <FormField input={renderInput} isFloatingLabelEnabled={isFloatingLabelEnabled} labelContent={isFloatingLabelEnabled ? null : labelContent} name=\"password\" />;\n};\n\nexport default memo(PasswordField);\n","import React from 'react';\n\nimport { useCheckout } from '@bigcommerce/checkout/contexts';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { Button, ButtonVariant } from '@bigcommerce/checkout/ui';\n\ninterface RedirectToStorefrontLoginProps {\n    isDisabled: boolean;\n    isLoading: boolean;\n}\n\nexport const RedirectToStorefrontLogin: React.FC<RedirectToStorefrontLoginProps> = ({\n    isDisabled,\n    isLoading,\n}) => {\n    const { checkoutState: { data: { getConfig } } } = useCheckout();\n\n    const config = getConfig();\n\n    if (!config) {\n        return null;\n    }\n\n    const { checkoutLink, loginLink } = config.links;\n\n    const handleRedirect = () => {\n        return window.location.assign(`${loginLink}?redirectTo=${checkoutLink}`);\n    }\n\n    return (\n        <Button\n            className=\"body-bold\"\n            disabled={isDisabled}\n            id=\"checkout-customer-continue\"\n            isLoading={isLoading}\n            onClick={handleRedirect}\n            testId=\"customer-continue-button\"\n            variant={ButtonVariant.Primary}\n        >\n            <TranslatedString id=\"customer.sign_in_action\" />\n        </Button>\n    );\n};\n","import { type FormikProps, withFormik } from 'formik';\nimport { noop } from 'lodash';\nimport React, { type FunctionComponent, memo, useCallback } from 'react';\nimport { object, string } from 'yup';\n\nimport { useCheckout } from '@bigcommerce/checkout/contexts';\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport {\n    TranslatedHtml,\n    TranslatedLink,\n    TranslatedString,\n    withLanguage,\n    type WithLanguageProps,\n} from '@bigcommerce/checkout/locale';\n\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { Fieldset, Form, Legend } from '../ui/form';\n\nimport CustomerViewType from './CustomerViewType';\nimport EmailField from './EmailField';\nimport getEmailValidationSchema from './getEmailValidationSchema';\nimport mapErrorMessage from './mapErrorMessage';\nimport PasswordField from './PasswordField';\nimport { RedirectToStorefrontLogin } from './RedirectToStorefrontLogin';\n\nexport interface LoginFormProps {\n    continueAsGuestButtonLabelId: string;\n    email?: string;\n    isEmbedded?: boolean;\n    viewType?: Omit<CustomerViewType, 'guest'>;\n    isFloatingLabelEnabled?: boolean;\n    signInError?: Error;\n    onCancel?(): void;\n    onCreateAccount?(): void;\n    onChangeEmail?(email: string): void;\n    onSignIn(data: LoginFormValues): void;\n    onSendLoginEmail?(): void;\n    onContinueAsGuest?(): void;\n}\n\nexport interface LoginFormValues {\n    email: string;\n    password: string;\n}\n\nconst LoginForm: FunctionComponent<\n    LoginFormProps & FormikProps<LoginFormValues> & WithLanguageProps\n> = ({\n    continueAsGuestButtonLabelId,\n    email,\n    isEmbedded,\n    language,\n    signInError,\n    onCancel = noop,\n    onChangeEmail,\n    onContinueAsGuest,\n    onCreateAccount = noop,\n    onSendLoginEmail = noop,\n    isFloatingLabelEnabled,\n    viewType = CustomerViewType.Login,\n}) => {\n    const { checkoutState } = useCheckout();\n\n    const {\n        data: { getCart, getConfig },\n        statuses: { isExecutingPaymentMethodCheckout, isSigningIn },\n    } = checkoutState;\n    const cart = getCart();\n    const config = getConfig();\n\n    if (!cart || !config) {\n        throw new Error('cart is not available');\n    }\n\n    const {\n        checkoutSettings: {\n            isAccountCreationEnabled: shouldShowCreateAccountLink,\n            isSignInEmailEnabled,\n            guestCheckoutEnabled: canCancel,\n            shouldRedirectToStorefrontForAuth,\n        },\n        links: {\n            forgotPasswordLink: forgotPasswordUrl\n        }\n    } = config;\n\n    const isBuyNowCart = cart.source === 'BUY_NOW';\n\n    const changeEmailLink = useCallback(() => {\n        if (!email) {\n            return null;\n        }\n\n        return (\n            <p className=\"optimizedCheckout-contentSecondary\">\n                <TranslatedLink\n                    data={{ email }}\n                    id=\"customer.guest_could_login_change_email\"\n                    onClick={onCancel}\n                    testId=\"change-email\"\n                />\n            </p>\n        );\n    }, [email, onCancel]);\n\n    return (\n        <Form\n            className=\"checkout-form\"\n            id=\"checkout-customer-returning\"\n            testId=\"checkout-customer-returning\"\n        >\n            <Fieldset\n                legend={\n                    <Legend hidden>\n                        <TranslatedString id=\"customer.returning_customer_text\" />\n                    </Legend>\n                }\n            >\n                {signInError && (\n                    <Alert testId=\"customer-login-error-message\" type={AlertType.Error}>\n                        {mapErrorMessage(signInError, (key) => language.translate(key))}\n                    </Alert>\n                )}\n\n                {viewType === CustomerViewType.SuggestedLogin && (\n                    <Alert type={AlertType.Info}>\n                        <TranslatedHtml data={{ email }} id=\"customer.guest_could_login\" />\n                    </Alert>\n                )}\n\n                {viewType === CustomerViewType.CancellableEnforcedLogin && (\n                    <Alert type={AlertType.Info}>\n                        <TranslatedHtml data={{ email }} id=\"customer.guest_must_login\" />\n                    </Alert>\n                )}\n\n                {viewType === CustomerViewType.EnforcedLogin && (\n                    <Alert type={AlertType.Error}>\n                        <TranslatedLink\n                            id=\"customer.guest_temporary_disabled\"\n                            onClick={onCreateAccount}\n                        />\n                    </Alert>\n                )}\n\n                {(viewType === CustomerViewType.Login ||\n                    viewType === CustomerViewType.EnforcedLogin) && (\n                    <EmailField isFloatingLabelEnabled={isFloatingLabelEnabled} onChange={onChangeEmail} />\n                )}\n\n                {!shouldRedirectToStorefrontForAuth && <PasswordField isFloatingLabelEnabled={isFloatingLabelEnabled} />}\n\n                <p className=\"form-legend-container body-cta\">\n                    <span>\n                        { isSignInEmailEnabled && !isEmbedded && !isBuyNowCart &&\n                            <TranslatedLink\n                                id=\"login_email.link\"\n                                onClick={ onSendLoginEmail }\n                                testId=\"customer-signin-link\"\n                            />\n                        }\n                        { !isSignInEmailEnabled && !isEmbedded && !shouldRedirectToStorefrontForAuth &&\n                            <a\n                                data-test=\"forgot-password-link\"\n                                href={ forgotPasswordUrl }\n                                rel=\"noopener noreferrer\"\n                                target=\"_blank\"\n                            >\n                                <TranslatedString id=\"customer.forgot_password_action\" />\n                            </a>\n                        }\n                    </span>\n                    { viewType === CustomerViewType.Login && shouldShowCreateAccountLink &&\n                        <span>\n                            <TranslatedLink\n                                id=\"customer.create_account_to_continue_text\"\n                                onClick={onCreateAccount}\n                            />\n                        </span>\n                    }\n                </p>\n\n                <div className=\"form-actions\">\n                    {shouldRedirectToStorefrontForAuth ?\n                        <RedirectToStorefrontLogin\n                            isDisabled={Boolean(isSigningIn() || isExecutingPaymentMethodCheckout())}\n                            isLoading={Boolean(isSigningIn() || isExecutingPaymentMethodCheckout())}\n                        />\n                        :\n                        <Button\n                            className=\"body-bold\"\n                            disabled={isSigningIn() || isExecutingPaymentMethodCheckout()}\n                            id=\"checkout-customer-continue\"\n                            isLoading={isSigningIn() || isExecutingPaymentMethodCheckout()}\n                            testId=\"customer-continue-button\"\n                            type=\"submit\"\n                            variant={ButtonVariant.Primary}\n                    >\n                        <TranslatedString id=\"customer.sign_in_action\" />\n                    </Button>}\n\n                    {viewType === CustomerViewType.SuggestedLogin && (\n                        <a\n                            className=\"button optimizedCheckout-buttonSecondary body-bold\"\n                            data-test=\"customer-guest-continue\"\n                            href=\"#\"\n                            id=\"checkout-guest-continue\"\n                            onClick={preventDefault(onContinueAsGuest)}\n                        >\n                            <TranslatedString id={continueAsGuestButtonLabelId} />\n                        </a>\n                    )}\n\n                    {canCancel &&\n                        viewType !== CustomerViewType.EnforcedLogin &&\n                        viewType !== CustomerViewType.SuggestedLogin && (\n                            <a\n                            className=\"button optimizedCheckout-buttonSecondary body-bold\"\n                                data-test=\"customer-cancel-button\"\n                                href=\"#\"\n                                id=\"checkout-customer-cancel\"\n                                onClick={preventDefault(onCancel)}\n                            >\n                                <TranslatedString\n                                    id={\n                                        viewType === CustomerViewType.CancellableEnforcedLogin\n                                            ? 'login_email.use_another_email'\n                                            : 'common.cancel_action'\n                                    }\n                                />\n                            </a>\n                        )}\n                </div>\n\n                {viewType === CustomerViewType.SuggestedLogin && changeEmailLink()}\n            </Fieldset>\n        </Form>\n    );\n};\n\nexport default withLanguage(withFormik<LoginFormProps & WithLanguageProps, LoginFormValues>({\n    mapPropsToValues: ({ email = '' }) => ({\n        email,\n        password: '',\n    }),\n    handleSubmit: (values, { props: { onSignIn } }) => {\n        onSignIn(values);\n    },\n    validationSchema: ({ language }: LoginFormProps & WithLanguageProps) =>\n        getEmailValidationSchema({ language }).concat(\n            object({\n                password: string().required(\n                    language.translate('customer.password_required_error'),\n                ),\n            }),\n        ),\n})(memo(LoginForm)));\n","export default function mapErrorMessage(\n    error: any, // TODO: Export `RequestError`\n    translate: (key: string) => string,\n): string {\n    const type = error.body && error.body.type;\n\n    switch (type) {\n        case 'throttled_login':\n            return translate('customer.sign_in_throttled_error');\n\n        case 'reset_password_before_login':\n            return translate('customer.reset_password_before_login_error');\n\n        case 'empty_cart':\n            return translate('cart.empty_cart_error_message');\n\n        default:\n            return translate('customer.sign_in_error');\n    }\n}\n","import {\n    type CheckoutSelectors,\n    type CustomerAccountRequestBody,\n    type CustomerCredentials,\n    type CustomerInitializeOptions,\n    type CustomerRequestOptions,\n    type ExecutePaymentMethodCheckoutOptions,\n    type FormField,\n    type GuestCredentials,\n    type SignInEmail\n} from '@bigcommerce/checkout-sdk';\n\nimport { useCheckout } from '@bigcommerce/checkout/contexts';\nimport { shouldUseStripeLinkByMinimumAmount } from '@bigcommerce/checkout/instrument-utils';\n\nimport { isFloatingLabelEnabled } from '../common/utility';\nimport getProviderWithCustomCheckout from '../payment/getProviderWithCustomCheckout';\nimport { PaymentMethodId } from '../payment/paymentMethod';\n\nexport interface CustomerData {\n    // Basic customer data\n    email?: string;\n    firstName?: string;\n    hasBillingId: boolean;\n    isBuyNowCart: boolean;\n\n    // Form data\n    customerAccountFields: FormField[];\n    canSubscribe: boolean;\n    defaultShouldSubscribe: boolean;\n    requiresMarketingConsent: boolean;\n    isFloatingLabelEnabled?: boolean;\n\n    // Configuration\n    forgotPasswordUrl: string;\n    privacyPolicyUrl?: string;\n    isSignInEmailEnabled: boolean;\n    isAccountCreationEnabled: boolean;\n    isGuestEnabled: boolean;\n    isExpressPrivacyPolicy: boolean;\n    shouldRedirectToStorefrontForAuth: boolean;\n\n    // Status flags\n    isContinuingAsGuest: boolean;\n    isExecutingPaymentMethodCheckout: boolean;\n    isInitializing: boolean;\n    isSigningIn: boolean;\n    isSendingSignInEmail: boolean;\n    isCreatingAccount: boolean;\n\n    // Errors\n    signInError?: Error;\n    signInEmailError?: Error;\n    createAccountError?: Error;\n\n    // Other data\n    signInEmail?: SignInEmail;\n    checkoutButtonIds: string[];\n    providerWithCustomCheckout?: string;\n    isPaymentDataRequired: boolean;\n    shouldRenderStripeForm: boolean;\n}\n\nexport interface CustomerActions {\n    clearError: (error: Error) => Promise<CheckoutSelectors>;\n    createAccount: (values: CustomerAccountRequestBody) => Promise<CheckoutSelectors>;\n    continueAsGuest: (credentials: GuestCredentials) => Promise<CheckoutSelectors>;\n    sendLoginEmail: (params: { email: string }) => Promise<CheckoutSelectors>;\n    deinitializeCustomer: (options: CustomerRequestOptions) => Promise<CheckoutSelectors>;\n    executePaymentMethodCheckout: (options: ExecutePaymentMethodCheckoutOptions) => Promise<CheckoutSelectors>;\n    initializeCustomer: (options: CustomerInitializeOptions) => Promise<CheckoutSelectors>;\n    signIn: (credentials: CustomerCredentials) => Promise<CheckoutSelectors>;\n}\n\nexport interface UseCustomerReturn {\n    data: CustomerData;\n    actions: CustomerActions;\n}\n\nexport const useCustomer = (): UseCustomerReturn => {\n    const { checkoutState, checkoutService } = useCheckout();\n\n    const {\n        data: {\n            getBillingAddress,\n            getCustomerAccountFields,\n            getCheckout,\n            getCustomer,\n            getCart,\n            getSignInEmail,\n            getConfig,\n            isPaymentDataRequired,\n        },\n        errors: { getSignInError, getSignInEmailError, getCreateCustomerAccountError },\n        statuses: {\n            isContinuingAsGuest,\n            isExecutingPaymentMethodCheckout,\n            isInitializingCustomer,\n            isSigningIn,\n            isSendingSignInEmail,\n            isCreatingCustomerAccount,\n        },\n    } = checkoutState;\n\n    const billingAddress = getBillingAddress();\n    const checkout = getCheckout();\n    const customer = getCustomer();\n    const cart = getCart();\n    const signInEmail = getSignInEmail();\n    const config = getConfig();\n\n    // Return null-like data if essential data is missing\n    if (!checkout || !config || !cart) {\n        return {\n            data: {} as CustomerData,\n            actions: {} as CustomerActions,\n        };\n    }\n\n    const {\n        checkoutSettings: {\n            privacyPolicyUrl,\n            requiresMarketingConsent,\n            isSignInEmailEnabled,\n            isAccountCreationEnabled,\n            isExpressPrivacyPolicy,\n            shouldRedirectToStorefrontForAuth,\n            remoteCheckoutProviders: checkoutButtonIds,\n            providerWithCustomCheckout,\n        },\n        shopperConfig: {\n            showNewsletterSignup: canSubscribe,\n            defaultNewsletterSignup: defaultShouldSubscribe,\n        },\n        links: {\n            forgotPasswordLink: forgotPasswordUrl,\n        },\n    } = config;\n\n    const customCheckoutProvider = getProviderWithCustomCheckout(providerWithCustomCheckout);\n\n    // Customer data\n    const data: CustomerData = {\n        // Basic customer data\n        email: billingAddress?.email || customer?.email,\n        firstName: customer?.firstName,\n        hasBillingId: !!billingAddress?.id,\n        isBuyNowCart: cart.source === 'BUY_NOW',\n\n        // Form data\n        customerAccountFields: getCustomerAccountFields(),\n        canSubscribe,\n        defaultShouldSubscribe,\n        requiresMarketingConsent,\n        isFloatingLabelEnabled: isFloatingLabelEnabled(config.checkoutSettings),\n\n        // Configuration\n        forgotPasswordUrl,\n        privacyPolicyUrl,\n        isSignInEmailEnabled,\n        isAccountCreationEnabled,\n        isGuestEnabled: config.checkoutSettings.guestCheckoutEnabled,\n        isExpressPrivacyPolicy,\n        shouldRedirectToStorefrontForAuth,\n\n        // Status flags\n        isContinuingAsGuest: isContinuingAsGuest(),\n        isExecutingPaymentMethodCheckout: isExecutingPaymentMethodCheckout(),\n        isInitializing: isInitializingCustomer(),\n        isSigningIn: isSigningIn(),\n        isSendingSignInEmail: isSendingSignInEmail(),\n        isCreatingAccount: isCreatingCustomerAccount(),\n\n        // Errors\n        signInError: getSignInError(),\n        signInEmailError: getSignInEmailError(),\n        createAccountError: getCreateCustomerAccountError(),\n\n        // Other data\n        signInEmail,\n        checkoutButtonIds,\n        providerWithCustomCheckout: customCheckoutProvider,\n        isPaymentDataRequired: isPaymentDataRequired(),\n        shouldRenderStripeForm: customCheckoutProvider === PaymentMethodId.StripeUPE && shouldUseStripeLinkByMinimumAmount(cart),\n    };\n\n    // Customer actions\n    const actions: CustomerActions = {\n        clearError: checkoutService.clearError,\n        createAccount: checkoutService.createCustomerAccount,\n        continueAsGuest: checkoutService.continueAsGuest,\n        sendLoginEmail: checkoutService.sendSignInEmail,\n        deinitializeCustomer: checkoutService.deinitializeCustomer,\n        executePaymentMethodCheckout: checkoutService.executePaymentMethodCheckout,\n        initializeCustomer: checkoutService.initializeCustomer,\n        signIn: checkoutService.signInCustomer,\n    };\n\n    return {\n        data,\n        actions,\n    };\n};\n","import {\n    type CustomerCredentials,\n} from '@bigcommerce/checkout-sdk';\nimport { createBigCommercePaymentsFastlaneCustomerStrategy } from '@bigcommerce/checkout-sdk/integrations/bigcommerce-payments';\nimport { createBoltCustomerStrategy } from '@bigcommerce/checkout-sdk/integrations/bolt';\nimport { createBraintreeFastlaneCustomerStrategy } from '@bigcommerce/checkout-sdk/integrations/braintree';\nimport { createPayPalCommerceFastlaneCustomerStrategy } from '@bigcommerce/checkout-sdk/integrations/paypal-commerce';\nimport { createStripeLinkV2CustomerStrategy, createStripeUPECustomerStrategy } from '@bigcommerce/checkout-sdk/integrations/stripe';\nimport { noop } from 'lodash';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { useAnalytics } from '@bigcommerce/checkout/contexts';\n\nimport type CheckoutStepStatus from '../checkout/CheckoutStepStatus';\nimport { isErrorWithType } from '../common/error';\nimport { PaymentMethodId } from '../payment/paymentMethod';\n\nimport CreateAccountForm from './CreateAccountForm';\nimport CustomerViewType from './CustomerViewType';\nimport EmailLoginForm, { type EmailLoginFormValues } from './EmailLoginForm';\nimport { type CreateAccountFormValues } from './getCreateCustomerValidationSchema';\nimport { type GuestFormValues } from './GuestForm';\nimport { GuestFormContainer } from './GuestFormContainer';\nimport LoginForm from './LoginForm';\nimport mapCreateAccountFromFormValues from './mapCreateAccountFromFormValues';\nimport { SubscribeSessionStorage } from './SubscribeSessionStorage';\nimport { useCustomer } from './useCustomer';\n\nexport interface CustomerProps {\n    viewType: CustomerViewType;\n    step: CheckoutStepStatus;\n    isEmbedded?: boolean;\n    isSubscribed: boolean;\n    isWalletButtonsOnTop: boolean;\n    checkEmbeddedSupport?(methodIds: string[]): void;\n    onChangeViewType?(viewType: CustomerViewType): void;\n    onAccountCreated?(): void;\n    onContinueAsGuest?(): void;\n    onContinueAsGuestError?(error: Error): void;\n    onReady?(): void;\n    onSubscribeToNewsletter(subscribe: boolean): void;\n    onSignIn?(): void;\n    onSignInError?(error: Error): void;\n    onUnhandledError?(error: Error): void;\n    onWalletButtonClick?(methodName: string): void;\n}\n\nexport interface CustomerState {\n    isEmailLoginFormOpen: boolean;\n    isReady: boolean;\n    hasRequestedLoginEmail: boolean;\n    draftEmail?: string;\n}\n\nconst Customer: React.FC<CustomerProps> = ({\n    viewType,\n    step,\n    isEmbedded,\n    isSubscribed,\n    isWalletButtonsOnTop,\n    onChangeViewType = noop,\n    onAccountCreated = noop,\n    onContinueAsGuest = noop,\n    onContinueAsGuestError = noop,\n    onReady = noop,\n    onSubscribeToNewsletter,\n    onSignIn = noop,\n    onSignInError = noop,\n    onUnhandledError = noop,\n    onWalletButtonClick = noop,\n}) => {\n    const [state, setState] = useState<CustomerState>({\n        isEmailLoginFormOpen: false,\n        isReady: false,\n        hasRequestedLoginEmail: false,\n        draftEmail: undefined,\n    });\n\n    const { analyticsTracker } = useAnalytics();\n\n    const customerData = useCustomer();\n\n    // Initialize draftEmail on mount\n    useEffect(() => {\n        setState(prevState => ({\n            ...prevState,\n            draftEmail: customerData.data.email,\n        }));\n    }, [customerData.data.email]);\n\n    // componentDidMount equivalent\n    useEffect(() => {\n        const initializeCustomer = async () => {\n            try {\n                if (customerData.data.providerWithCustomCheckout && \n                    customerData.data.providerWithCustomCheckout !== PaymentMethodId.StripeUPE) {\n                    // TODO: Split out into separate chunks so they can be lazy loaded\n                    await customerData.actions.initializeCustomer({\n                        methodId: customerData.data.providerWithCustomCheckout,\n                        integrations: [\n                            createBigCommercePaymentsFastlaneCustomerStrategy,\n                            createBraintreeFastlaneCustomerStrategy,\n                            createPayPalCommerceFastlaneCustomerStrategy,\n                            createBoltCustomerStrategy,\n                            createStripeUPECustomerStrategy,\n                            createStripeLinkV2CustomerStrategy,\n                        ],\n                    });\n                }\n            } catch (error) {\n                onUnhandledError(error);\n            }\n\n            setState(prevState => ({ ...prevState, isReady: true }));\n            onReady();\n        };\n\n        initializeCustomer();\n    }, []);\n\n    // componentWillUnmount equivalent\n    useEffect(() => {\n        return () => {\n            const cleanup = async () => {\n                try {\n                    await customerData.actions.deinitializeCustomer({ \n                        methodId: customerData.data.providerWithCustomCheckout \n                    });\n                } catch (error) {\n                    onUnhandledError(error);\n                }\n            };\n\n            void cleanup();\n        };\n    }, [customerData.actions.deinitializeCustomer, customerData.data.providerWithCustomCheckout, onUnhandledError]);\n\n    // Event handlers converted to useCallback\n    const handleChangeEmail = useCallback((email: string) => {\n        setState(prevState => ({ ...prevState, draftEmail: email }));\n        analyticsTracker.customerEmailEntry(email);\n    }, [analyticsTracker]);\n\n    const handleSignIn = useCallback(async (credentials: CustomerCredentials) => {\n        try {\n            await customerData.actions.signIn(credentials);\n            onSignIn();\n            setState(prevState => ({ ...prevState, draftEmail: undefined }));\n        } catch (error) {\n            onSignInError(error);\n        }\n    }, [customerData.actions.signIn, onSignIn, onSignInError]);\n\n    const handleContinueAsGuest = useCallback(async (formValues: GuestFormValues) => {\n        const email = formValues.email.trim();\n        const updateSubscriptionWhenUnchecked =\n            customerData.data.hasBillingId || customerData.data.defaultShouldSubscribe ? false : undefined;\n\n        try {\n            const { data } = await customerData.actions.continueAsGuest({\n                email,\n                acceptsMarketingNewsletter:\n                    customerData.data.canSubscribe && formValues.shouldSubscribe\n                        ? true\n                        : updateSubscriptionWhenUnchecked,\n                acceptsAbandonedCartEmails: formValues.shouldSubscribe\n                    ? true\n                    : updateSubscriptionWhenUnchecked,\n            });\n\n            onSubscribeToNewsletter(formValues.shouldSubscribe);\n\n            SubscribeSessionStorage.setSubscribeStatus(formValues.shouldSubscribe);\n\n            const customer = data.getCustomer();\n            const paymentProviderCustomer = data.getPaymentProviderCustomer();\n\n            if (customer && customer.shouldEncourageSignIn && customer.isGuest && !paymentProviderCustomer?.stripeLinkAuthenticationState) {\n                return onChangeViewType(CustomerViewType.SuggestedLogin);\n            }\n\n            await executePaymentMethodCheckoutOrContinue();\n\n            setState(prevState => ({ ...prevState, draftEmail: undefined }));\n        } catch (error) {\n            if (\n                isErrorWithType(error) &&\n                (error.type === 'update_subscriptions' ||\n                    error.type === 'payment_method_client_invalid')\n            ) {\n                setState(prevState => ({ ...prevState, draftEmail: undefined }));\n                onContinueAsGuest();\n            }\n\n            if (isErrorWithType(error) && error.type === 'empty_cart') {\n                return onContinueAsGuestError(error);\n            }\n\n            if (isErrorWithType(error) && error.status === 429) {\n                return onChangeViewType(CustomerViewType.EnforcedLogin);\n            }\n\n            if (isErrorWithType(error) && error.status === 403) {\n                return onChangeViewType(CustomerViewType.CancellableEnforcedLogin);\n            }\n\n            onContinueAsGuestError(error);\n        }\n    }, [customerData, onSubscribeToNewsletter, onChangeViewType, onContinueAsGuest, onContinueAsGuestError]);\n\n    const executePaymentMethodCheckoutOrContinue = useCallback(async () => {\n        if (customerData.data.providerWithCustomCheckout && \n            customerData.data.providerWithCustomCheckout !== PaymentMethodId.StripeUPE) {\n            await customerData.actions.executePaymentMethodCheckout({\n                methodId: customerData.data.providerWithCustomCheckout,\n                continueWithCheckoutCallback: onContinueAsGuest,\n                checkoutPaymentMethodExecuted: (payload) => {\n                    analyticsTracker.customerPaymentMethodExecuted(payload);\n                }\n            });\n        } else {\n            onContinueAsGuest();\n        }\n    }, [customerData.actions.executePaymentMethodCheckout, customerData.data.providerWithCustomCheckout, onContinueAsGuest, analyticsTracker]);\n\n    // Additional event handlers\n    const handleShowLogin = useCallback(() => {\n        onChangeViewType(CustomerViewType.Login);\n    }, [onChangeViewType]);\n\n    const handleCreateAccount = useCallback(async (values: CreateAccountFormValues) => {\n        await customerData.actions.createAccount(mapCreateAccountFromFormValues(values));\n        onAccountCreated();\n    }, [customerData.actions.createAccount, onAccountCreated]);\n\n    const handleCancelCreateAccount = useCallback(() => {\n        if (customerData.data.createAccountError) {\n            customerData.actions.clearError(customerData.data.createAccountError);\n        }\n\n        onChangeViewType(CustomerViewType.Login);\n    }, [customerData.actions.clearError, customerData.data.createAccountError, onChangeViewType]);\n\n    const handleCancelSignIn = useCallback(() => {\n        if (customerData.data.signInError) {\n            customerData.actions.clearError(customerData.data.signInError);\n        }\n\n        onChangeViewType(CustomerViewType.Guest);\n    }, [customerData.actions.clearError, customerData.data.signInError, onChangeViewType]);\n\n    const showCreateAccount = useCallback(() => {\n        onChangeViewType(CustomerViewType.CreateAccount);\n    }, [onChangeViewType]);\n\n    const handleSendLoginEmail = useCallback(async (values: EmailLoginFormValues) => {\n        try {\n            await customerData.actions.sendLoginEmail(values);\n        } catch {\n            // Need to write catch block since one test covers the case when `sendLoginEmail` fails\n        } finally {\n            setState(prevState => ({ ...prevState, hasRequestedLoginEmail: true }));\n        }\n    }, [customerData.actions.sendLoginEmail]);\n\n    const handleEmailLoginClicked = useCallback(async () => {\n        try {\n            if (viewType !== CustomerViewType.Login && state.draftEmail) {\n                await handleSendLoginEmail({ email: state.draftEmail });\n            }\n        } finally {\n            setState(prevState => ({ ...prevState, isEmailLoginFormOpen: true }));\n        }\n    }, [viewType, state.draftEmail, handleSendLoginEmail]);\n\n    const closeEmailLoginFormForm = useCallback(() => {\n        setState(prevState => ({\n            ...prevState,\n            isEmailLoginFormOpen: false,\n            hasRequestedLoginEmail: false,\n        }));\n    }, []);\n\n    // Main render logic\n    const shouldRenderGuestForm = viewType === CustomerViewType.Guest;\n    const shouldRenderCreateAccountForm = viewType === CustomerViewType.CreateAccount;\n    const shouldRenderLoginForm = !shouldRenderGuestForm && !shouldRenderCreateAccountForm;\n\n    if (!state.isReady) {\n        return null;\n    }\n\n    return (\n        <>\n            {state.isEmailLoginFormOpen && (\n                <EmailLoginForm\n                    email={state.draftEmail}\n                    emailHasBeenRequested={state.hasRequestedLoginEmail}\n                    isFloatingLabelEnabled={customerData.data.isFloatingLabelEnabled}\n                    isOpen={state.isEmailLoginFormOpen}\n                    isSendingEmail={customerData.data.isSendingSignInEmail}\n                    onRequestClose={closeEmailLoginFormForm}\n                    onSendLoginEmail={handleSendLoginEmail}\n                    sentEmail={customerData.data.signInEmail}\n                    sentEmailError={customerData.data.signInEmailError}\n                />\n            )}\n            \n            {shouldRenderLoginForm && (\n                <LoginForm\n                    continueAsGuestButtonLabelId=\"customer.continue_as_guest_action\"\n                    email={state.draftEmail || customerData.data.email}\n                    isEmbedded={isEmbedded}\n                    isFloatingLabelEnabled={customerData.data.isFloatingLabelEnabled}\n                    onCancel={handleCancelSignIn}\n                    onChangeEmail={handleChangeEmail}\n                    onContinueAsGuest={executePaymentMethodCheckoutOrContinue}\n                    onCreateAccount={showCreateAccount}\n                    onSendLoginEmail={handleEmailLoginClicked}\n                    onSignIn={handleSignIn}\n                    signInError={customerData.data.signInError}\n                    viewType={viewType}\n                />\n            )}\n            \n            {shouldRenderGuestForm && (\n                <GuestFormContainer\n                    email={state.draftEmail || customerData.data.email}\n                    handleChangeEmail={handleChangeEmail}\n                    handleContinueAsGuest={handleContinueAsGuest}\n                    handleShowLogin={handleShowLogin}\n                    isFloatingLabelEnabled={customerData.data.isFloatingLabelEnabled}\n                    isSubscribed={isSubscribed}\n                    isWalletButtonsOnTop={isWalletButtonsOnTop}\n                    onUnhandledError={onUnhandledError}\n                    onWalletButtonClick={onWalletButtonClick}\n                    step={step}\n                />\n            )}\n            \n            {shouldRenderCreateAccountForm && (\n                <CreateAccountForm\n                    createAccountError={customerData.data.createAccountError}\n                    defaultShouldSubscribe={customerData.data.defaultShouldSubscribe}\n                    formFields={customerData.data.customerAccountFields}\n                    isCreatingAccount={customerData.data.isCreatingAccount}\n                    isExecutingPaymentMethodCheckout={customerData.data.isExecutingPaymentMethodCheckout}\n                    isFloatingLabelEnabled={customerData.data.isFloatingLabelEnabled}\n                    onCancel={handleCancelCreateAccount}\n                    onSubmit={handleCreateAccount}\n                    requiresMarketingConsent={customerData.data.requiresMarketingConsent}\n                />\n            )}\n        </>\n    );\n};\n\nexport default Customer;\n","import { type CustomerAccountRequestBody } from '@bigcommerce/checkout-sdk';\n\nimport { mapCustomFormFieldsFromFormValues } from '../formFields';\n\nimport { type CreateAccountFormValues } from './getCreateCustomerValidationSchema';\n\nexport default function mapCreateAccountFromFormValues({\n    acceptsMarketingEmails,\n    customFields,\n    ...values\n}: CreateAccountFormValues): CustomerAccountRequestBody {\n    return {\n        ...values,\n        acceptsMarketingEmails: acceptsMarketingEmails && acceptsMarketingEmails.length > 0,\n        customFields: mapCustomFormFieldsFromFormValues(customFields),\n    };\n}\n","import { PaymentMethodId } from './paymentMethod';\n\nexport default function getProviderWithCustomCheckout(methodId?: string | null): string | undefined {\n    if (!methodId) {\n        return undefined;\n    }\n\n    if (methodId === PaymentMethodId.PaypalCommerce || methodId === PaymentMethodId.PaypalCommerceCreditCards) {\n        return PaymentMethodId.PayPalCommerceAcceleratedCheckout;\n    }\n\n    if (methodId === PaymentMethodId.Braintree) {\n        return PaymentMethodId.BraintreeAcceleratedCheckout;\n    }\n\n    return methodId;\n}\n","import { kebabCase } from 'lodash';\n\nexport default function getAppliedStyles(\n    element: HTMLElement,\n    properties: string[],\n    pseudoElementSelector?: string,\n): { [key: string]: string } {\n    const declaration = window.getComputedStyle(element, pseudoElementSelector);\n\n    return properties.reduce(\n        (result, propertyName) => ({\n            ...result,\n            [propertyName]: declaration.getPropertyValue(kebabCase(propertyName)),\n        }),\n        {},\n    );\n}\n","export default function parseAnchor(text: string): string[] {\n    const div = document.createElement('div');\n\n    div.innerHTML = text;\n\n    const anchor = div.querySelector('a');\n\n    if (!anchor) {\n        return [];\n    }\n\n    const anchorSiblings = div.innerHTML.split(anchor.outerHTML);\n\n    return [anchorSiblings[0], anchor.text, anchorSiblings[1]];\n}\n","import classNames from 'classnames';\nimport React, { type ButtonHTMLAttributes, type FunctionComponent } from 'react';\n\nexport interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n    isFullWidth?: boolean;\n    isLoading?: boolean;\n    size?: ButtonSize;\n    testId?: string;\n    variant?: ButtonVariant;\n}\n\nexport enum ButtonVariant {\n    Primary = 'primary',\n    Secondary = 'secondary',\n    Action = 'action',\n}\n\nexport enum ButtonSize {\n    Small = 'small',\n    Tiny = 'tiny',\n    Large = 'large',\n}\n\nfunction getClassName(\n    props: Pick<ButtonProps, 'className' | 'isFullWidth' | 'isLoading' | 'size' | 'variant'>,\n) {\n    const { className, isFullWidth, isLoading, size, variant } = props;\n\n    return classNames(\n        'button',\n        className,\n        { 'button--primary': variant === ButtonVariant.Primary },\n        { 'button--tertiary': variant === ButtonVariant.Secondary },\n        { 'button--action': variant === ButtonVariant.Action },\n        { 'button--small': size === ButtonSize.Small },\n        { 'button--tiny': size === ButtonSize.Tiny },\n        { 'button--large': size === ButtonSize.Large },\n        { 'button--slab': isFullWidth },\n        {\n            'optimizedCheckout-buttonPrimary':\n                variant === ButtonVariant.Primary || variant === ButtonVariant.Action,\n        },\n        { 'optimizedCheckout-buttonSecondary': variant === ButtonVariant.Secondary },\n        { 'is-loading': isLoading },\n    );\n}\n\nconst Button: FunctionComponent<ButtonProps> = ({\n    children,\n    className,\n    disabled,\n    isFullWidth,\n    isLoading,\n    size,\n    testId,\n    type,\n    variant,\n    ...rest\n}) => (\n    <button\n        {...rest}\n        className={getClassName({ className, isFullWidth, isLoading, size, variant })}\n        data-test={testId}\n        disabled={disabled || isLoading}\n        type={type || 'button'}\n    >\n        {children}\n    </button>\n);\n\nexport default Button;\n"],"names":["EMAIL_REGEXP","getEmailValidationSchema","language","email","max","matches","translate","required","getTranslateCreateCustomerError","type","label","min","formFields","passwordRequirements","description","numeric","alpha","minLength","firstName","lastName","password","concat","getCustomFormFieldsValidationSchema","getAcceptsMarketingEmailsDefault","defaultShouldSubscribe","requiresMarketingConsent","withLanguage","handleSubmit","values","props","onSubmit","noop","mapPropsToValues","customFields","acceptsMarketingEmails","validationSchema","find","requirements","Error","getCreateCustomerValidationSchema","getPasswordRequirements","createAccountError","isCreatingAccount","isExecutingPaymentMethodCheckout","onCancel","isFloatingLabelEnabled","createAccountErrorMessage","useMemo","isRequestError","status","splitMessage","message","split","length","TranslatedString","data","trim","id","fields","map","field","name","options","updatedItems","items","item","value","transformFormFieldsData","Form","className","testId","Fieldset","Alert","A","DynamicFormField","autocomplete","extraClass","key","parentFieldName","custom","undefined","Button","disabled","isLoading","variant","Primary","href","onClick","preventDefault","useLocale","translatedString","parsedString","parseAnchor","memo","onChange","renderInput","useCallback","TextInput","autoComplete","labelContent","FormField","input","onSendLoginEmail","isOpen","isSendingEmail","emailHasBeenRequested","onRequestClose","sentEmailError","sentEmail","submitForm","formEmail","themeV2","modalHeaderStringId","okButton","footer","LoadingSpinner","sent_email","error","form","expiry","TranslatedHtml","minutes","Math","round","Modal","additionalBodyClassName","additionalModalClassName","header","ModalHeader","shouldShowCloseButton","CheckoutButtonV1Resolver","lazy","withCheckout","checkoutState","checkoutService","hideText","isInitializing","methodIds","checkEmbeddedSupport","deinitialize","initialize","onError","supportedMethodIds","methodId","ResolvedCheckoutButton","resolveCheckoutButton","LazyContainer","containerId","onUnhandledError","onWalletButtonClick","isShowingWalletButtonsOnTop","isFastlaneHostWindow","window","hasOwnProperty","getPaymentMethod","getConfig","providerWithCustomCheckout","checkoutSettings","paymentMethod","shouldRenderFastlaneWatermark","initializationData","isFastlanePrivacySettingEnabled","useEffect","braintreeFastlane","paypalFastlane","FastlaneWatermarkComponent","includeAdditionalInfo","then","result","render","PrivacyPolicyCheckboxFieldLink","url","CheckboxFormField","PrivacyPolicyFieldset","additionalClassName","PrivacyPolicyAutoConsent","isExpressPrivacyPolicy","getPrivacyPolicyValidationSchema","isRequired","schemaFields","privacyPolicy","oneOf","Input","checked","String","Label","htmlFor","getShouldSubscribeValue","SubscribeSessionStorage","getSubscribeStatus","shouldSubscribe","onContinueAsGuest","privacyPolicyUrl","baseSchema","canSubscribe","checkoutButtons","continueAsGuestButtonLabelId","onChangeEmail","onShowLogin","shouldShowEmailWatermark","setFieldValue","config","renderField","fieldProps","shouldRedirectToStorefrontForAuth","links","checkoutLink","loginLink","handleLogin","location","assign","legend","Legend","hidden","role","tabIndex","BasicFormField","setStatus","valSuccess","step","continueAsAGuestButton","setContinueAsAGuestButton","useState","emailValue","setEmailValue","authentication","setAuthentication","isStripeLoading","setIsStripeLoading","isNewAuth","setIsNewAuth","handleOnClickSubmitButton","setEmailCallback","authenticated","isComplete","handleLoading","mounted","integrations","stripeupe","container","onEmailChange","getStyles","getStripeStyles","gatewayId","getStylesFromElement","properties","parentContainer","document","getElementById","getAppliedStyles","formInput","formLabel","formError","labelText","color","fieldText","fieldPlaceholderText","fieldErrorText","fieldBackground","fieldInnerShadow","fieldBorder","buttonText","style","display","GuestFormContainer","isWalletButtonsOnTop","isSubscribed","handleChangeEmail","handleContinueAsGuest","handleShowLogin","isPaymentDataRequired","getCart","statuses","isInitializingCustomer","isContinuingAsGuest","deinitializeCustomer","initializeCustomer","cart","isLoadingGuestForm","remoteCheckoutProviders","checkoutButtonIds","shopperConfig","showNewsletterSignup","customCheckoutProvider","getProviderWithCustomCheckout","StripeUPE","shouldUseStripeLinkByMinimumAmount","shouldRenderStripeForm","IconEyeSvg","viewBox","xmlns","d","IconContainer","IconEyeSlashSvg","Toggle","openByDefault","toggle","RedirectToStorefrontLogin","isDisabled","onSignIn","isEmbedded","signInError","onCreateAccount","viewType","CustomerViewType","Login","isSigningIn","isAccountCreationEnabled","shouldShowCreateAccountLink","isSignInEmailEnabled","guestCheckoutEnabled","canCancel","forgotPasswordLink","forgotPasswordUrl","isBuyNowCart","source","changeEmailLink","body","mapErrorMessage","SuggestedLogin","Info","CancellableEnforcedLogin","EnforcedLogin","rel","target","Boolean","onChangeViewType","onAccountCreated","onContinueAsGuestError","onReady","onSubscribeToNewsletter","onSignInError","state","setState","isEmailLoginFormOpen","isReady","hasRequestedLoginEmail","draftEmail","analyticsTracker","useAnalytics","customerData","getBillingAddress","getCustomerAccountFields","getCheckout","getCustomer","getSignInEmail","errors","getSignInError","getSignInEmailError","getCreateCustomerAccountError","isSendingSignInEmail","isCreatingCustomerAccount","billingAddress","checkout","customer","signInEmail","actions","defaultNewsletterSignup","hasBillingId","customerAccountFields","isGuestEnabled","signInEmailError","PaymentMethodId","clearError","createAccount","createCustomerAccount","continueAsGuest","sendLoginEmail","sendSignInEmail","executePaymentMethodCheckout","signIn","signInCustomer","useCustomer","prevState","customerEmailEntry","handleSignIn","credentials","formValues","updateSubscriptionWhenUnchecked","acceptsMarketingNewsletter","acceptsAbandonedCartEmails","setSubscribeStatus","paymentProviderCustomer","getPaymentProviderCustomer","shouldEncourageSignIn","isGuest","stripeLinkAuthenticationState","executePaymentMethodCheckoutOrContinue","isErrorWithType","continueWithCheckoutCallback","checkoutPaymentMethodExecuted","payload","customerPaymentMethodExecuted","handleCreateAccount","mapCustomFormFieldsFromFormValues","mapCreateAccountFromFormValues","handleCancelCreateAccount","handleCancelSignIn","Guest","showCreateAccount","CreateAccount","handleSendLoginEmail","handleEmailLoginClicked","closeEmailLoginFormForm","shouldRenderGuestForm","shouldRenderCreateAccountForm","shouldRenderLoginForm","PaypalCommerce","PaypalCommerceCreditCards","PayPalCommerceAcceleratedCheckout","Braintree","BraintreeAcceleratedCheckout","element","pseudoElementSelector","declaration","getComputedStyle","reduce","propertyName","getPropertyValue","kebabCase","text","div","createElement","innerHTML","anchor","querySelector","anchorSiblings","outerHTML","ButtonVariant","ButtonSize","getClassName","isFullWidth","size","Secondary","Action","Small","Tiny","Large","children","rest"],"sourceRoot":""}