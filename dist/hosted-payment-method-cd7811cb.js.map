{"version":3,"file":"hosted-payment-method-cd7811cb.js","mappings":"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","sources":["webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/standard-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/set-prototype-of.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/invalid-argument-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-argument-invalid-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/order-finalization-not-required-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/external-integration/src/external-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/is-request-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/external-integration/src/is-additional-action.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/external-integration/src/create-external-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/to-resolvable-module.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-execute-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/humm-integration/src/humm-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/humm-integration/src/create-humm-payment-strategy.ts","webpack://checkout/./packages/core/src/app/ui/icon/IconNewAccount.tsx","webpack://checkout/./packages/core/src/app/payment/storedInstrument/AccountInstrumentSelect.tsx","webpack://checkout/./packages/core/src/app/payment/storedInstrument/AccountInstrumentFieldset.tsx","webpack://checkout/./packages/core/src/app/payment/paymentMethod/HostedPaymentMethod.tsx","webpack://checkout/./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx","webpack://checkout/@bigcommerce/checkout-sdk/./packages/sezzle-integration/src/sezzle-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/sezzle-integration/src/create-sezzle-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/common/http-request/content-type.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/common/http-request/sdk-version-headers.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/missing-data-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/payment/storefront-payment-request-sender.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/common/http-request/internal-api-headers.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/zip-integration/src/zip-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/zip-integration/src/create-zip-payment-strategy.ts","webpack://checkout/./packages/hosted-payment-integration/src/HostedPaymentMethod.tsx","webpack://checkout/./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts"],"sourcesContent":["import CustomError from './custom-error';\nimport setPrototypeOf from './set-prototype-of';\n\n/**\n * This error type should not be constructed directly. It is a base class for\n * all custom errors thrown in this library.\n */\nexport default abstract class StandardError extends Error implements CustomError {\n    name = 'StandardError';\n    type = 'standard';\n\n    constructor(message?: string) {\n        super(message || 'An unexpected error has occurred.');\n\n        setPrototypeOf(this, new.target.prototype);\n\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, new.target);\n        } else {\n            this.stack = new Error(this.message).stack;\n        }\n    }\n}\n","export default function setPrototypeOf(object: any, prototype: object) {\n    if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(object, prototype);\n    } else {\n        object.__proto__ = prototype;\n    }\n\n    return object;\n}\n","import StandardError from './standard-error';\n\n/**\n * This error should be thrown when a method is unable to proceed because the\n * caller has not provided all the arguments according to their requirements,\n * i.e.: if an argument is missing or it is not the expected data type.\n */\nexport default class InvalidArgumentError extends StandardError {\n    constructor(message?: string) {\n        super(message || 'Invalid arguments have been provided.');\n\n        this.name = 'InvalidArgumentError';\n        this.type = 'invalid_argument';\n    }\n}\n","import InvalidArgumentError from './invalid-argument-error';\n\n/**\n * This error should be thrown when we are unable to submit a payment because\n * the caller has not provided all the required fields, i.e.: if an argument is\n * missing or it is not the expected data type.\n */\nexport default class PaymentArgumentInvalidError extends InvalidArgumentError {\n    constructor(invalidFields?: string[]) {\n        let message = 'Unable to submit payment for the order because the payload is invalid.';\n\n        if (invalidFields) {\n            message = `${message} Make sure the following fields are provided correctly: ${invalidFields.join(\n                ', ',\n            )}.`;\n        }\n\n        super(message);\n\n        this.name = 'PaymentArgumentInvalidError';\n    }\n}\n","import StandardError from './standard-error';\n\n/**\n * Throw this error if we are trying to make an order finalization request for a\n * payment method that does not require such procedure.\n */\nexport default class OrderFinalizationNotRequiredError extends StandardError {\n    constructor() {\n        super('The current order does not need to be finalized at this stage.');\n\n        this.name = 'OrderFinalizationNotRequiredError';\n        this.type = 'order_finalization_not_required';\n    }\n}\n","import { FormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    isRequestError,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { AdditionalActionRequired, isAdditionalActionRequired } from './is-additional-action';\n\nexport default class ExternalPaymentStrategy implements PaymentStrategy {\n    constructor(\n        private _formPoster: FormPoster,\n        private _paymentIntegrationService: PaymentIntegrationService,\n    ) {}\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment, ...order } = payload;\n        const paymentData = payment && payment.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        try {\n            await this._paymentIntegrationService.submitPayment({ ...payment, paymentData });\n        } catch (error) {\n            if (\n                !isRequestError(error) ||\n                !isAdditionalActionRequired(error.body) ||\n                !this._isAdditionalActionRequired(error.body)\n            ) {\n                return Promise.reject(error);\n            }\n\n            const {\n                body: {\n                    additional_action_required: {\n                        data: { redirect_url },\n                    },\n                },\n            } = error;\n\n            // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n            return new Promise(() => {\n                this.redirectUrl(redirect_url);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }) as any;\n        }\n    }\n\n    finalize(): Promise<void> {\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    initialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    deinitialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    protected redirectUrl(redirect_url: string): void {\n        return this._formPoster.postForm(redirect_url, {});\n    }\n\n    private _isAdditionalActionRequired(body: AdditionalActionRequired): boolean {\n        const { additional_action_required, status } = body;\n\n        return (\n            status === 'additional_action_required' &&\n            additional_action_required &&\n            additional_action_required.type === 'offsite_redirect'\n        );\n    }\n}\n","import RequestError from './request-error';\n\n// Have to use `as` https://stackoverflow.com/questions/73987044/typeguarding-an-unknown-nested-object should be fixed in 4.8+\nconst isRequestError = (error: unknown): error is RequestError => {\n    return typeof error === 'object' && error !== null && 'body' in error;\n};\n\nexport default isRequestError;\n","export interface AdditionalActionRequired {\n    additional_action_required: {\n        data: {\n            redirect_url: string;\n        };\n        type: string;\n    };\n    status: string;\n}\n\nexport function isAdditionalActionRequired(value: unknown): value is AdditionalActionRequired {\n    return typeof value === 'object' && value !== null && 'additional_action_required' in value;\n}\n","import { createFormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport ExternalPaymentStrategy from './external-payment-strategy';\n\nconst createExternalPaymentStrategy: PaymentStrategyFactory<ExternalPaymentStrategy> = (\n    paymentIntegrationService,\n) => new ExternalPaymentStrategy(createFormPoster(), paymentIntegrationService);\n\nexport default toResolvableModule(createExternalPaymentStrategy, [{ id: 'laybuy' }]);\n","import ResolvableModule from './resolvable-module';\n\nexport default function toResolvableModule<TModule, TIdentifier>(\n    module: TModule,\n    resolveIds: TIdentifier[],\n): ResolvableModule<TModule, TIdentifier> {\n    return Object.assign(module, { resolveIds });\n}\n","import StandardError from './standard-error';\n\nconst defaultMessage =\n    'Payment cannot be processed for this order, please select another payment method';\n\nexport default class PaymentExecuteError extends StandardError {\n    type = 'custom_provider_execute_error';\n    subtype: string;\n\n    constructor(subtype: string, name: string, message?: string) {\n        super(message || defaultMessage);\n\n        this.name = name;\n        this.subtype = subtype;\n    }\n}\n","import { FormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentExecuteError,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { HummInitializationData, OffsiteRedirectResponse } from './humm';\n\nexport default class HummPaymentStrategy implements PaymentStrategy {\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        private formPoster: FormPoster,\n    ) {}\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment, ...order } = payload;\n\n        if (!payment?.methodId) {\n            throw new PaymentArgumentInvalidError(['payment.methodId']);\n        }\n\n        await this.paymentIntegrationService.loadPaymentMethod(payment.methodId, options);\n\n        const paymentMethod = this.paymentIntegrationService\n            .getState()\n            .getPaymentMethodOrThrow<HummInitializationData>(payment.methodId);\n\n        if (!paymentMethod.initializationData?.processable) {\n            throw new PaymentExecuteError(\n                'payment.humm_not_processable_error',\n                'hummNotProcessableError',\n            );\n        }\n\n        await this.paymentIntegrationService.submitOrder(order, options);\n\n        try {\n            await this.paymentIntegrationService.submitPayment({\n                methodId: payment.methodId,\n            });\n        } catch (error) {\n            if (this.isOffsiteRedirectResponse(error)) {\n                return this.handleOffsiteRedirectResponse(error);\n            }\n\n            return Promise.reject(error);\n        }\n    }\n\n    finalize(): Promise<void> {\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    initialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    deinitialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    private handleOffsiteRedirectResponse(response: OffsiteRedirectResponse): Promise<void> {\n        const url = response.body.additional_action_required.data.redirect_url;\n        const data = response.body.provider_data;\n\n        return new Promise((resolve) => {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            this.formPoster.postForm(url, JSON.parse(data), resolve);\n        });\n    }\n\n    private isOffsiteRedirectResponse(response: unknown): response is OffsiteRedirectResponse {\n        if (typeof response !== 'object' || response === null) {\n            return false;\n        }\n\n        const partialResponse: Partial<OffsiteRedirectResponse> = response;\n\n        if (!partialResponse.body) {\n            return false;\n        }\n\n        const partialBody: Partial<OffsiteRedirectResponse['body']> = partialResponse.body;\n\n        return (\n            partialBody.status === 'additional_action_required' &&\n            !!partialBody.additional_action_required &&\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            partialBody.additional_action_required.type === 'offsite_redirect' &&\n            typeof partialBody.provider_data === 'string'\n        );\n    }\n}\n","import { createFormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport HummPaymentStrategy from './humm-payment-strategy';\n\nconst createHummPaymentStrategy: PaymentStrategyFactory<HummPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new HummPaymentStrategy(paymentIntegrationService, createFormPoster());\n};\n\nexport default toResolvableModule(createHummPaymentStrategy, [{ id: 'humm' }]);\n","import React, { type FunctionComponent, memo } from 'react';\n\nimport IconContainer, { type IconProps } from './IconContainer';\n\nconst IconNewAccountSvg: FunctionComponent = () => (\n    <svg height=\"25\" viewBox=\"0 0 35 25\" width=\"35\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n            clipRule=\"evenodd\"\n            d=\"M33 2H2L2 23H33V2ZM2 0C0.895431 0 0 0.89543 0 2V23C0 24.1046 0.89543 25 2 25H33C34.1046 25 35 24.1046 35 23V2C35 0.89543 34.1046 0 33 0H2Z\"\n            fill=\"#D1D7E0\"\n            fillRule=\"evenodd\"\n        />\n        <path\n            clipRule=\"evenodd\"\n            d=\"M11 12C11 11.4477 11.4477 11 12 11H24C24.5523 11 25 11.4477 25 12V14C25 14.5523 24.5523 15 24 15H12C11.4477 15 11 14.5523 11 14V12Z\"\n            fill=\"#D1D7E0\"\n            fillRule=\"evenodd\"\n        />\n        <path\n            clipRule=\"evenodd\"\n            d=\"M19 6C19.5523 6 20 6.44772 20 7V19C20 19.5523 19.5523 20 19 20H17C16.4477 20 16 19.5523 16 19V7C16 6.44772 16.4477 6 17 6H19Z\"\n            fill=\"#D1D7E0\"\n            fillRule=\"evenodd\"\n        />\n    </svg>\n);\n\nconst IconNewAccount: FunctionComponent<IconProps> = (props) => (\n    <IconContainer {...props}>\n        <IconNewAccountSvg />\n    </IconContainer>\n);\n\nexport default memo(IconNewAccount);\n","import { type AccountInstrument, type AchInstrument, type BankInstrument, type PayPalInstrument } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport { type FieldProps } from 'formik';\nimport { find, noop } from 'lodash';\nimport React, { type FunctionComponent, PureComponent, type ReactNode, useCallback } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { DropdownTrigger } from '../../ui/dropdown';\nimport { IconNewAccount, IconPaypal, IconSize } from '../../ui/icon';\n\nimport isBankAccountInstrument from './isBankAccountInstrument';\n\nexport interface AccountInstrumentSelectProps extends FieldProps<string> {\n    instruments: AccountInstrument[];\n    selectedInstrumentId?: string;\n    onSelectInstrument(id: string): void;\n    onUseNewInstrument(): void;\n}\n\nexport interface AccountInstrumentSelectValues {\n    instrumentId: string;\n}\n\nclass AccountInstrumentSelect extends PureComponent<AccountInstrumentSelectProps> {\n    componentDidMount() {\n        const { selectedInstrumentId } = this.props;\n\n        // FIXME: Used setTimeout here because setFieldValue call doesnot set value if called before formik is properly mounted.\n        //        This ensures that update Field value is called after formik has mounted.\n        // See GitHub issue: https://github.com/jaredpalmer/formik/issues/930\n        setTimeout(() => this.updateFieldValue(selectedInstrumentId));\n    }\n\n    componentDidUpdate(prevProps: Readonly<AccountInstrumentSelectProps>) {\n        const { selectedInstrumentId: prevSelectedInstrumentId } = prevProps;\n        const { selectedInstrumentId } = this.props;\n\n        if (prevSelectedInstrumentId !== selectedInstrumentId) {\n            this.updateFieldValue(selectedInstrumentId);\n        }\n    }\n\n    componentWillUnmount() {\n        const { selectedInstrumentId, field } = this.props;\n\n        if (field.value === '' && selectedInstrumentId !== undefined) {\n            this.updateFieldValue();\n        }\n    }\n\n    render(): ReactNode {\n        const { field, instruments, onSelectInstrument, onUseNewInstrument, selectedInstrumentId } =\n            this.props;\n\n        const selectedInstrument = find(instruments, { bigpayToken: selectedInstrumentId });\n        const { value, ...otherFieldProps } = field;\n\n        return (\n            <div className=\"instrumentSelect\">\n                <DropdownTrigger\n                    dropdown={\n                        <AccountInstrumentMenu\n                            instruments={instruments}\n                            onSelectInstrument={onSelectInstrument}\n                            onUseNewInstrument={onUseNewInstrument}\n                            selectedInstrumentId={selectedInstrumentId}\n                        />\n                    }\n                >\n                    <AccountInstrumentSelectButton\n                        instrument={selectedInstrument}\n                        testId=\"instrument-select\"\n                    />\n\n                    <input type=\"hidden\" value={value || ''} {...otherFieldProps} />\n                </DropdownTrigger>\n            </div>\n        );\n    }\n\n    private updateFieldValue(instrumentId = ''): void {\n        const { form, field } = this.props;\n\n        form.setFieldValue(field.name, instrumentId);\n    }\n}\n\ninterface AccountInstrumentMenuProps {\n    instruments: AccountInstrument[];\n    selectedInstrumentId?: string;\n    onSelectInstrument(id: string): void;\n    onUseNewInstrument(): void;\n}\n\nconst AccountInstrumentMenu: FunctionComponent<AccountInstrumentMenuProps> = ({\n    instruments,\n    selectedInstrumentId,\n    onSelectInstrument,\n    onUseNewInstrument,\n}) => {\n    return (\n        <ul\n            className=\"instrumentSelect-dropdownMenu instrumentSelect-dropdownMenuNext dropdown-menu\"\n            data-test=\"instrument-select-menu\"\n        >\n            {instruments.map((instrument) => (\n                <li\n                    className={classNames('instrumentSelect-option dropdown-menu-item', {\n                        'instrumentSelect-option--selected':\n                            instrument.bigpayToken === selectedInstrumentId,\n                    })}\n                    key={instrument.bigpayToken}\n                >\n                    <AccountInstrumentOption\n                        instrument={instrument}\n                        onClick={onSelectInstrument}\n                        testId=\"instrument-select-option\"\n                    />\n                </li>\n            ))}\n\n            <li className=\"instrumentSelect-option instrumentSelect-option--addNew dropdown-menu-item\">\n                <AccountInstrumentUseNewButton\n                    onClick={onUseNewInstrument}\n                    testId=\"instrument-select-option-use-new\"\n                />\n            </li>\n        </ul>\n    );\n};\n\ninterface AccountInstrumentSelectButtonProps {\n    instrument?: AccountInstrument;\n    testId?: string;\n    onClick?(): void;\n}\n\nconst AccountInstrumentSelectButton: FunctionComponent<AccountInstrumentSelectButtonProps> = ({\n    instrument,\n    testId,\n    onClick,\n}) => {\n    if (!instrument) {\n        return (\n            <AccountInstrumentUseNewButton\n                className=\"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input\"\n                testId={testId}\n            />\n        );\n    }\n\n    return !isBankAccountInstrument(instrument) ? (\n        <AccountInstrumentMenuItem\n            className=\"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input\"\n            instrument={instrument}\n            onClick={onClick}\n            testId={testId}\n        />\n    ) : (\n        <BankInstrumentMenuItem\n            className=\"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input\"\n            instrument={instrument}\n            onClick={onClick}\n            testId={testId}\n        />\n    );\n};\n\ninterface AccountInstrumentOptionProps {\n    instrument: AccountInstrument;\n    testId?: string;\n    onClick?(token: string): void;\n}\n\nconst AccountInstrumentOption: FunctionComponent<AccountInstrumentOptionProps> = ({\n    instrument,\n    onClick = noop,\n}) => {\n    const handleClick = useCallback(() => {\n        onClick(instrument.bigpayToken);\n    }, [onClick, instrument]);\n\n    return !isBankAccountInstrument(instrument) ? (\n        <AccountInstrumentMenuItem\n            instrument={instrument}\n            onClick={handleClick}\n            testId=\"instrument-select-option\"\n        />\n    ) : (\n        <BankInstrumentMenuItem\n            instrument={instrument}\n            onClick={handleClick}\n            testId=\"instrument-select-option\"\n        />\n    );\n};\n\ninterface AccountInstrumentMenuItemProps {\n    className?: string;\n    instrument: PayPalInstrument;\n    testId?: string;\n    onClick?(): void;\n}\n\nconst AccountInstrumentMenuItem: FunctionComponent<AccountInstrumentMenuItemProps> = ({\n    className,\n    instrument: { externalId },\n    testId,\n    onClick,\n}) => {\n    return (\n        <button className={className} data-test={testId} onClick={onClick} type=\"button\">\n            <div className=\"instrumentSelect-details\">\n                {\n                    // TODO: When we include new account instrument types we can\n                    // abstract these icons in a similar way we did for credit cards.\n                }\n                <IconPaypal additionalClassName=\"accountIcon-icon\" size={IconSize.Medium} />\n\n                <div className=\"instrumentSelect-account\" data-test={`${testId}-externalId`}>\n                    {externalId}\n                </div>\n            </div>\n        </button>\n    );\n};\n\ninterface BankInstrumentMenuItemProps {\n    className?: string;\n    instrument: BankInstrument | AchInstrument;\n    testId?: string;\n    onClick?(): void;\n}\n\nconst BankInstrumentMenuItem: FunctionComponent<BankInstrumentMenuItemProps> = ({\n    className,\n    instrument,\n    testId,\n    onClick,\n}) => {\n    return (\n        <button className={className} data-test={testId} onClick={onClick} type=\"button\">\n            <div className=\"instrumentSelect-details\">\n                {\n                    // TODO: When we include new account instrument types we can\n                    // abstract these icons in a similar way we did for credit cards.\n                }\n                <div className=\"instrumentSelect-card\">\n                    <TranslatedString\n                        data={{ accountNumber: instrument.accountNumber }}\n                        id=\"payment.instrument_account_number_ending\"\n                    />\n                </div>\n                <div className=\"instrumentSelect-issuer\">\n                    <TranslatedString id=\"payment.instrument_issuer\" />: {instrument.issuer}\n                </div>\n            </div>\n        </button>\n    );\n};\n\ninterface AccountInstrumentUseNewButtonProps {\n    className?: string;\n    testId?: string;\n    onClick?(): void;\n}\n\nconst AccountInstrumentUseNewButton: FunctionComponent<AccountInstrumentUseNewButtonProps> = ({\n    className,\n    testId,\n    onClick = noop,\n}) => (\n    <button className={className} data-test={testId} onClick={onClick} type=\"button\">\n        <div className=\"instrumentSelect-details instrumentSelect-details--addNew\">\n            <IconNewAccount additionalClassName=\"accountIcon-icon\" size={IconSize.Medium} />\n\n            <div className=\"instrumentSelect-account\">\n                <TranslatedString id=\"payment.account_instrument_add_action\" />\n            </div>\n        </div>\n    </button>\n);\n\nexport default AccountInstrumentSelect;\n","import { type AccountInstrument } from '@bigcommerce/checkout-sdk';\nimport { type FieldProps } from 'formik';\nimport React, { type FunctionComponent, memo, useCallback } from 'react';\n\nimport { TranslatedHtml, TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { BasicFormField, Fieldset, Legend } from '../../ui/form';\nimport { ModalTrigger, type ModalTriggerModalProps } from '../../ui/modal';\n\nimport AccountInstrumentSelect from './AccountInstrumentSelect';\nimport ManageInstrumentsModal from './ManageInstrumentsModal';\n\nexport interface AccountInstrumentFieldsetProps {\n    instruments: AccountInstrument[];\n    selectedInstrument?: AccountInstrument;\n    onSelectInstrument(id: string): void;\n    onUseNewInstrument(): void;\n}\n\nexport interface AccountInstrumentFieldsetValues {\n    instrumentId: string;\n}\n\nconst AccountInstrumentFieldset: FunctionComponent<AccountInstrumentFieldsetProps> = ({\n    instruments,\n    onSelectInstrument,\n    onUseNewInstrument,\n    selectedInstrument,\n}) => {\n    const renderInput = useCallback(\n        (field: FieldProps<string>) => (\n            <AccountInstrumentSelect\n                {...field}\n                instruments={instruments}\n                onSelectInstrument={onSelectInstrument}\n                onUseNewInstrument={onUseNewInstrument}\n                selectedInstrumentId={selectedInstrument && selectedInstrument.bigpayToken}\n            />\n        ),\n        [instruments, onSelectInstrument, onUseNewInstrument, selectedInstrument],\n    );\n\n    const renderModal = useCallback(\n        (props: ModalTriggerModalProps) => (\n            <ManageInstrumentsModal instruments={instruments} {...props} />\n        ),\n        [instruments],\n    );\n\n    return (\n        <Fieldset\n            additionalClassName=\"instrumentFieldset\"\n            legend={\n                <Legend hidden>\n                    <TranslatedString id=\"payment.account_instrument_text\" />\n                </Legend>\n            }\n        >\n            <ModalTrigger modal={renderModal}>\n                {({ onClick }) => (\n                    <button className=\"instrumentModal-trigger\" onClick={onClick} type=\"button\">\n                        <TranslatedString id=\"payment.instrument_manage_button\" />\n                    </button>\n                )}\n            </ModalTrigger>\n\n            <BasicFormField name=\"instrumentId\" render={renderInput} />\n\n            {instruments.length === 0 && (\n                <div className=\"instrumentSelect-note\">\n                    <TranslatedHtml id=\"payment.account_instrument_new_shipping_address\" />\n                </div>\n            )}\n        </Fieldset>\n    );\n};\n\nexport default memo(AccountInstrumentFieldset);\n","import {\n    type AccountInstrument,\n    type CheckoutSelectors,\n    type PaymentInitializeOptions,\n    type PaymentInstrument,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { createExternalPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/external';\nimport { createHummPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/humm';\nimport { createOffsitePaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/offsite';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport { find, noop } from 'lodash';\nimport React, { Component, type ReactNode } from 'react';\n\nimport { type CheckoutContextProps } from '@bigcommerce/checkout/contexts';\nimport { type MapToPropsFactory } from '@bigcommerce/checkout/legacy-hoc';\nimport { withLanguage, type WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { type PaymentFormValues } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nimport { withCheckout } from '../../checkout';\nimport { connectFormik, type ConnectFormikProps } from '../../common/form';\nimport {\n    AccountInstrumentFieldset,\n    isAccountInstrument,\n    isInstrumentFeatureAvailable,\n} from '../storedInstrument';\nimport StoreInstrumentFieldset from '../StoreInstrumentFieldset';\nimport withPayment, { type WithPaymentProps } from '../withPayment';\n\nexport interface HostedPaymentMethodProps {\n    description?: ReactNode;\n    isInitializing?: boolean;\n    isUsingMultiShipping?: boolean;\n    method: PaymentMethod;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n    onUnhandledError?(error: Error): void;\n}\n\ninterface HostedPaymentMethodState {\n    isAddingNewInstrument: boolean;\n    selectedInstrument?: AccountInstrument;\n}\n\ninterface WithCheckoutHostedPaymentMethodProps {\n    instruments: AccountInstrument[];\n    isInstrumentFeatureAvailable: boolean;\n    isLoadingInstruments: boolean;\n    isNewAddress: boolean;\n    isPaymentDataRequired: boolean;\n    loadInstruments(): Promise<CheckoutSelectors>;\n}\n\nclass HostedPaymentMethod extends Component<\n    HostedPaymentMethodProps &\n        WithCheckoutHostedPaymentMethodProps &\n        WithPaymentProps &\n        WithLanguageProps &\n        ConnectFormikProps<PaymentFormValues>,\n    HostedPaymentMethodState\n> {\n    state: HostedPaymentMethodState = {\n        isAddingNewInstrument: false,\n    };\n\n    async componentDidMount(): Promise<void> {\n        const {\n            initializePayment,\n            isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp,\n            loadInstruments,\n            method,\n            onUnhandledError = noop,\n        } = this.props;\n\n        try {\n            await initializePayment({\n                gatewayId: method.gateway,\n                methodId: method.id,\n                integrations: [\n                    createHummPaymentStrategy,\n                    createExternalPaymentStrategy,\n                    createOffsitePaymentStrategy,\n                ],\n            });\n\n            if (isInstrumentFeatureAvailableProp) {\n                await loadInstruments();\n            }\n        } catch (error) {\n            onUnhandledError(error);\n        }\n    }\n\n    async componentWillUnmount(): Promise<void> {\n        const { deinitializePayment, method, onUnhandledError = noop } = this.props;\n\n        try {\n            await deinitializePayment({\n                gatewayId: method.gateway,\n                methodId: method.id,\n            });\n        } catch (error) {\n            onUnhandledError(error);\n        }\n    }\n\n    render(): ReactNode {\n        const {\n            description,\n            isInitializing = false,\n            isLoadingInstruments,\n            instruments,\n            isNewAddress,\n            isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp,\n        } = this.props;\n\n        const { selectedInstrument = this.getDefaultInstrument() } = this.state;\n\n        const isLoading = isInitializing || isLoadingInstruments;\n        const shouldShowInstrumentFieldset =\n            isInstrumentFeatureAvailableProp && (instruments.length > 0 || isNewAddress);\n\n        if (!description && !isInstrumentFeatureAvailableProp) {\n            return null;\n        }\n\n        return (\n            <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n                <div className=\"paymentMethod paymentMethod--hosted\">\n                    {description}\n\n                    {shouldShowInstrumentFieldset && (\n                        <AccountInstrumentFieldset\n                            instruments={instruments}\n                            onSelectInstrument={this.handleSelectInstrument}\n                            onUseNewInstrument={this.handleUseNewInstrument}\n                            selectedInstrument={selectedInstrument}\n                        />\n                    )}\n\n                    {isInstrumentFeatureAvailableProp && (\n                        <StoreInstrumentFieldset\n                            instrumentId={selectedInstrument && selectedInstrument.bigpayToken}\n                            isAccountInstrument={true}\n                        />\n                    )}\n                </div>\n            </LoadingOverlay>\n        );\n    }\n\n    private getDefaultInstrument(): AccountInstrument | undefined {\n        const { isAddingNewInstrument } = this.state;\n        const { instruments } = this.props;\n\n        if (isAddingNewInstrument || !instruments.length) {\n            return;\n        }\n\n        return find(instruments, { defaultInstrument: true }) || instruments[0];\n    }\n\n    private handleUseNewInstrument: () => void = () => {\n        this.setState({\n            isAddingNewInstrument: true,\n            selectedInstrument: undefined,\n        });\n    };\n\n    private handleSelectInstrument: (id: string) => void = (id) => {\n        const { instruments } = this.props;\n\n        this.setState({\n            isAddingNewInstrument: false,\n            selectedInstrument: find(instruments, { bigpayToken: id }),\n        });\n    };\n}\n\nconst mapFromCheckoutProps: MapToPropsFactory<\n    CheckoutContextProps,\n    WithCheckoutHostedPaymentMethodProps,\n    HostedPaymentMethodProps & ConnectFormikProps<PaymentFormValues>\n> = () => {\n    const filterAccountInstruments = memoizeOne((instruments: PaymentInstrument[] = []) =>\n        instruments.filter(isAccountInstrument),\n    );\n    const filterTrustedInstruments = memoizeOne((instruments: AccountInstrument[] = []) =>\n        instruments.filter(({ trustedShippingAddress }) => trustedShippingAddress),\n    );\n\n    return (context, props) => {\n        const { method } = props;\n\n        const { checkoutService, checkoutState } = context;\n\n        const {\n            data: {\n                getCart,\n                getConfig,\n                getCustomer,\n                getInstruments,\n                isPaymentDataRequired,\n                isPaymentDataSubmitted,\n            },\n            statuses: { isLoadingInstruments },\n        } = checkoutState;\n\n        const cart = getCart();\n        const config = getConfig();\n        const customer = getCustomer();\n\n        if (!config || !cart || !customer || !method) {\n            return null;\n        }\n\n        const currentMethodInstruments = filterAccountInstruments(getInstruments(method));\n        const trustedInstruments = filterTrustedInstruments(currentMethodInstruments);\n\n        return {\n            instruments: trustedInstruments,\n            isNewAddress: trustedInstruments.length === 0 && currentMethodInstruments.length > 0,\n            isInstrumentFeatureAvailable:\n                !isPaymentDataSubmitted(method.id, method.gateway) &&\n                isInstrumentFeatureAvailable({\n                    config,\n                    customer,\n                    paymentMethod: method,\n                }),\n            isLoadingInstruments: isLoadingInstruments(),\n            isPaymentDataRequired: isPaymentDataRequired(),\n            loadInstruments: checkoutService.loadInstruments,\n        };\n    };\n};\n\nexport default connectFormik(\n    withLanguage(withPayment(withCheckout(mapFromCheckoutProps)(HostedPaymentMethod))),\n);\n","import {\n    type AccountInstrument,\n    type CheckoutSelectors,\n    type CheckoutService,\n    type LanguageService,\n    type PaymentInitializeOptions,\n    type PaymentInstrument,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport { find, noop } from 'lodash';\nimport React, { type ReactNode, useCallback, useEffect, useState } from 'react';\n\nimport {\n    AccountInstrumentFieldset,\n    isAccountInstrument,\n    isInstrumentFeatureAvailable,\n    StoreInstrumentFieldset,\n} from '@bigcommerce/checkout/instrument-utils';\nimport { type PaymentFormService } from '@bigcommerce/checkout/payment-integration-api';\nimport { LoadingOverlay } from '@bigcommerce/checkout/ui';\n\nexport interface HostedPaymentComponentProps {\n    checkoutService: CheckoutService;\n    checkoutState: CheckoutSelectors;\n    description?: ReactNode;\n    isInitializing?: boolean;\n    isUsingMultiShipping?: boolean;\n    language: LanguageService;\n    method: PaymentMethod;\n    paymentForm: PaymentFormService;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n    onUnhandledError?(error: Error): void;\n}\n\ninterface HostedPaymentComponentDerivedProps {\n    instruments: AccountInstrument[];\n    isInstrumentFeatureAvailable: boolean;\n    isLoadingInstruments: boolean;\n    isNewAddress: boolean;\n    isPaymentDataRequired: boolean;\n    loadInstruments(): Promise<CheckoutSelectors>;\n}\n\nfunction getHostedPaymentMethodDerivedProps(\n    props: HostedPaymentComponentProps,\n): HostedPaymentComponentDerivedProps {\n    const filterAccountInstruments = memoizeOne((instruments: PaymentInstrument[] = []) =>\n        instruments.filter(isAccountInstrument),\n    );\n    const filterTrustedInstruments = memoizeOne((instruments: AccountInstrument[] = []) =>\n        instruments.filter(({ trustedShippingAddress }) => trustedShippingAddress),\n    );\n    const { checkoutService, checkoutState, isUsingMultiShipping = false, method } = props;\n\n    const {\n        data: {\n            getCart,\n            getConfig,\n            getCustomer,\n            getInstruments,\n            isPaymentDataRequired,\n            isPaymentDataSubmitted,\n        },\n        statuses: { isLoadingInstruments },\n    } = checkoutState;\n\n    const cart = getCart();\n    const config = getConfig();\n    const customer = getCustomer();\n\n    if (!config || !cart || !customer) {\n        throw new Error('Unable to get checkout');\n    }\n\n    const currentMethodInstruments = filterAccountInstruments(getInstruments(method));\n    const trustedInstruments = filterTrustedInstruments(currentMethodInstruments);\n\n    return {\n        instruments: trustedInstruments,\n        isNewAddress: trustedInstruments.length === 0 && currentMethodInstruments.length > 0,\n        isInstrumentFeatureAvailable:\n            !isPaymentDataSubmitted(method.id, method.gateway) &&\n            isInstrumentFeatureAvailable({\n                config,\n                customer,\n                isUsingMultiShipping,\n                paymentMethod: method,\n            }),\n        isLoadingInstruments: isLoadingInstruments(),\n        isPaymentDataRequired: isPaymentDataRequired(),\n        loadInstruments: checkoutService.loadInstruments,\n    };\n}\n\nconst HostedPaymentMethodComponent: React.FC<HostedPaymentComponentProps> = (props) => {\n    const {\n        description,\n        isInitializing = false,\n        initializePayment,\n        method,\n        onUnhandledError = noop,\n        deinitializePayment,\n    } = props;\n\n    const [isAddingNewInstrument, setIsAddingNewInstrument] = useState(false);\n    const [selectedInstrument, setSelectedInstrument] = useState<AccountInstrument | undefined>();\n\n    const derivedProps = getHostedPaymentMethodDerivedProps(props);\n    const {\n        isLoadingInstruments,\n        instruments,\n        isNewAddress,\n        isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp,\n        loadInstruments,\n    } = derivedProps;\n\n    const getDefaultInstrument = useCallback((): AccountInstrument | undefined => {\n        if (isAddingNewInstrument || !instruments.length) {\n            return;\n        }\n\n        return find(instruments, { defaultInstrument: true }) || instruments[0];\n    }, [isAddingNewInstrument, instruments]);\n\n    const handleUseNewInstrument = useCallback(() => {\n        setIsAddingNewInstrument(true);\n        setSelectedInstrument(undefined);\n    }, []);\n\n    const handleSelectInstrument = useCallback(\n        (id: string) => {\n            setIsAddingNewInstrument(false);\n            setSelectedInstrument(find(instruments, { bigpayToken: id }));\n        },\n        [instruments],\n    );\n\n    useEffect(() => {\n        const initializePaymentAsync = async () => {\n            try {\n                await initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n\n                if (isInstrumentFeatureAvailableProp) {\n                    await loadInstruments();\n                }\n            } catch (error) {\n                onUnhandledError(error);\n            }\n        };\n\n        void initializePaymentAsync();\n\n        return () => {\n            const deinitializePaymentAsync = async () => {\n                try {\n                    await deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                } catch (error) {\n                    onUnhandledError(error);\n                }\n            };\n\n            void deinitializePaymentAsync();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const currentSelectedInstrument = selectedInstrument || getDefaultInstrument();\n    const isLoading = isInitializing || isLoadingInstruments;\n    const shouldShowInstrumentFieldset =\n        isInstrumentFeatureAvailableProp && (instruments.length > 0 || isNewAddress);\n\n    if (!description && !isInstrumentFeatureAvailableProp) {\n        return null;\n    }\n\n    return (\n        <LoadingOverlay hideContentWhenLoading isLoading={isLoading}>\n            <div className=\"paymentMethod paymentMethod--hosted\">\n                {description}\n\n                {shouldShowInstrumentFieldset && (\n                    <AccountInstrumentFieldset\n                        instruments={instruments}\n                        onSelectInstrument={handleSelectInstrument}\n                        onUseNewInstrument={handleUseNewInstrument}\n                        selectedInstrument={currentSelectedInstrument}\n                    />\n                )}\n\n                {isInstrumentFeatureAvailableProp && (\n                    <StoreInstrumentFieldset\n                        instrumentId={\n                            currentSelectedInstrument && currentSelectedInstrument.bigpayToken\n                        }\n                        instruments={instruments}\n                        isAccountInstrument={true}\n                    />\n                )}\n            </div>\n        </LoadingOverlay>\n    );\n};\n\nexport default HostedPaymentMethodComponent;\n","import { ExternalPaymentStrategy } from '@bigcommerce/checkout-sdk/external-integration';\n\nexport default class SezzlePaymentStrategy extends ExternalPaymentStrategy {\n    protected redirectUrl(url: string): void {\n        window.location.replace(url);\n    }\n}\n","import { createFormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport SezzlePaymentStrategy from './sezzle-payment-strategy';\n\nconst createSezzlePaymentStrategy: PaymentStrategyFactory<SezzlePaymentStrategy> = (\n    paymentIntegrationService,\n) => new SezzlePaymentStrategy(createFormPoster(), paymentIntegrationService);\n\nexport default toResolvableModule(createSezzlePaymentStrategy, [{ id: 'sezzle' }]);\n","enum ContentType {\n    Json = 'application/json',\n    JsonV1 = 'application/vnd.bc.v1+json',\n}\n\nexport default ContentType;\n","export const SDK_VERSION_HEADERS = { 'X-Checkout-SDK-Version': LIBRARY_VERSION };\n","import StandardError from './standard-error';\n\nexport enum MissingDataErrorType {\n    MissingBillingAddress,\n    MissingCart,\n    MissingCheckout,\n    MissingConsignments,\n    MissingCustomer,\n    MissingCheckoutConfig,\n    MissingOrder,\n    MissingOrderConfig,\n    MissingOrderId,\n    MissingPayment,\n    MissingPaymentId,\n    MissingPaymentInstrument,\n    MissingPaymentMethod,\n    MissingPaymentRedirectUrl,\n    MissingPaymentStatus,\n    MissingPaymentToken,\n    MissingShippingAddress,\n}\n\n/**\n * Throw this error when data that is expected to exist is missing. Usually it\n * is due to the fact that certain data has not been retrieved from or saved to\n * the server yet. And such data is required to perform certain actions.\n */\nexport default class MissingDataError extends StandardError {\n    constructor(public subtype: MissingDataErrorType) {\n        super(getErrorMessage(subtype));\n\n        this.name = 'MissingDataError';\n        this.type = 'missing_data';\n    }\n}\n\nfunction getErrorMessage(type: MissingDataErrorType): string {\n    switch (type) {\n        case MissingDataErrorType.MissingBillingAddress:\n            return 'Unable to proceed because billing address data is unavailable.';\n\n        case MissingDataErrorType.MissingCart:\n            return 'Unable to proceed because cart data is unavailable.';\n\n        case MissingDataErrorType.MissingConsignments:\n            return 'Unable to proceed because consignments data is unavailable.';\n\n        case MissingDataErrorType.MissingCheckout:\n            return 'Unable to proceed because checkout data is unavailable.';\n\n        case MissingDataErrorType.MissingCustomer:\n            return 'Unable to proceed because customer data is unavailable.';\n\n        case MissingDataErrorType.MissingCheckoutConfig:\n        case MissingDataErrorType.MissingOrderConfig:\n            return 'Unable to proceed because configuration data is unavailable.';\n\n        case MissingDataErrorType.MissingOrder:\n            return 'Unable to proceed because order data is unavailable.';\n\n        case MissingDataErrorType.MissingOrderId:\n            return 'Unable to proceed because order ID is unavailable or not generated yet.';\n\n        case MissingDataErrorType.MissingPayment:\n            return 'Unable to proceed because payment data is unavailable.';\n\n        case MissingDataErrorType.MissingPaymentToken:\n            return 'Unable to proceed because the token required to submit a payment is missing.';\n\n        case MissingDataErrorType.MissingPaymentMethod:\n            return 'Unable to proceed because payment method data is unavailable or not properly configured.';\n\n        case MissingDataErrorType.MissingShippingAddress:\n            return 'Unable to proceed because shipping address data is unavailable.';\n\n        default:\n            return 'Unable to proceed because the required data is unavailable.';\n    }\n}\n","import { RequestSender } from '@bigcommerce/request-sender';\n\nimport { ContentType, INTERNAL_USE_ONLY, SDK_VERSION_HEADERS } from '../common/http-request';\n\nexport default class StorefrontPaymentRequestSender {\n    constructor(private _requestSender: RequestSender) {}\n\n    async saveExternalId(methodId: string, token: string): Promise<void> {\n        const url = `/api/storefront/payment/${methodId}/save-external-id`;\n        const options = {\n            headers: {\n                Accept: ContentType.JsonV1,\n                'X-API-INTERNAL': INTERNAL_USE_ONLY,\n                ...SDK_VERSION_HEADERS,\n            },\n            body: {\n                externalId: token,\n                provider: methodId,\n            },\n        };\n\n        await this._requestSender.post<void>(url, options);\n    }\n}\n","export const INTERNAL_USE_ONLY =\n    'This API endpoint is for internal use only and may change in the future';\n","import {\n    isRequestError,\n    MissingDataError,\n    MissingDataErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStrategy,\n    StorefrontPaymentRequestSender,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default class ZipPaymentStrategy implements PaymentStrategy {\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        private storefrontPaymentRequestSender: StorefrontPaymentRequestSender,\n    ) {}\n\n    initialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment, ...order } = payload;\n\n        if (!payment) {\n            throw new PaymentArgumentInvalidError(['payment']);\n        }\n\n        const { methodId } = payment;\n        const { getPaymentMethodOrThrow } = await this.paymentIntegrationService.loadPaymentMethod(\n            methodId,\n            options,\n        );\n\n        const {\n            clientToken,\n            initializationData,\n        }: { clientToken?: string; initializationData?: { redirectUrl?: string } } =\n            getPaymentMethodOrThrow(methodId);\n        const redirectUrl = initializationData?.redirectUrl;\n\n        if (!clientToken || !redirectUrl) {\n            throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n        }\n\n        const { id: nonce } = JSON.parse(clientToken);\n\n        if (!nonce) {\n            throw new MissingDataError(MissingDataErrorType.MissingPaymentToken);\n        }\n\n        const { isStoreCreditApplied: useStoreCredit } = this.paymentIntegrationService\n            .getState()\n            .getCheckoutOrThrow();\n\n        await this.paymentIntegrationService.applyStoreCredit(useStoreCredit);\n        await this.paymentIntegrationService.initializePayment(methodId, { useStoreCredit });\n\n        await this.paymentIntegrationService.submitOrder(order, options);\n        await this._prepareForReferredRegistration(methodId, nonce);\n\n        try {\n            await this.paymentIntegrationService.submitPayment({\n                methodId,\n                paymentData: { nonce },\n            });\n        } catch (error) {\n            if (isRequestError(error) && error.body.status === 'additional_action_required') {\n                return new Promise(() => window.location.replace(redirectUrl));\n            }\n\n            throw error;\n        }\n    }\n\n    finalize(): Promise<void> {\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    deinitialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    private _prepareForReferredRegistration(methodId: string, externalId: string): Promise<void> {\n        return this.storefrontPaymentRequestSender.saveExternalId(methodId, externalId);\n    }\n}\n","import { createRequestSender } from '@bigcommerce/request-sender';\n\nimport {\n    PaymentStrategyFactory,\n    StorefrontPaymentRequestSender,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport ZipPaymentStrategy from './zip-payment-strategy';\n\nconst createZipPaymentStrategy: PaymentStrategyFactory<ZipPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    const { getHost } = paymentIntegrationService.getState();\n    const requestSender = createRequestSender({ host: getHost() });\n    const storefrontPaymentRequestSender = new StorefrontPaymentRequestSender(requestSender);\n\n    return new ZipPaymentStrategy(paymentIntegrationService, storefrontPaymentRequestSender);\n};\n\nexport default toResolvableModule(createZipPaymentStrategy, [{ id: 'zip' }, { id: 'quadpay' }]);\n","import { type PaymentInitializeOptions } from '@bigcommerce/checkout-sdk';\nimport { createAfterpayPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/afterpay';\nimport { createClearpayPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/clearpay';\nimport { createSezzlePaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/sezzle';\nimport { createZipPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/zip';\nimport React, { type FunctionComponent } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport { HostedPaymentComponent } from './components';\n\nconst HostedPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    checkoutService,\n    checkoutState,\n    method,\n    onUnhandledError,\n    language,\n    paymentForm,\n}) => {\n    const initializeHostedPaymentMethod = async (options: PaymentInitializeOptions) => {\n        return checkoutService.initializePayment({\n            ...options,\n            integrations: [\n                createZipPaymentStrategy,\n                createAfterpayPaymentStrategy,\n                createSezzlePaymentStrategy,\n                createClearpayPaymentStrategy,\n            ],\n        });\n    };\n\n    return (\n        <HostedPaymentComponent\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            deinitializePayment={checkoutService.deinitializePayment}\n            initializePayment={initializeHostedPaymentMethod}\n            language={language}\n            method={method}\n            onUnhandledError={onUnhandledError}\n            paymentForm={paymentForm}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    HostedPaymentMethod,\n    [\n        { gateway: 'afterpay' },\n        { id: 'afterpay' },\n        { gateway: 'clearpay' },\n        { id: 'clearpay' },\n        { id: 'quadpay' },\n        { id: 'sezzle' },\n        { id: 'zip' },\n    ],\n);\n","import { type Customer, type PaymentMethod, type StoreConfig } from '@bigcommerce/checkout-sdk';\n\nexport interface IsInstrumentFeatureAvailableState {\n    config: StoreConfig;\n    customer: Customer;\n    isUsingMultiShipping: boolean;\n    paymentMethod: PaymentMethod;\n}\n\nexport default function isInstrumentFeatureAvailable({\n    config,\n    customer,\n    isUsingMultiShipping,\n    paymentMethod,\n}: IsInstrumentFeatureAvailableState): boolean {\n    if (\n        !config.checkoutSettings.isCardVaultingEnabled ||\n        !paymentMethod.config.isVaultingEnabled ||\n        customer.isGuest ||\n        isUsingMultiShipping\n    ) {\n        return false;\n    }\n\n    return true;\n}\n"],"names":["StandardError","Error","constructor","message","prototype","super","name","type","Object","setPrototypeOf","this","__proto__","captureStackTrace","stack","InvalidArgumentError","PaymentArgumentInvalidError","invalidFields","join","OrderFinalizationNotRequiredError","ExternalPaymentStrategy","_formPoster","_paymentIntegrationService","execute","payload","options","payment","order","paymentData","submitOrder","submitPayment","error","value","body","_isAdditionalActionRequired","Promise","reject","additional_action_required","data","redirect_url","redirectUrl","finalize","initialize","resolve","deinitialize","postForm","status","module","paymentIntegrationService","createFormPoster","resolveIds","id","assign","PaymentExecuteError","subtype","HummPaymentStrategy","formPoster","methodId","loadPaymentMethod","paymentMethod","getState","getPaymentMethodOrThrow","initializationData","processable","isOffsiteRedirectResponse","handleOffsiteRedirectResponse","response","url","provider_data","JSON","parse","partialResponse","partialBody","IconNewAccountSvg","height","viewBox","width","xmlns","clipRule","d","fill","fillRule","memo","props","IconContainer","AccountInstrumentSelect","PureComponent","componentDidMount","selectedInstrumentId","setTimeout","updateFieldValue","componentDidUpdate","prevProps","prevSelectedInstrumentId","componentWillUnmount","field","undefined","render","instruments","onSelectInstrument","onUseNewInstrument","selectedInstrument","find","bigpayToken","otherFieldProps","className","DropdownTrigger","dropdown","AccountInstrumentMenu","AccountInstrumentSelectButton","instrument","testId","instrumentId","form","setFieldValue","map","key","AccountInstrumentOption","onClick","AccountInstrumentUseNewButton","isBankAccountInstrument","BankInstrumentMenuItem","AccountInstrumentMenuItem","noop","handleClick","useCallback","externalId","IconPaypal","additionalClassName","size","Medium","TranslatedString","accountNumber","issuer","renderInput","renderModal","ManageInstrumentsModal","Fieldset","legend","Legend","hidden","ModalTrigger","modal","BasicFormField","length","TranslatedHtml","HostedPaymentMethod","Component","state","isAddingNewInstrument","handleUseNewInstrument","setState","handleSelectInstrument","initializePayment","isInstrumentFeatureAvailable","isInstrumentFeatureAvailableProp","loadInstruments","method","onUnhandledError","gatewayId","gateway","integrations","deinitializePayment","description","isInitializing","isLoadingInstruments","isNewAddress","getDefaultInstrument","isLoading","shouldShowInstrumentFieldset","LoadingOverlay","hideContentWhenLoading","StoreInstrumentFieldset","isAccountInstrument","defaultInstrument","connectFormik","withLanguage","withPayment","withCheckout","filterAccountInstruments","filter","filterTrustedInstruments","trustedShippingAddress","context","checkoutService","checkoutState","getCart","getConfig","getCustomer","getInstruments","isPaymentDataRequired","isPaymentDataSubmitted","statuses","cart","config","customer","currentMethodInstruments","trustedInstruments","setIsAddingNewInstrument","useState","setSelectedInstrument","derivedProps","isUsingMultiShipping","getHostedPaymentMethodDerivedProps","useEffect","currentSelectedInstrument","A","SezzlePaymentStrategy","window","location","replace","ContentType","Json","JsonV1","SDK_VERSION_HEADERS","MissingDataErrorType","StorefrontPaymentRequestSender","_requestSender","saveExternalId","token","headers","Accept","provider","post","MissingBillingAddress","MissingCart","MissingCheckout","MissingConsignments","MissingCustomer","MissingCheckoutConfig","MissingOrder","MissingOrderConfig","MissingOrderId","MissingPayment","MissingPaymentId","MissingPaymentInstrument","MissingPaymentMethod","MissingPaymentRedirectUrl","MissingPaymentStatus","MissingPaymentToken","MissingShippingAddress","MissingDataError","ZipPaymentStrategy","storefrontPaymentRequestSender","clientToken","nonce","isStoreCreditApplied","useStoreCredit","getCheckoutOrThrow","applyStoreCredit","_prepareForReferredRegistration","getHost","requestSender","createRequestSender","host","toResolvableComponent","language","paymentForm","HostedPaymentComponent","checkoutSettings","isCardVaultingEnabled","isVaultingEnabled","isGuest"],"sourceRoot":""}